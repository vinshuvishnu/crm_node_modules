"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[839],{5839:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ne}});var r=n(4880),a=n(885),s=n(2791),c=n(2930),i=n(1413),o=n(1933),l=n(4569),d=n.n(l),u="".concat("https://quiz.datacubeindia.com/common","/coupon"),m=function(e){return d().post(u,e).then((function(e){return e.data})).then((function(e){return e.data}))},p=function(e){return d().post("".concat(u,"/update"),e).then((function(e){return e.data})).then((function(e){return e.data}))},x=function(e,t){return d().put("".concat(u,"/").concat(t),e).then((function(e){return e.data})).then((function(e){return e.data}))},f=n(184),h=(0,s.createContext)(c.vv),v=function(e){var t=e.children,n=(0,s.useState)(c.vv.state),r=(0,a.Z)(n,2),o=r[0],l=r[1];return(0,f.jsx)(h.Provider,{value:{state:o,updateState:function(e){var t=(0,i.Z)((0,i.Z)({},o),e);l(t)}},children:t})},j=function(){return(0,s.useContext)(h)},b=(0,c.gl)(c.B2),g=function(e){var t=e.children,n=j().state,r=(0,s.useState)((0,c.gJ)(n)),i=(0,a.Z)(r,2),l=i[0],m=i[1],p=(0,s.useMemo)((function(){return(0,c.gJ)(n)}),[n]);(0,s.useEffect)((function(){l!==p&&m(p)}),[p]);var x=(0,o.useQuery)("".concat(c.vb.USERS_LIST,"-").concat(l),(function(){return function(e){return d().get("".concat(u,"?").concat(e)).then((function(e){return e.data}))}(l)}),{cacheTime:0,keepPreviousData:!0,refetchOnWindowFocus:!1}),h=x.isFetching,v=x.refetch,g=x.data;return(0,f.jsx)(b.Provider,{value:{isLoading:h,refetch:v,response:g,query:l},children:t})},_=function(){return(0,s.useContext)(b)},N=function(){var e=_().response;return e&&(null===e||void 0===e?void 0:e.data)||[]},w=function(){return _().isLoading},k=(0,s.createContext)(c.px),y=function(e){var t=e.children,n=(0,s.useState)(c.px.selected),r=(0,a.Z)(n,2),i=r[0],o=r[1],l=(0,s.useState)(c.px.itemIdForUpdate),d=(0,a.Z)(l,2),u=d[0],m=d[1],p=_().isLoading,x=N(),h=(0,s.useMemo)((function(){return(0,c.Qx)(p,x)}),[p,x]),v=(0,s.useMemo)((function(){return(0,c.HX)(x,i)}),[x,i]);return(0,f.jsx)(k.Provider,{value:{selected:i,itemIdForUpdate:u,setItemIdForUpdate:m,disabled:h,isAllSelected:v,onSelect:function(e){(0,c.G8)(e,i,o)},onSelectAll:function(){(0,c.ir)(v,o,x)},clearSelected:function(){o([])}},children:t})},C=function(){return(0,s.useContext)(k)},S=n(8472),Z=function(e){var t=e.csvData,n=e.fileName;return(0,f.jsxs)("button",{type:"button",className:"btn btn-light-primary me-3",children:[(0,f.jsx)(c.D8,{path:"/media/icons/duotune/arrows/arr078.svg",className:"svg-icon-2"}),(0,f.jsx)(S.CSVLink,{data:t,filename:n,children:"Export"})]})},q=function(){var e=N(),t=C().setItemIdForUpdate;return(0,f.jsxs)("div",{className:"d-flex justify-content-end","data-kt-user-table-toolbar":"base",children:[(0,f.jsx)(Z,{csvData:e,fileName:"coupons"}),(0,f.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){t(null)},children:[(0,f.jsx)(c.D8,{path:"/media/icons/duotune/arrows/arr075.svg",className:"svg-icon-2"}),"Add Coupon"]})]})},F=n(4165),P=n(5861),I=function(){var e=C(),t=e.selected,n=e.clearSelected,r=(0,o.useQueryClient)(),a=_().query,s=(0,o.useMutation)((function(){return function(e){var t=e.map((function(e){return d().delete("".concat(u,"/").concat(e))}));return d().all(t).then((function(){}))}(t)}),{onSuccess:function(){r.invalidateQueries(["".concat(c.vb.USERS_LIST,"-").concat(a)]),n()}});return(0,f.jsxs)("div",{className:"d-flex justify-content-end align-items-center",children:[(0,f.jsxs)("div",{className:"fw-bolder me-5",children:[(0,f.jsx)("span",{className:"me-2",children:t.length})," Selected"]}),(0,f.jsx)("button",{type:"button",className:"btn btn-danger",onClick:(0,P.Z)((0,F.Z)().mark((function e(){return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.mutateAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Delete Selected"})]})},E=function(){var e=j().updateState,t=(0,s.useState)(""),n=(0,a.Z)(t,2),r=n[0],o=n[1],l=(0,c.Nr)(r,150);return(0,s.useEffect)((function(){void 0!==l&&void 0!==r&&e((0,i.Z)({search:l},c.Xw))}),[l]),(0,f.jsx)("div",{className:"card-title",children:(0,f.jsxs)("div",{className:"d-flex align-items-center position-relative my-1",children:[(0,f.jsx)(c.D8,{path:"/media/icons/duotune/general/gen021.svg",className:"svg-icon-1 position-absolute ms-6"}),(0,f.jsx)("input",{type:"text","data-kt-user-table-filter":"search",className:"form-control form-control-solid w-250px ps-14",placeholder:"Search Coupon",value:r,onChange:function(e){return o(e.target.value)}})]})})},U=function(){var e=C().selected;return(0,f.jsxs)("div",{className:"card-header border-0 pt-6",children:[(0,f.jsx)(E,{}),(0,f.jsx)("div",{className:"card-toolbar",children:e.length>0?(0,f.jsx)(I,{}):(0,f.jsx)(q,{})})]})},M=n(1358),T=function(e){var t=e.column;return(0,f.jsx)(f.Fragment,{children:t.Header&&"string"===typeof t.Header?(0,f.jsx)("th",(0,i.Z)((0,i.Z)({},t.getHeaderProps()),{},{children:t.render("Header")})):t.render("Header")})},D=n(8182),A=function(e){var t=e.row;return(0,f.jsx)("tr",(0,i.Z)((0,i.Z)({},t.getRowProps()),{},{children:t.cells.map((function(e){return(0,f.jsx)("td",(0,i.Z)((0,i.Z)({},e.getCellProps()),{},{className:(0,D.Z)({"text-end min-w-100px":"actions"===e.column.id}),children:e.render("Cell")}))}))}))},R=function(e){var t=e.coupon,n=C().setItemIdForUpdate;return(0,f.jsx)("div",{className:"d-flex align-items-center",children:(0,f.jsx)("div",{className:"d-flex flex-column",children:(0,f.jsx)("a",{onClick:function(){n(t.id)},style:{cursor:"pointer"},className:"text-gray-800 text-hover-primary mb-1",children:t.coupon_code})})})},H=n(1830),O=n.n(H),B=function(e){var t=e.status,n=e.id,r=(0,s.useState)(t),c=(0,a.Z)(r,2),i=c[0],o=c[1];return(0,f.jsxs)(f.Fragment,{children:[" ",(0,f.jsx)("label",{className:"form-check form-check-custom form-check-solid form-switch mb-5",children:(0,f.jsx)("input",{className:"form-check-input",type:"checkbox",name:"status",checked:i,onChange:function(){var e=(0,P.Z)((0,F.Z)().mark((function e(t){return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(t.currentTarget.checked),e.next=3,x({status:t.currentTarget.checked?1:0},n);case 3:O().fire({title:"Success!",text:"Status updated successfully!",icon:"success",confirmButtonText:"Okay"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})})]})},L=n(6492),V=function(e){var t=e.id,n=C().setItemIdForUpdate,r=_().query,a=(0,o.useQueryClient)();(0,s.useEffect)((function(){L.Mn.reinitialization()}),[]);var i=(0,o.useMutation)((function(){return e=t,d().delete("".concat(u,"/").concat(e)).then((function(){}));var e}),{onSuccess:function(){a.invalidateQueries(["".concat(c.vb.USERS_LIST,"-").concat(r)])}});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("a",{href:"#",className:"btn btn-light btn-active-light-primary btn-sm","data-kt-menu-trigger":"click","data-kt-menu-placement":"bottom-end",children:(0,f.jsx)("i",{className:"bi bi-three-dots-vertical fs-5"})}),(0,f.jsxs)("div",{className:"menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bold fs-7 w-125px py-4","data-kt-menu":"true",children:[(0,f.jsx)("div",{className:"menu-item px-3",children:(0,f.jsx)("a",{className:"menu-link px-3",onClick:function(){n(t)},children:"Edit"})}),(0,f.jsx)("div",{className:"menu-item px-3",children:(0,f.jsx)("a",{className:"menu-link px-3","data-kt-users-table-filter":"delete_row",onClick:(0,P.Z)((0,F.Z)().mark((function e(){return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.mutateAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Delete"})})]})]})},Q=function(e){var t=e.id,n=C(),r=n.selected,a=n.onSelect,c=(0,s.useMemo)((function(){return r.includes(t)}),[t,r]);return(0,f.jsx)("div",{className:"form-check form-check-sm form-check-custom form-check-solid",children:(0,f.jsx)("input",{className:"form-check-input",type:"checkbox","data-kt-check":c,"data-kt-check-target":"#kt_table_users .form-check-input",checked:c,onChange:function(){return a(t)}})})},X=function(e){var t=e.className,n=e.title,r=e.tableProps,a=r.column.id,o=j(),l=o.state,d=o.updateState,u=(0,s.useMemo)((function(){return l.sort&&l.sort===a}),[l,a]),m=(0,s.useMemo)((function(){return l.order}),[l]);return(0,f.jsx)("th",(0,i.Z)((0,i.Z)({},r.column.getHeaderProps()),{},{className:(0,D.Z)(t,u&&void 0!==m&&"table-sort-".concat(m)),style:{cursor:"pointer"},onClick:function(){if("actions"!==a&&"selection"!==a)if(u){if(u&&void 0!==m){if("asc"===m)return void d((0,i.Z)({sort:a,order:"desc"},c.Xw));d((0,i.Z)({sort:void 0,order:void 0},c.Xw))}}else d((0,i.Z)({sort:a,order:"asc"},c.Xw))},children:n}))},z=function(e){var t=e.tableProps,n=C(),r=n.isAllSelected,a=n.onSelectAll;return(0,f.jsx)("th",(0,i.Z)((0,i.Z)({},t.column.getHeaderProps()),{},{className:"w-10px pe-2",children:(0,f.jsx)("div",{className:"form-check form-check-sm form-check-custom form-check-solid me-3",children:(0,f.jsx)("input",{className:"form-check-input",type:"checkbox","data-kt-check":r,"data-kt-check-target":"#kt_table_users .form-check-input",checked:r,onChange:a})})}))},J=function(e){var t=e.percentage;return(0,f.jsx)("div",{className:"d-flex align-items-center",children:(0,f.jsx)("div",{className:"d-flex flex-column",children:t})})},G=function(e){var t=e.coupon_uses;return(0,f.jsx)("div",{className:"d-flex align-items-center",children:(0,f.jsx)("div",{className:"d-flex flex-column",children:null===t||void 0===t?void 0:t.max_user})})},W=function(e){var t=e.start_date;return(0,f.jsx)("div",{className:"fw-bolder",children:null===t||void 0===t?void 0:t.split("T")[0]})},Y=function(e){var t=e.coupon_title;return(0,f.jsx)("div",{className:"d-flex align-items-center",children:(0,f.jsx)("div",{className:"d-flex flex-column",children:t})})},K=function(e){var t=e.exp_date;return(0,f.jsx)("div",{className:"fw-bolder",children:null===t||void 0===t?void 0:t.split("T")[0]})},$=[{Header:function(e){return(0,f.jsx)(z,{tableProps:e})},id:"selection",Cell:function(e){var t=Object.assign({},e);return(0,f.jsx)(Q,{id:t.data[t.row.index].id})}},{Header:function(e){return(0,f.jsx)(X,{tableProps:e,title:"Coupon Title",className:"min-w-125px"})},id:"coupon_title",Cell:function(e){var t=Object.assign({},e);return(0,f.jsx)(Y,{coupon_title:t.data[t.row.index].coupon_title})}},{Header:function(e){return(0,f.jsx)(X,{tableProps:e,title:"Coupon Code",className:"min-w-125px"})},id:"coupon_code",Cell:function(e){var t=Object.assign({},e);return(0,f.jsx)(R,{coupon:t.data[t.row.index]})}},{Header:function(e){return(0,f.jsx)(X,{tableProps:e,title:"Rate (%)",className:"min-w-125px"})},id:"percentage",Cell:function(e){var t=Object.assign({},e);return(0,f.jsx)(J,{percentage:t.data[t.row.index].percentage})}},{Header:function(e){return(0,f.jsx)(X,{tableProps:e,title:"Max User",className:"min-w-125px"})},id:"max_user",Cell:function(e){var t=Object.assign({},e);return(0,f.jsx)(G,{coupon_uses:t.data[t.row.index].coupon_uses})}},{Header:function(e){return(0,f.jsx)(X,{tableProps:e,title:"Start Date",className:"min-w-125px"})},id:"start_date",Cell:function(e){var t,n=Object.assign({},e);return(0,f.jsx)(W,{start_date:null===(t=n.data[n.row.index].coupon_dates)||void 0===t?void 0:t.start_date})}},{Header:function(e){return(0,f.jsx)(X,{tableProps:e,title:"Exp. Date",className:"min-w-125px"})},id:"exp_date",Cell:function(e){var t,n=Object.assign({},e);return(0,f.jsx)(K,{exp_date:null===(t=n.data[n.row.index].coupon_dates)||void 0===t?void 0:t.exp_date})}},{Header:function(e){return(0,f.jsx)(X,{tableProps:e,title:"Active",className:"min-w-125px"})},id:"active",Cell:function(e){var t=Object.assign({},e);return(0,f.jsx)(B,{status:t.data[t.row.index].status,id:t.data[t.row.index].id})}},{Header:function(e){return(0,f.jsx)(X,{tableProps:e,title:"Actions",className:"text-end min-w-100px"})},id:"actions",Cell:function(e){var t=Object.assign({},e);return(0,f.jsx)(V,{id:t.data[t.row.index].id})}}],ee=function(){return(0,f.jsx)("div",{style:(0,i.Z)((0,i.Z)({},{borderRadius:"0.475rem",boxShadow:"0 0 50px 0 rgb(82 63 105 / 15%)",backgroundColor:"#fff",color:"#7e8299",fontWeight:"500",margin:"0",width:"auto",padding:"1rem 2rem",top:"calc(50% - 2rem)",left:"calc(50% - 4rem)"}),{},{position:"absolute",textAlign:"center"}),children:"Processing..."})},te=function(){var e,t=function(){var e=(0,i.Z)({links:[]},c.Xw),t=_().response;return t&&t.payload&&t.payload.pagination?t.payload.pagination:e}(),n=w(),r=j().updateState;return(0,f.jsxs)("div",{className:"row",children:[(0,f.jsx)("div",{className:"col-sm-12 col-md-5 d-flex align-items-center justify-content-center justify-content-md-start"}),(0,f.jsx)("div",{className:"col-sm-12 col-md-7 d-flex align-items-center justify-content-center justify-content-md-end",children:(0,f.jsx)("div",{id:"kt_table_users_paginate",children:(0,f.jsx)("ul",{className:"pagination",children:null===(e=t.links)||void 0===e?void 0:e.map((function(e){return(0,f.jsx)("li",{className:(0,D.Z)("page-item",{active:t.page===e.page,disabled:n,previous:"&laquo; Previous"===e.label,next:"Next &raquo;"===e.label}),children:(0,f.jsx)("a",{className:"page-link",onClick:function(){var a;(a=e.page)&&!n&&t.page!==a&&r({page:a,items_per_page:t.items_per_page||10})},dangerouslySetInnerHTML:{__html:e.label},style:{cursor:"pointer"}})},e.label)}))})})})]})},ne=function(){var e=N(),t=w(),n=(0,s.useMemo)((function(){return e}),[e]),r=(0,s.useMemo)((function(){return $}),[]),a=(0,M.useTable)({columns:r,data:n}),o=a.getTableProps,l=a.getTableBodyProps,d=a.headers,u=a.rows,m=a.prepareRow;return(0,f.jsxs)(c.mN,{className:"py-4",children:[(0,f.jsx)("div",{className:"table-responsive",children:(0,f.jsxs)("table",(0,i.Z)((0,i.Z)({id:"kt_table_users",className:"table align-middle table-row-dashed fs-6 gy-5 dataTable no-footer"},o()),{},{children:[(0,f.jsx)("thead",{children:(0,f.jsx)("tr",{className:"text-start text-muted fw-bolder fs-7 text-uppercase gs-0",children:d.map((function(e){return(0,f.jsx)(T,{column:e},e.id)}))})}),(0,f.jsx)("tbody",(0,i.Z)((0,i.Z)({className:"text-gray-600 fw-bold"},l()),{},{children:u.length>0?u.map((function(e,t){return m(e),(0,f.jsx)(A,{row:e},"row-".concat(t,"-").concat(e.id))})):(0,f.jsx)("tr",{children:(0,f.jsx)("td",{colSpan:7,children:(0,f.jsx)("div",{className:"d-flex text-center w-100 align-content-center justify-content-center",children:"No matching records found"})})})}))]}))}),(0,f.jsx)(te,{}),t&&(0,f.jsx)(ee,{})]})},re=function(){var e=C().setItemIdForUpdate;return(0,f.jsxs)("div",{className:"modal-header",children:[(0,f.jsx)("h2",{className:"fw-bolder",children:"Add Coupon"}),(0,f.jsx)("div",{className:"btn btn-icon btn-sm btn-active-icon-primary","data-kt-users-modal-action":"close",onClick:function(){return e(void 0)},style:{cursor:"pointer"},children:(0,f.jsx)(c.D8,{path:"/media/icons/duotune/arrows/arr061.svg",className:"svg-icon-1"})})]})},ae=n(5173),se=n(6863),ce=[se.Ry().shape({coupon_title:se.Z_().required("Coupon title is required").label("Coupon Title"),coupon_code:se.Z_().required("Coupon code is required").label("Coupon Code"),percentage:se.Rx().required("Percentage is required").label("Percentage Amount"),minimum_order_price:se.Rx().required("Minimum Order is required").label("minimum_order_price")}),se.Ry().shape({coupon_uses:se.Ry().shape({max_user:se.Rx().required("Max User is required"),max_use_per_user:se.Rx().required("max_use_per_user is required")})}),se.Ry().shape({coupon_dates:se.Ry().shape({start_date:se.hT().required("Start date is required"),exp_date:se.hT().required("Expiry date is required")})})],ie={id:void 0,coupon_title:"",coupon_code:"",percentage:void 0,minimum_order_price:void 0,avail_on_purchase:"",visible_on_app:void 0,description:"",coupon_uses:{max_user:void 0},coupon_dates:{}},oe=n(8922),le=n(4136),de=n(6770),ue=n.n(de),me=function(e){var t=e.setFieldValue,n=e.values;console.log(n);var r=[{id:1,value:"All",label:"All"},{id:2,value:"1st",label:"1st"},{id:3,value:"2nd",label:"2nd"},{id:4,value:"3rd",label:"3rd"},{id:5,value:"4th",label:"4th"},{id:6,value:"5th",label:"5th"},{id:7,value:"6th",label:"6th"}],c=(0,s.useState)([]),i=(0,a.Z)(c,2),o=i[0],l=i[1],u=(0,s.useState)(null===n||void 0===n?void 0:n.description),m=(0,a.Z)(u,2),p=m[0],x=m[1],h=(0,s.useRef)(null);(0,s.useEffect)((function(){void 0==p&&null==p||t("description",p)}),[p]),(0,s.useEffect)((function(){if(""!=(null===n||void 0===n?void 0:n.avail_on_purchase)){var e=n.avail_on_purchase.split(",");l(r.filter((function(t){return e.some((function(e){return e===t.label}))})))}}),[]);var v=function(e){var t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","image/*"),t.click(),t.onchange=(0,P.Z)((0,F.Z)().mark((function e(){var n,r;return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===t||void 0===t?void 0:t.files[0],(r=new FormData).append("image",n),e.next=5,d().post("".concat(oe.T,"/upload"),r).then((function(e){var t=h.current.getEditor().getSelection();h.current.getEditor().insertEmbed(null===t||void 0===t?void 0:t.index,"image",e.data)})).catch((function(e){console.log(e,"err")}));case 5:case"end":return e.stop()}}),e)})))},j=(0,s.useMemo)((function(){return{toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]],handlers:{image:v}}}}),[]);return(0,f.jsxs)("div",{className:"w-100",children:[(0,f.jsxs)("div",{className:"d-flex flex-wrap gap-5 mb-10",children:[(0,f.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,f.jsx)("label",{className:"d-flex align-items-center form-label",children:(0,f.jsx)("span",{className:"required",children:"Coupon Title"})}),(0,f.jsx)(ae.gN,{name:"coupon_title",className:"form-control mb-2",placeholder:"Enter coupon title"}),(0,f.jsx)("div",{className:"text-danger",children:(0,f.jsx)(ae.Bc,{name:"coupon_title"})})]}),(0,f.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,f.jsx)("label",{className:"d-flex align-items-center form-label",children:(0,f.jsx)("span",{className:"required",children:"Percentage/Amount"})}),(0,f.jsx)(ae.gN,{type:"number",name:"percentage",className:"form-control mb-2",placeholder:"Enter a percentage"}),(0,f.jsx)("div",{className:"text-danger",children:(0,f.jsx)(ae.Bc,{name:"percentage"})})]})]}),(0,f.jsxs)("div",{className:"d-flex flex-wrap gap-5 mb-10",children:[(0,f.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,f.jsx)("label",{className:"d-flex align-items-center form-label",children:(0,f.jsx)("span",{className:"required",children:"Minimum Order Amount"})}),(0,f.jsx)(ae.gN,{type:"number",name:"minimum_order_price",className:"form-control mb-2",placeholder:"Enter a Minimum amount"}),(0,f.jsx)("div",{className:"text-danger",children:(0,f.jsx)(ae.Bc,{name:"minimum_order_price"})})]}),(0,f.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,f.jsx)("label",{className:"d-flex align-items-center form-label",children:(0,f.jsx)("span",{className:"",children:"Coupon can apply for purchase"})}),(0,f.jsx)(le.ZP,{isMulti:!0,name:"avail_on_purchase",options:r,className:"basic-multi-select",classNamePrefix:"select",value:o,onChange:function(e,n){l(e),t("avail_on_purchase",e.map((function(e){return e.value})).join(","))}}),(0,f.jsx)("div",{className:"text-danger",children:(0,f.jsx)(ae.Bc,{name:"avail_on_purchase"})})]})]}),(0,f.jsxs)("div",{className:"d-flex flex-wrap gap-5 mb-10",children:[(0,f.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,f.jsx)("label",{className:"fs-6 fw-bold form-label",children:"Coupon Visible on Student Portal"}),(0,f.jsxs)(ae.gN,{name:"visible_on_app",as:"select",className:"form-select mb-2",placeholder:"",children:[(0,f.jsx)("option",{value:1,children:"Yes"}),(0,f.jsx)("option",{value:0,children:"No"})]}),(0,f.jsx)("div",{className:"text-danger mt-2",children:(0,f.jsx)(ae.Bc,{name:"visible_on_app"})})]}),(0,f.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,f.jsx)("label",{className:"d-flex align-items-center form-label",children:(0,f.jsx)("span",{className:"required",children:"Coupon Code"})}),(0,f.jsxs)("div",{style:{flexDirection:"row",display:"flex"},className:"mb-2 gap-5",children:[(0,f.jsx)(ae.gN,{name:"coupon_code",className:"form-control mb-2",placeholder:"Enter Coupon Code"}),(0,f.jsx)("button",{type:"button",className:"btn btn-lg btn-light-primary w-50 p-0 fs-15",onClick:function(){t("coupon_code",Math.random().toString(36).slice(2))},children:"Generate Coupon"})]}),(0,f.jsx)("div",{className:"text-danger",children:(0,f.jsx)(ae.Bc,{name:"coupon_code"})})]})]}),(0,f.jsxs)("div",{className:"fv-row w-100 mb-10",children:[(0,f.jsx)("label",{className:"form-label",children:"Description"}),(0,f.jsx)(ue(),{onChange:function(e,t,n,r){x(e)},id:"description",value:p,formats:["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image"],modules:j,ref:h})]})]})},pe=n(9513),xe=n.n(pe),fe=(n(6096),function(e){var t,n,r,a,s=e.values,c=e.setFieldValue;return(0,f.jsxs)("div",{className:"w-100",children:[(0,f.jsxs)("div",{className:"d-flex flex-wrap gap-5 mb-10",children:[(0,f.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,f.jsx)("label",{className:"d-flex align-items-center form-label",children:(0,f.jsx)("span",{className:"required",children:"Max User(How many user can use)"})}),(0,f.jsx)(ae.gN,{name:"coupon_uses.max_user",className:"form-control mb-2",type:"number",placeholder:"Enter Max User"}),(0,f.jsx)("div",{className:"text-danger",children:(0,f.jsx)(ae.Bc,{name:"coupon_uses.max_user"})})]}),(0,f.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,f.jsx)("label",{className:"d-flex align-items-center form-label",children:(0,f.jsx)("span",{className:"required",children:"Max Use By One User"})}),(0,f.jsx)(ae.gN,{type:"number",name:"coupon_uses.max_use_per_user",className:"form-control mb-2",placeholder:"Enter Max Use By One User"}),(0,f.jsx)("div",{className:"text-danger",children:(0,f.jsx)(ae.Bc,{name:"coupon_uses.max_use_per_user"})})]})]}),(0,f.jsxs)("div",{className:"d-flex flex-wrap gap-5 mb-10",children:[(0,f.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,f.jsx)("label",{className:"d-flex align-items-center form-label",children:(0,f.jsx)("span",{className:"required",children:"Start Date"})}),(0,f.jsx)(xe(),{className:"form-control mb-2",selected:null!==s&&void 0!==s&&null!==(t=s.coupon_dates)&&void 0!==t&&t.start_date?new Date(null===s||void 0===s||null===(n=s.coupon_dates)||void 0===n?void 0:n.start_date):new Date,onChange:function(e){c("coupon_dates.start_date",e)}}),(0,f.jsx)("div",{className:"text-danger",children:(0,f.jsx)(ae.Bc,{name:"coupon_dates.start_date"})})]}),(0,f.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,f.jsx)("label",{className:"d-flex align-items-center form-label",children:(0,f.jsx)("span",{className:"required",children:"Expiry Date"})}),(0,f.jsx)(xe(),{className:"form-control mb-2",selected:null!==s&&void 0!==s&&null!==(r=s.coupon_dates)&&void 0!==r&&r.exp_date?new Date(null===s||void 0===s||null===(a=s.coupon_dates)||void 0===a?void 0:a.exp_date):new Date,onChange:function(e){c("coupon_dates.exp_date",e)}}),(0,f.jsx)("div",{className:"text-danger",children:(0,f.jsx)(ae.Bc,{name:"coupon_dates.exp_date"})})]})]})]})}),he=function(e){var t=e.role,n=e.isUserLoading,r=(0,s.useRef)(null),o=(0,s.useRef)(null),l=C().setItemIdForUpdate,d=_().refetch,u=(0,s.useState)(!1),x=(0,a.Z)(u,2),h=x[0],v=x[1],j=(0,s.useState)(ce[0]),b=(0,a.Z)(j,2),g=b[0],N=b[1],w=(0,s.useState)((0,i.Z)((0,i.Z)({},t),{},{description:t.description||ie.description,coupon_uses:t.coupon_uses||ie.coupon_uses,coupon_dates:t.coupon_dates||ie.coupon_dates,coupon_title:t.coupon_title||ie.coupon_title,coupon_code:t.coupon_code||ie.coupon_code,percentage:t.percentage||ie.percentage,avail_on_purchase:t.avail_on_purchase||ie.avail_on_purchase,minimum_order_price:t.minimum_order_price||ie.minimum_order_price,visible_on_app:t.visible_on_app||ie.visible_on_app})),k=(0,a.Z)(w,2),y=k[0];k[1];(0,s.useEffect)((function(){r.current&&S()}),[r]);var S=function(){o.current=L.vO.createInsance(r.current)},Z=function(){o.current&&(v(o.current.currentStepIndex===o.current.totatStepsNumber-1),o.current.goPrev(),N(ce[o.current.currentStepIndex-1]))},q=function(){var e=(0,P.Z)((0,F.Z)().mark((function e(t,n){var r;return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.current){e.next=2;break}return e.abrupt("return");case 2:if(v(o.current.currentStepIndex===o.current.totatStepsNumber-1),N(ce[o.current.currentStepIndex]),o.current.currentStepIndex===o.current.totatStepsNumber){e.next=14;break}return e.next=7,m(t);case 7:r=e.sent,n.setFieldValue("id",null===r||void 0===r?void 0:r.id),n.setFieldValue("coupon_dates.coupon_id",null===r||void 0===r?void 0:r.id),n.setFieldValue("coupon_uses.coupon_id",null===r||void 0===r?void 0:r.id),o.current.goNext(),e.next=27;break;case 14:return e.prev=14,e.next=17,p({coupon_dates:t.coupon_dates,coupon_uses:t.coupon_uses});case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(14),console.error(e.t0);case 22:return e.prev=22,n.resetForm(),!0&&d(),l(void 0),O().fire({title:"Success!",text:"Coupon ".concat(t.id?"Updated":"Created","!"),icon:"success",confirmButtonText:"Okay"}),e.finish(22);case 27:case"end":return e.stop()}}),e,null,[[14,19,22,27]])})));return function(t,n){return e.apply(this,arguments)}}();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{ref:r,className:"stepper stepper-links d-flex flex-column",id:"kt_create_account_stepper",children:[(0,f.jsxs)("div",{className:"stepper-nav mb-5",children:[(0,f.jsx)("div",{className:"stepper-item current","data-kt-stepper-element":"nav",children:(0,f.jsx)("h3",{className:"stepper-title",children:"Coupon"})}),(0,f.jsx)("div",{className:"stepper-item","data-kt-stepper-element":"nav",children:(0,f.jsx)("h3",{className:"stepper-title",children:"Coupon Settings"})})]}),(0,f.jsx)(ae.J9,{validationSchema:g,initialValues:y,onSubmit:q,validateOnChange:!1,children:function(e){var t=e.setFieldValue,n=e.values;e.touched,e.setFieldError,e.errors;return(0,f.jsxs)(ae.l0,{className:"mx-auto mw-700px w-100 pt-5 pb-10",id:"kt_create_account_form",children:[(0,f.jsx)("div",{className:"current","data-kt-stepper-element":"content",children:(0,f.jsx)(me,{setFieldValue:t,values:n})}),(0,f.jsx)("div",{"data-kt-stepper-element":"content",children:(0,f.jsx)(fe,{setFieldValue:t,values:n})}),(0,f.jsxs)("div",{className:"d-flex flex-stack pt-15",children:[(0,f.jsx)("div",{className:"mr-2",children:(0,f.jsxs)("button",{onClick:Z,type:"button",className:"btn btn-lg btn-light-primary me-3","data-kt-stepper-action":"previous",children:[(0,f.jsx)(c.D8,{path:"/media/icons/duotune/arrows/arr063.svg",className:"svg-icon-4 me-1"}),"Back"]})}),(0,f.jsx)("div",{children:(0,f.jsx)("button",{type:"submit",className:"btn btn-lg btn-primary me-3",children:(0,f.jsxs)("span",{className:"indicator-label",children:[!h&&"Continue",h&&"Submit",(0,f.jsx)(c.D8,{path:"/media/icons/duotune/arrows/arr064.svg",className:"svg-icon-3 ms-2 me-0"})]})})})]})]})}})]}),n&&(0,f.jsx)(ee,{})]})},ve=function(){var e=C(),t=e.itemIdForUpdate,n=e.setItemIdForUpdate,r=(0,c.UE)(t),a=(0,o.useQuery)("".concat(c.vb.USERS_LIST,"-user-").concat(t),(function(){return e=t,d().get("".concat(u,"/").concat(e)).then((function(e){return e.data})).then((function(e){return e.data}));var e}),{cacheTime:0,enabled:r,onError:function(e){n(void 0),console.error(e)}}),s=a.isLoading,i=a.data,l=a.error;return t?s||l||!i?null:(0,f.jsx)(he,{isUserLoading:s,role:i}):(0,f.jsx)(he,{isUserLoading:s,role:{id:void 0}})},je=function(){return(0,s.useEffect)((function(){return document.body.classList.add("modal-open"),function(){document.body.classList.remove("modal-open")}}),[]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"modal fade show d-block",id:"kt_modal_add_user",role:"dialog",tabIndex:-1,"aria-modal":"true",children:(0,f.jsx)("div",{className:"modal-dialog modal-dialog-centered mw-900px",children:(0,f.jsxs)("div",{className:"modal-content",children:[(0,f.jsx)(re,{}),(0,f.jsx)("div",{className:"modal-body scroll-y mx-5 mx-xl-15",children:(0,f.jsx)(ve,{})})]})})}),(0,f.jsx)("div",{className:"modal-backdrop fade show"})]})},be=function(){var e=C().itemIdForUpdate;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(c.O7,{children:[(0,f.jsx)(U,{}),(0,f.jsx)(ne,{})]}),void 0!==e&&(0,f.jsx)(je,{})]})},ge=function(){return(0,f.jsx)(v,{children:(0,f.jsx)(g,{children:(0,f.jsx)(y,{children:(0,f.jsx)(be,{})})})})},_e=[{title:"Coupons",path:"/coupon",isSeparator:!1,isActive:!1},{title:"",path:"",isSeparator:!0,isActive:!1}],Ne=function(){return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(r.V1,{breadcrumbs:_e,children:"Coupons list"}),(0,f.jsx)(ge,{})]})}},8922:function(e,t,n){n.d(t,{T:function(){return r}});var r="https://quiz.datacubeindia.com/common/option"}}]);
//# sourceMappingURL=839.b7dc1686.chunk.js.map