"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[499],{8922:function(e,t,n){n.d(t,{T:function(){return r}});var r="https://quiz.datacubeindia.com/common/option"},9499:function(e,t,n){n.r(t),n.d(t,{default:function(){return Qt}});var r=n(6871),s=n(4880),a=n(885),i=n(2791),c=n(2930),o=n(1413),l=n(1933),d=n(4569),u=n.n(d),m="https://quiz.datacubeindia.com/common/program",p=function(e,t){return u().put("".concat(m,"/").concat(t),e).then((function(e){return e.data})).then((function(e){return e.data}))},x=n(184),f=(0,i.createContext)(c.vv),h=function(e){var t=e.children,n=(0,i.useState)(c.vv.state),r=(0,a.Z)(n,2),s=r[0],l=r[1];return(0,x.jsx)(f.Provider,{value:{state:s,updateState:function(e){var t=(0,o.Z)((0,o.Z)({},s),e);l(t)}},children:t})},v=function(){return(0,i.useContext)(f)},j=(0,c.gl)(c.B2),b=function(e){var t=e.children,n=v().state,r=(0,i.useState)((0,c.gJ)(n)),s=(0,a.Z)(r,2),o=s[0],d=s[1],p=(0,i.useMemo)((function(){return(0,c.gJ)(n)}),[n]);(0,i.useEffect)((function(){o!==p&&d(p)}),[p]);var f=(0,l.useQuery)("".concat(c.vb.USERS_LIST,"-").concat(o),(function(){return function(e){return u().get("".concat(m,"?").concat(e)).then((function(e){return e.data}))}(o)}),{cacheTime:0,keepPreviousData:!0,refetchOnWindowFocus:!1}),h=f.isFetching,b=f.refetch,g=f.data;return(0,x.jsx)(j.Provider,{value:{isLoading:h,refetch:b,response:g,query:o},children:t})},g=function(){return(0,i.useContext)(j)},N=function(){var e=g().response;return e&&(null===e||void 0===e?void 0:e.data)||[]},k=function(){return g().isLoading},w=(0,i.createContext)(c.px),y=function(e){var t=e.children,n=(0,i.useState)(c.px.selected),r=(0,a.Z)(n,2),s=r[0],o=r[1],l=(0,i.useState)(c.px.itemIdForUpdate),d=(0,a.Z)(l,2),u=d[0],m=d[1],p=g().isLoading,f=N(),h=(0,i.useMemo)((function(){return(0,c.Qx)(p,f)}),[p,f]),v=(0,i.useMemo)((function(){return(0,c.HX)(f,s)}),[f,s]);return(0,x.jsx)(w.Provider,{value:{selected:s,itemIdForUpdate:u,setItemIdForUpdate:m,disabled:h,isAllSelected:v,onSelect:function(e){(0,c.G8)(e,s,o)},onSelectAll:function(){(0,c.ir)(v,o,f)},clearSelected:function(){o([])}},children:t})},S=function(){return(0,i.useContext)(w)},_=n(8472),Z=function(e){var t=e.csvData,n=e.fileName;return(0,x.jsxs)("button",{type:"button",className:"btn btn-light-primary me-3",children:[(0,x.jsx)(c.D8,{path:"/media/icons/duotune/arrows/arr078.svg",className:"svg-icon-2"}),(0,x.jsx)(_.CSVLink,{data:t,filename:n,children:"Export"})]})},C=n(6492),F=function(){var e=v().updateState,t=g().isLoading,n=(0,i.useState)(),r=(0,a.Z)(n,2),s=r[0],l=r[1],d=(0,i.useState)(),u=(0,a.Z)(d,2),m=u[0],p=u[1];(0,i.useEffect)((function(){C.Mn.reinitialization()}),[]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("button",{disabled:t,type:"button",className:"btn btn-light-primary me-3","data-kt-menu-trigger":"click","data-kt-menu-placement":"bottom-end",children:[(0,x.jsx)(c.D8,{path:"/media/icons/duotune/general/gen031.svg",className:"svg-icon-2"}),"Filter"]}),(0,x.jsxs)("div",{className:"menu menu-sub menu-sub-dropdown w-300px w-md-325px","data-kt-menu":"true",children:[(0,x.jsx)("div",{className:"px-7 py-5",children:(0,x.jsx)("div",{className:"fs-5 text-dark fw-bolder",children:"Filter Options"})}),(0,x.jsx)("div",{className:"separator border-gray-200"}),(0,x.jsxs)("div",{className:"px-7 py-5","data-kt-user-table-filter":"form",children:[(0,x.jsxs)("div",{className:"mb-10",children:[(0,x.jsx)("label",{className:"form-label fs-6 fw-bold",children:"Question Type:"}),(0,x.jsxs)("select",{className:"form-select form-select-solid fw-bolder","data-kt-select2":"true","data-placeholder":"Select option","data-allow-clear":"true","data-kt-user-table-filter":"role","data-hide-search":"true",onChange:function(e){return l(e.target.value)},value:s,children:[(0,x.jsx)("option",{value:""}),(0,x.jsx)("option",{value:"Objective",children:"Objective"}),(0,x.jsx)("option",{value:"True/False",children:"True/False"}),(0,x.jsx)("option",{value:"Fill In The Blanks",children:"Fill In The Blanks"}),(0,x.jsx)("option",{value:"Subjective",children:"Subjective"})]})]}),(0,x.jsxs)("div",{className:"mb-10",children:[(0,x.jsx)("label",{className:"form-label fs-6 fw-bold",children:"Difficulty Level:"}),(0,x.jsxs)("select",{className:"form-select form-select-solid fw-bolder","data-kt-select2":"true","data-placeholder":"Select option","data-allow-clear":"true","data-kt-user-table-filter":"two-step","data-hide-search":"true",onChange:function(e){return p(e.target.value)},value:m,children:[(0,x.jsx)("option",{value:""}),(0,x.jsx)("option",{value:"Easy",children:"Easy"}),(0,x.jsx)("option",{value:"Moderate",children:"Moderate"}),(0,x.jsx)("option",{value:"Difficult",children:"Difficult"})]})]}),(0,x.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,x.jsx)("button",{type:"button",disabled:t,onClick:function(){e((0,o.Z)({filter:void 0},c.Xw)),l(""),p("")},className:"btn btn-light btn-active-light-primary fw-bold me-2 px-6","data-kt-menu-dismiss":"true","data-kt-user-table-filter":"reset",children:"Reset"}),(0,x.jsx)("button",{disabled:t,type:"button",onClick:function(){e((0,o.Z)({filter:{question_type:s,level:m}},c.Xw))},className:"btn btn-primary fw-bold px-6","data-kt-menu-dismiss":"true","data-kt-user-table-filter":"filter",children:"Apply"})]})]})]})]})},P=function(){var e=N(),t=S().setItemIdForUpdate;return(0,x.jsxs)("div",{className:"d-flex justify-content-end","data-kt-user-table-toolbar":"base",children:[(0,x.jsx)(F,{}),(0,x.jsx)(Z,{csvData:e,fileName:"program"}),(0,x.jsxs)("button",{onClick:function(){t(null)},className:"btn btn-primary",children:[(0,x.jsx)(c.D8,{path:"/media/icons/duotune/arrows/arr075.svg",className:"svg-icon-2"}),"Add Program"]})]})},q=n(4165),I=n(5861),E=function(){var e=S(),t=e.selected,n=e.clearSelected,r=(0,l.useQueryClient)(),s=g().query,a=(0,l.useMutation)((function(){return function(e){var t=e.map((function(e){return u().delete("".concat(m,"/").concat(e))}));return u().all(t).then((function(){}))}(t)}),{onSuccess:function(){r.invalidateQueries(["".concat(c.vb.USERS_LIST,"-").concat(s)]),n()}});return(0,x.jsxs)("div",{className:"d-flex justify-content-end align-items-center",children:[(0,x.jsxs)("div",{className:"fw-bolder me-5",children:[(0,x.jsx)("span",{className:"me-2",children:t.length})," Selected"]}),(0,x.jsx)("button",{type:"button",className:"btn btn-danger",onClick:(0,I.Z)((0,q.Z)().mark((function e(){return(0,q.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.mutateAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Delete Selected"})]})},T=function(){var e=v().updateState,t=(0,i.useState)(""),n=(0,a.Z)(t,2),r=n[0],s=n[1],l=(0,c.Nr)(r,150);return(0,i.useEffect)((function(){void 0!==l&&void 0!==r&&e((0,o.Z)({search:l},c.Xw))}),[l]),(0,x.jsx)("div",{className:"card-title",children:(0,x.jsxs)("div",{className:"d-flex align-items-center position-relative my-1",children:[(0,x.jsx)(c.D8,{path:"/media/icons/duotune/general/gen021.svg",className:"svg-icon-1 position-absolute ms-6"}),(0,x.jsx)("input",{type:"text","data-kt-user-table-filter":"search",className:"form-control form-control-solid w-250px ps-14",placeholder:"Search Programs",value:r,onChange:function(e){return s(e.target.value)}})]})})},U=function(){var e=S().selected;return(0,x.jsxs)("div",{className:"card-header border-0 pt-6",children:[(0,x.jsx)(T,{}),(0,x.jsx)("div",{className:"card-toolbar",children:e.length>0?(0,x.jsx)(E,{}):(0,x.jsx)(P,{})})]})},L=n(1358),A=function(e){var t=e.column;return(0,x.jsx)(x.Fragment,{children:t.Header&&"string"===typeof t.Header?(0,x.jsx)("th",(0,o.Z)((0,o.Z)({},t.getHeaderProps()),{},{children:t.render("Header")})):t.render("Header")})},H=n(8182),M=function(e){var t=e.row;return(0,x.jsx)("tr",(0,o.Z)((0,o.Z)({},t.getRowProps()),{},{children:t.cells.map((function(e){return(0,x.jsx)("td",(0,o.Z)((0,o.Z)({},e.getCellProps()),{},{className:(0,H.Z)({"text-end min-w-100px":"actions"===e.column.id}),children:e.render("Cell")}))}))}))},D=function(e){var t,n=e.user;console.log(n,"user");var r=S().setItemIdForUpdate,s=function(){r(n.id)};return(0,x.jsxs)("div",{className:"d-flex align-items-center",children:[(0,x.jsx)("div",{className:"symbol symbol-circle symbol-50px overflow-hidden me-3",children:(0,x.jsx)("a",{onClick:s,style:{cursor:"pointer"},children:null!==n&&void 0!==n&&n.image?(0,x.jsx)("div",{className:"symbol-label",children:(0,x.jsx)("img",{src:null===n||void 0===n?void 0:n.image,alt:n.name,className:"w-100"})}):(0,x.jsx)("div",{className:(0,H.Z)("symbol-label fs-3","bg-light-warning","text-warning"),children:null===(t=n.name)||void 0===t?void 0:t.charAt(0)})})}),(0,x.jsx)("div",{className:"d-flex flex-column",children:(0,x.jsx)("a",{onClick:s,style:{cursor:"pointer"},className:"text-gray-800 text-hover-primary mb-1",children:n.name})})]})},O=function(e){var t=e.level;return(0,x.jsx)("div",{className:"fw-bolder",children:t})},R=n(1830),B=n.n(R),Q=function(e){var t=e.status,n=e.id,r=(0,i.useState)(t),s=(0,a.Z)(r,2),c=s[0],o=s[1];return(0,x.jsxs)(x.Fragment,{children:[" ",(0,x.jsx)("label",{className:"form-check form-check-custom form-check-solid form-switch mb-5",children:(0,x.jsx)("input",{className:"form-check-input",type:"checkbox",name:"status",checked:c,onChange:function(){var e=(0,I.Z)((0,q.Z)().mark((function e(t){return(0,q.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(t.currentTarget.checked),e.next=3,p({status:t.currentTarget.checked?1:0},n);case 3:B().fire({title:"Success!",text:"Status updated successfully!",icon:"success",confirmButtonText:"Okay"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})})]})},z=function(e){var t=e.id,n=S().setItemIdForUpdate,r=g().query,s=(0,l.useQueryClient)();(0,i.useEffect)((function(){C.Mn.reinitialization()}),[]);var a=(0,l.useMutation)((function(){return e=t,u().delete("".concat(m,"/").concat(e)).then((function(){}));var e}),{onSuccess:function(){s.invalidateQueries(["".concat(c.vb.USERS_LIST,"-").concat(r)])}});return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("a",{href:"#",className:"btn btn-light btn-active-light-primary btn-sm","data-kt-menu-trigger":"click","data-kt-menu-placement":"bottom-end",children:(0,x.jsx)("i",{className:"bi bi-three-dots-vertical fs-5"})}),(0,x.jsxs)("div",{className:"menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bold fs-7 w-125px py-4","data-kt-menu":"true",children:[(0,x.jsx)("div",{className:"menu-item px-3",children:(0,x.jsx)("a",{className:"menu-link px-3",onClick:function(){n(t)},children:"Edit"})}),(0,x.jsx)("div",{className:"menu-item px-3",children:(0,x.jsx)("a",{className:"menu-link px-3","data-kt-users-table-filter":"delete_row",onClick:(0,I.Z)((0,q.Z)().mark((function e(){return(0,q.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.mutateAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Delete"})})]})]})},X=function(e){var t=e.id,n=S(),r=n.selected,s=n.onSelect,a=(0,i.useMemo)((function(){return r.includes(t)}),[t,r]);return(0,x.jsx)("div",{className:"form-check form-check-sm form-check-custom form-check-solid",children:(0,x.jsx)("input",{className:"form-check-input",type:"checkbox","data-kt-check":a,"data-kt-check-target":"#kt_table_users .form-check-input",checked:a,onChange:function(){return s(t)}})})},W=function(e){var t=e.className,n=e.title,r=e.tableProps,s=r.column.id,a=v(),l=a.state,d=a.updateState,u=(0,i.useMemo)((function(){return l.sort&&l.sort===s}),[l,s]),m=(0,i.useMemo)((function(){return l.order}),[l]);return(0,x.jsx)("th",(0,o.Z)((0,o.Z)({},r.column.getHeaderProps()),{},{className:(0,H.Z)(t,u&&void 0!==m&&"table-sort-".concat(m)),style:{cursor:"pointer"},onClick:function(){if("actions"!==s&&"selection"!==s)if(u){if(u&&void 0!==m){if("asc"===m)return void d((0,o.Z)({sort:s,order:"desc"},c.Xw));d((0,o.Z)({sort:void 0,order:void 0},c.Xw))}}else d((0,o.Z)({sort:s,order:"asc"},c.Xw))},children:n}))},V=function(e){var t=e.tableProps,n=S(),r=n.isAllSelected,s=n.onSelectAll;return(0,x.jsx)("th",(0,o.Z)((0,o.Z)({},t.column.getHeaderProps()),{},{className:"w-10px pe-2",children:(0,x.jsx)("div",{className:"form-check form-check-sm form-check-custom form-check-solid me-3",children:(0,x.jsx)("input",{className:"form-check-input",type:"checkbox","data-kt-check":r,"data-kt-check-target":"#kt_table_users .form-check-input",checked:r,onChange:s})})}))},J=function(e){var t,n=e.quiz_id;return(0,x.jsx)("div",{className:"d-flex align-items-center",children:(0,x.jsx)("div",{className:"d-flex flex-column",children:null===(t=[{name:"Prime Time",value:1},{name:"India GK",value:2},{name:"Milkha Singh Weekly Quiz",value:3},{name:"Bollywood Quiz",value:4},{name:"Mega Quiz",value:5}].find((function(e){return e.value==n})))||void 0===t?void 0:t.name})})},G=function(e){var t=e.question_type;return(0,x.jsx)("div",{className:"fw-bolder",children:t})},K=[{Header:function(e){return(0,x.jsx)(V,{tableProps:e})},id:"selection",Cell:function(e){var t=Object.assign({},e);return(0,x.jsx)(X,{id:t.data[t.row.index].id})}},{Header:function(e){return(0,x.jsx)(W,{tableProps:e,title:"Program Name",className:"min-w-125px"})},id:"name",Cell:function(e){var t=Object.assign({},e);return(0,x.jsx)(D,{user:t.data[t.row.index]})}},{Header:function(e){return(0,x.jsx)(W,{tableProps:e,title:"Quiz",className:"min-w-125px"})},id:"quiz_id",Cell:function(e){var t=Object.assign({},e);return(0,x.jsx)(J,{quiz_id:t.data[t.row.index].quiz_id})}},{Header:function(e){return(0,x.jsx)(W,{tableProps:e,title:"Sponsors",className:"min-w-125px"})},id:"sponsors",Cell:function(e){var t=Object.assign({},e);return(0,x.jsx)(G,{question_type:t.data[t.row.index].sponsors})}},{Header:function(e){return(0,x.jsx)(W,{tableProps:e,title:"Co-sponsors",className:"min-w-125px"})},id:"co-sponsors",Cell:function(e){var t=Object.assign({},e);return(0,x.jsx)(O,{level:t.data[t.row.index].co_sponsors})}},{Header:function(e){return(0,x.jsx)(W,{tableProps:e,title:"Sponsors Fee",className:"min-w-125px"})},id:"sponsor_fee",Cell:function(e){var t=Object.assign({},e);return(0,x.jsx)(O,{level:t.data[t.row.index].sponsor_fee})}},{Header:function(e){return(0,x.jsx)(W,{tableProps:e,title:"co sponsor fee",className:"min-w-125px"})},id:"co_sponsor_fee",Cell:function(e){var t=Object.assign({},e);return(0,x.jsx)(O,{level:t.data[t.row.index].co_sponsor_fee})}},{Header:function(e){return(0,x.jsx)(W,{tableProps:e,title:"Active",className:"min-w-125px"})},id:"active",Cell:function(e){var t=Object.assign({},e);return(0,x.jsx)(Q,{status:t.data[t.row.index].status,id:t.data[t.row.index].id})}},{Header:function(e){return(0,x.jsx)(W,{tableProps:e,title:"Actions",className:"text-end min-w-100px"})},id:"actions",Cell:function(e){var t=Object.assign({},e);return(0,x.jsx)(z,{id:t.data[t.row.index].id})}}],Y=function(){return(0,x.jsx)("div",{style:(0,o.Z)((0,o.Z)({},{borderRadius:"0.475rem",boxShadow:"0 0 50px 0 rgb(82 63 105 / 15%)",backgroundColor:"#fff",color:"#7e8299",fontWeight:"500",margin:"0",width:"auto",padding:"1rem 2rem",top:"calc(50% - 2rem)",left:"calc(50% - 4rem)"}),{},{position:"absolute",textAlign:"center"}),children:"Processing..."})},$=function(){var e,t=function(){var e=(0,o.Z)({links:[]},c.Xw),t=g().response;return t&&t.payload&&t.payload.pagination?t.payload.pagination:e}(),n=k(),r=v().updateState;return(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-sm-12 col-md-5 d-flex align-items-center justify-content-center justify-content-md-start"}),(0,x.jsx)("div",{className:"col-sm-12 col-md-7 d-flex align-items-center justify-content-center justify-content-md-end",children:(0,x.jsx)("div",{id:"kt_table_users_paginate",children:(0,x.jsx)("ul",{className:"pagination",children:null===(e=t.links)||void 0===e?void 0:e.map((function(e){return(0,x.jsx)("li",{className:(0,H.Z)("page-item",{active:t.page===e.page,disabled:n,previous:"&laquo; Previous"===e.label,next:"Next &raquo;"===e.label}),children:(0,x.jsx)("a",{className:"page-link",onClick:function(){var s;(s=e.page)&&!n&&t.page!==s&&r({page:s,items_per_page:t.items_per_page||10})},dangerouslySetInnerHTML:{__html:e.label},style:{cursor:"pointer"}})},e.label)}))})})})]})},ee=function(){var e=N(),t=k(),n=(0,i.useMemo)((function(){return e}),[e]),r=(0,i.useMemo)((function(){return K}),[]),s=(0,L.useTable)({columns:r,data:n}),a=s.getTableProps,l=s.getTableBodyProps,d=s.headers,u=s.rows,m=s.prepareRow;return(0,x.jsxs)(c.mN,{className:"py-4",children:[(0,x.jsx)("div",{className:"table-responsive",children:(0,x.jsxs)("table",(0,o.Z)((0,o.Z)({id:"kt_table_users",className:"table align-middle table-row-dashed fs-6 gy-5 dataTable no-footer"},a()),{},{children:[(0,x.jsx)("thead",{children:(0,x.jsx)("tr",{className:"text-start text-muted fw-bolder fs-7 text-uppercase gs-0",children:d.map((function(e){return(0,x.jsx)(A,{column:e},e.id)}))})}),(0,x.jsx)("tbody",(0,o.Z)((0,o.Z)({className:"text-gray-600 fw-bold"},l()),{},{children:u.length>0?u.map((function(e,t){return m(e),(0,x.jsx)(M,{row:e},"row-".concat(t,"-").concat(e.id))})):(0,x.jsx)("tr",{children:(0,x.jsx)("td",{colSpan:7,children:(0,x.jsx)("div",{className:"d-flex text-center w-100 align-content-center justify-content-center",children:"No matching records found"})})})}))]}))}),(0,x.jsx)($,{}),t&&(0,x.jsx)(Y,{})]})},te=function(){var e=S().setItemIdForUpdate;return(0,x.jsxs)("div",{className:"modal-header",children:[(0,x.jsx)("h2",{className:"fw-bolder",children:"Add Sponsorship Program"}),(0,x.jsx)("div",{className:"btn btn-icon btn-sm btn-active-icon-primary","data-kt-users-modal-action":"close",onClick:function(){return e(void 0)},style:{cursor:"pointer"},children:(0,x.jsx)(c.D8,{path:"/media/icons/duotune/arrows/arr061.svg",className:"svg-icon-1"})})]})},ne=n(5173),re=n(6863),se=[re.Ry().shape({name:re.Z_().required("Name is required"),sponsors:re.Rx().required("Sponsors is required"),co_sponsors:re.Rx().required("Co-sponsors is required"),sponsor_fee:re.Rx().required("Sponsors fee is required"),co_sponsor_fee:re.Rx().required("Co Sponsors fee is required")})],ae={id:void 0,quiz_id:void 0,name:"",image:"",sponsors:void 0,co_sponsors:void 0,sponsor_fee:void 0,co_sponsor_fee:void 0,description:""},ie=n(6770),ce=n.n(ie),oe=n(8922),le=function(e){var t=e.role,n=e.isUserLoading,r=S().setItemIdForUpdate,s=g().refetch,l=(0,i.useState)(se[0]),d=(0,a.Z)(l,2),p=d[0],f=(d[1],(0,i.useState)((0,o.Z)((0,o.Z)({},t),{},{id:t.id||ae.id,name:t.name||ae.name,quiz_id:t.quiz_id||ae.quiz_id,image:t.image||ae.image,sponsors:t.sponsors||ae.sponsors,co_sponsors:t.co_sponsors||ae.co_sponsors,sponsor_fee:t.sponsor_fee||ae.sponsor_fee,co_sponsor_fee:t.co_sponsor_fee||ae.co_sponsor_fee,description:t.description||ae.description}))),h=(0,a.Z)(f,2),v=h[0],j=h[1],b=(0,i.useRef)(null);(0,i.useEffect)((function(){console.log(v,"roleforedit")}),[v]);var N=function(){var e=(0,I.Z)((0,q.Z)().mark((function e(t,n){return(0,q.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.image=v.image,t.description=v.description,e.next=5,a=t,u().post(m,a).then((function(e){return e.data})).then((function(e){return e.data}));case 5:n.resetForm(),!0&&s(),r(void 0),B().fire({title:"Success!",text:"Sponsorship Program Updated!",icon:"success",confirmButtonText:"Okay"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:return e.prev=13,e.finish(13);case 15:case"end":return e.stop()}var a}),e,null,[[0,10,13,15]])})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=(0,I.Z)((0,q.Z)().mark((function e(t){var n,r;return(0,q.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.currentTarget.files[0],(r=new FormData).append("image",n),e.next=5,u().post("".concat(oe.T,"/upload"),r).then((function(e){j((0,o.Z)((0,o.Z)({},v),{},{image:e.data}))})).catch((function(e){console.log(e,"err")}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(e){var t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","image/*"),t.click(),t.onchange=(0,I.Z)((0,q.Z)().mark((function e(){var n,r;return(0,q.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===t||void 0===t?void 0:t.files[0],(r=new FormData).append("image",n),e.next=5,u().post("".concat(oe.T,"/upload"),r).then((function(e){var t=b.current.getEditor().getSelection();b.current.getEditor().insertEmbed(null===t||void 0===t?void 0:t.index,"image",e.data)})).catch((function(e){console.log(e,"err")}));case 5:case"end":return e.stop()}}),e)})))},y=(0,i.useMemo)((function(){return{toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]],handlers:{image:w}}}}),[]),_=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image"],Z=[{name:"Prime Time",value:1},{name:"India GK",value:2},{name:"Milkha Singh Weekly Quiz",value:3},{name:"Bollywood Quiz",value:4},{name:"Mega Quiz",value:5}];return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"stepper stepper-links d-flex flex-column",id:"kt_create_account_stepper",children:(0,x.jsx)(ne.J9,{validationSchema:p,initialValues:v,onSubmit:N,validateOnChange:!1,children:function(e){e.setFieldValue,e.values,e.touched,e.setFieldError,e.errors;return(0,x.jsxs)(ne.l0,{className:"mx-auto mw-700px w-100 pt-5 pb-10",id:"kt_create_account_form",children:[(0,x.jsxs)("div",{className:"fv-row mb-7",children:[(0,x.jsx)("label",{className:"d-block form-label",children:"Sponsorship Program Package Image"}),(0,x.jsxs)("div",{className:"image-input image-input-outline","data-kt-image-input":"true",children:[(0,x.jsx)("div",{className:"",children:(0,x.jsx)("img",{src:null==(null===v||void 0===v?void 0:v.image)||""==(null===v||void 0===v?void 0:v.image)?(0,c.BY)("/media/svg/avatars/blank.svg"):null===v||void 0===v?void 0:v.image,alt:"avatar",className:"image-input-wrapper w-125px h-125px"})}),(0,x.jsxs)("label",{className:"btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow","data-kt-image-input-action":"change","data-bs-toggle":"tooltip",title:"Change avatar",children:[(0,x.jsx)("i",{className:"bi bi-pencil-fill fs-7"}),(0,x.jsx)("input",{type:"file",name:"profile_image",accept:".png, .jpg, .jpeg",onChange:k}),(0,x.jsx)("input",{type:"hidden",name:"avatar_remove"})]}),null!==v.image&&(0,x.jsx)("button",{className:"btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow","data-kt-image-input-action":"remove","data-bs-toggle":"tooltip",title:"Remove avatar",type:"button",onClick:function(){return j((0,o.Z)((0,o.Z)({},v),{},{image:""}))},children:(0,x.jsx)("i",{className:"bi bi-x fs-2"})})]}),(0,x.jsx)("div",{className:"form-text",children:"Allowed file types: png, jpg, jpeg."})]}),(0,x.jsxs)("div",{className:"d-flex flex-wrap gap-5 mb-10",children:[(0,x.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,x.jsx)("label",{className:"form-label required",children:"Sponsorship Program Name"}),(0,x.jsx)(ne.gN,{name:"name",className:"form-control mb-2",placeholder:"Enter Program Name"}),(0,x.jsx)("div",{className:"text-danger mt-2",children:(0,x.jsx)(ne.Bc,{name:"name"})})]}),(0,x.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,x.jsx)("label",{className:"d-flex align-items-center form-label",children:(0,x.jsx)("span",{className:"required",children:"Select Quiz"})}),(0,x.jsxs)(ne.gN,{as:"select",name:"quiz_id",className:"form-select mb-2",placeholder:"Select Quiz",children:[(0,x.jsx)("option",{}),Z.map((function(e,t){return(0,x.jsx)("option",{value:e.value,children:e.name},t)}))]}),(0,x.jsx)("div",{className:"text-danger mt-2",children:(0,x.jsx)(ne.Bc,{name:"quiz_id"})})]})]}),(0,x.jsxs)("div",{className:"d-flex flex-wrap gap-5 mb-10",children:[(0,x.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,x.jsx)("label",{className:"form-label required",children:"Number of sponsors"}),(0,x.jsx)(ne.gN,{name:"sponsors",type:"number",className:"form-control mb-2",placeholder:"Enter no. of sponsors"}),(0,x.jsx)("div",{className:"text-danger mt-2",children:(0,x.jsx)(ne.Bc,{name:"sponsors"})})]}),(0,x.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,x.jsx)("label",{className:"d-flex align-items-center form-label",children:(0,x.jsx)("span",{className:"required",children:"Number of co-sponsors"})}),(0,x.jsx)(ne.gN,{name:"co_sponsors",type:"number",className:"form-control mb-2",placeholder:"Enter no. of co-sponsors"}),(0,x.jsx)("div",{className:"text-danger mt-2",children:(0,x.jsx)(ne.Bc,{name:"co_sponsors"})})]})]}),(0,x.jsxs)("div",{className:"d-flex flex-wrap gap-5 mb-10",children:[(0,x.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,x.jsx)("label",{className:"form-label required",children:"Sponsors Fee"}),(0,x.jsx)(ne.gN,{name:"sponsor_fee",type:"number",className:"form-control mb-2",placeholder:"Enter sponsor fee"}),(0,x.jsx)("div",{className:"text-danger mt-2",children:(0,x.jsx)(ne.Bc,{name:"sponsor_fee"})})]}),(0,x.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,x.jsx)("label",{className:"d-flex align-items-center form-label",children:(0,x.jsx)("span",{className:"required",children:"Cosponsors Fee"})}),(0,x.jsx)(ne.gN,{name:"co_sponsor_fee",type:"number",className:"form-control mb-2",placeholder:"Enter co-sponsor fee"}),(0,x.jsx)("div",{className:"text-danger mt-2",children:(0,x.jsx)(ne.Bc,{name:"co_sponsor_fee"})})]})]}),(0,x.jsxs)("div",{className:"fv-row w-100 mb-10",children:[(0,x.jsx)("label",{className:"form-label",children:"Description"}),(0,x.jsx)(ce(),{onChange:function(e,t,n,r){j((0,o.Z)((0,o.Z)({},v),{},{description:e}))},id:"description",value:v.description,formats:_,modules:y,ref:b})]}),(0,x.jsxs)("div",{className:"d-flex flex-stack pt-15",children:[(0,x.jsx)("div",{className:"mr-2"}),(0,x.jsx)("div",{children:(0,x.jsx)("button",{type:"submit",className:"btn btn-lg btn-primary me-3",children:(0,x.jsx)("span",{className:"indicator-label",children:"Submit"})})})]})]})}})}),n&&(0,x.jsx)(Y,{})]})},de=function(){var e=S(),t=e.itemIdForUpdate,n=e.setItemIdForUpdate,r=(0,c.UE)(t),s=(0,l.useQuery)("".concat(c.vb.USERS_LIST,"-user-").concat(t),(function(){return e=t,u().get("".concat(m,"/").concat(e)).then((function(e){return e.data})).then((function(e){return e.data}));var e}),{cacheTime:0,enabled:r,onError:function(e){n(void 0),console.error(e)}}),a=s.isLoading,i=s.data,o=s.error;return t?a||o||!i?null:(0,x.jsx)(le,{isUserLoading:a,role:i}):(0,x.jsx)(le,{isUserLoading:a,role:{id:void 0}})},ue=function(){return(0,i.useEffect)((function(){return document.body.classList.add("modal-open"),function(){document.body.classList.remove("modal-open")}}),[]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"modal fade show d-block",id:"kt_modal_add_user",role:"dialog",tabIndex:-1,"aria-modal":"true",children:(0,x.jsx)("div",{className:"modal-dialog modal-dialog-centered mw-900px",children:(0,x.jsxs)("div",{className:"modal-content",children:[(0,x.jsx)(te,{}),(0,x.jsx)("div",{className:"modal-body scroll-y mx-5 mx-xl-15",children:(0,x.jsx)(de,{})})]})})}),(0,x.jsx)("div",{className:"modal-backdrop fade show"})]})},me=function(){var e=S().itemIdForUpdate;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(c.O7,{children:[(0,x.jsx)(U,{}),(0,x.jsx)(ee,{})]}),void 0!==e&&(0,x.jsx)(ue,{})]})},pe=function(){return(0,x.jsx)(h,{children:(0,x.jsx)(b,{children:(0,x.jsx)(y,{children:(0,x.jsx)(me,{})})})})},xe="".concat("https://quiz.datacubeindia.com/common","/subscription"),fe=function(e,t){return u().put("".concat(xe,"/").concat(t),e).then((function(e){return e.data})).then((function(e){return e.data}))},he=(0,i.createContext)(c.vv),ve=function(e){var t=e.children,n=(0,i.useState)(c.vv.state),r=(0,a.Z)(n,2),s=r[0],l=r[1];return(0,x.jsx)(he.Provider,{value:{state:s,updateState:function(e){var t=(0,o.Z)((0,o.Z)({},s),e);l(t)}},children:t})},je=function(){return(0,i.useContext)(he)},be=(0,c.gl)(c.B2),ge=function(e){var t=e.children,n=je().state,r=(0,i.useState)((0,c.gJ)(n)),s=(0,a.Z)(r,2),o=s[0],d=s[1],m=(0,i.useMemo)((function(){return(0,c.gJ)(n)}),[n]);(0,i.useEffect)((function(){o!==m&&d(m)}),[m]);var p=(0,l.useQuery)("".concat(c.vb.USERS_LIST,"-").concat(o),(function(){return function(e){return u().get("".concat(xe,"?").concat(e)).then((function(e){return e.data}))}(o)}),{cacheTime:0,keepPreviousData:!0,refetchOnWindowFocus:!1}),f=p.isFetching,h=p.refetch,v=p.data;return(0,x.jsx)(be.Provider,{value:{isLoading:f,refetch:h,response:v,query:o},children:t})},Ne=function(){return(0,i.useContext)(be)},ke=function(){var e=Ne().response;return e&&(null===e||void 0===e?void 0:e.data)||[]},we=function(){return Ne().isLoading},ye=(0,i.createContext)(c.px),Se=function(e){var t=e.children,n=(0,i.useState)(c.px.selected),r=(0,a.Z)(n,2),s=r[0],o=r[1],l=(0,i.useState)(c.px.itemIdForUpdate),d=(0,a.Z)(l,2),u=d[0],m=d[1],p=Ne().isLoading,f=ke(),h=(0,i.useMemo)((function(){return(0,c.Qx)(p,f)}),[p,f]),v=(0,i.useMemo)((function(){return(0,c.HX)(f,s)}),[f,s]);return(0,x.jsx)(ye.Provider,{value:{selected:s,itemIdForUpdate:u,setItemIdForUpdate:m,disabled:h,isAllSelected:v,onSelect:function(e){(0,c.G8)(e,s,o)},onSelectAll:function(){(0,c.ir)(v,o,f)},clearSelected:function(){o([])}},children:t})},_e=function(){return(0,i.useContext)(ye)},Ze=function(e){var t=e.csvData,n=e.fileName;return(0,x.jsxs)("button",{type:"button",className:"btn btn-light-primary me-3",children:[(0,x.jsx)(c.D8,{path:"/media/icons/duotune/arrows/arr078.svg",className:"svg-icon-2"}),(0,x.jsx)(_.CSVLink,{data:t,filename:n,children:"Export"})]})},Ce=function(){var e=je().updateState,t=Ne().isLoading,n=(0,i.useState)(),r=(0,a.Z)(n,2),s=r[0],l=r[1],d=(0,i.useState)(),u=(0,a.Z)(d,2),m=u[0],p=u[1];(0,i.useEffect)((function(){C.Mn.reinitialization()}),[]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("button",{disabled:t,type:"button",className:"btn btn-light-primary me-3","data-kt-menu-trigger":"click","data-kt-menu-placement":"bottom-end",children:[(0,x.jsx)(c.D8,{path:"/media/icons/duotune/general/gen031.svg",className:"svg-icon-2"}),"Filter"]}),(0,x.jsxs)("div",{className:"menu menu-sub menu-sub-dropdown w-300px w-md-325px","data-kt-menu":"true",children:[(0,x.jsx)("div",{className:"px-7 py-5",children:(0,x.jsx)("div",{className:"fs-5 text-dark fw-bolder",children:"Filter Options"})}),(0,x.jsx)("div",{className:"separator border-gray-200"}),(0,x.jsxs)("div",{className:"px-7 py-5","data-kt-user-table-filter":"form",children:[(0,x.jsxs)("div",{className:"mb-10",children:[(0,x.jsx)("label",{className:"form-label fs-6 fw-bold",children:"Question Type:"}),(0,x.jsxs)("select",{className:"form-select form-select-solid fw-bolder","data-kt-select2":"true","data-placeholder":"Select option","data-allow-clear":"true","data-kt-user-table-filter":"role","data-hide-search":"true",onChange:function(e){return l(e.target.value)},value:s,children:[(0,x.jsx)("option",{value:""}),(0,x.jsx)("option",{value:"Objective",children:"Objective"}),(0,x.jsx)("option",{value:"True/False",children:"True/False"}),(0,x.jsx)("option",{value:"Fill In The Blanks",children:"Fill In The Blanks"}),(0,x.jsx)("option",{value:"Subjective",children:"Subjective"})]})]}),(0,x.jsxs)("div",{className:"mb-10",children:[(0,x.jsx)("label",{className:"form-label fs-6 fw-bold",children:"Difficulty Level:"}),(0,x.jsxs)("select",{className:"form-select form-select-solid fw-bolder","data-kt-select2":"true","data-placeholder":"Select option","data-allow-clear":"true","data-kt-user-table-filter":"two-step","data-hide-search":"true",onChange:function(e){return p(e.target.value)},value:m,children:[(0,x.jsx)("option",{value:""}),(0,x.jsx)("option",{value:"Easy",children:"Easy"}),(0,x.jsx)("option",{value:"Moderate",children:"Moderate"}),(0,x.jsx)("option",{value:"Difficult",children:"Difficult"})]})]}),(0,x.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,x.jsx)("button",{type:"button",disabled:t,onClick:function(){e((0,o.Z)({filter:void 0},c.Xw)),l(""),p("")},className:"btn btn-light btn-active-light-primary fw-bold me-2 px-6","data-kt-menu-dismiss":"true","data-kt-user-table-filter":"reset",children:"Reset"}),(0,x.jsx)("button",{disabled:t,type:"button",onClick:function(){e((0,o.Z)({filter:{question_type:s,level:m}},c.Xw))},className:"btn btn-primary fw-bold px-6","data-kt-menu-dismiss":"true","data-kt-user-table-filter":"filter",children:"Apply"})]})]})]})]})},Fe=function(){var e=ke(),t=_e().setItemIdForUpdate;return(0,x.jsxs)("div",{className:"d-flex justify-content-end","data-kt-user-table-toolbar":"base",children:[(0,x.jsx)(Ce,{}),(0,x.jsx)(Ze,{csvData:e,fileName:"subscription"}),(0,x.jsxs)("button",{onClick:function(){t(null)},className:"btn btn-primary",children:[(0,x.jsx)(c.D8,{path:"/media/icons/duotune/arrows/arr075.svg",className:"svg-icon-2"}),"Add Subscription"]})]})},Pe=function(){var e=_e(),t=e.selected,n=e.clearSelected,r=(0,l.useQueryClient)(),s=Ne().query,a=(0,l.useMutation)((function(){return function(e){var t=e.map((function(e){return u().delete("".concat(xe,"/").concat(e))}));return u().all(t).then((function(){}))}(t)}),{onSuccess:function(){r.invalidateQueries(["".concat(c.vb.USERS_LIST,"-").concat(s)]),n()}});return(0,x.jsxs)("div",{className:"d-flex justify-content-end align-items-center",children:[(0,x.jsxs)("div",{className:"fw-bolder me-5",children:[(0,x.jsx)("span",{className:"me-2",children:t.length})," Selected"]}),(0,x.jsx)("button",{type:"button",className:"btn btn-danger",onClick:(0,I.Z)((0,q.Z)().mark((function e(){return(0,q.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.mutateAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Delete Selected"})]})},qe=function(){var e=je().updateState,t=(0,i.useState)(""),n=(0,a.Z)(t,2),r=n[0],s=n[1],l=(0,c.Nr)(r,150);return(0,i.useEffect)((function(){void 0!==l&&void 0!==r&&e((0,o.Z)({search:l},c.Xw))}),[l]),(0,x.jsx)("div",{className:"card-title",children:(0,x.jsxs)("div",{className:"d-flex align-items-center position-relative my-1",children:[(0,x.jsx)(c.D8,{path:"/media/icons/duotune/general/gen021.svg",className:"svg-icon-1 position-absolute ms-6"}),(0,x.jsx)("input",{type:"text","data-kt-user-table-filter":"search",className:"form-control form-control-solid w-250px ps-14",placeholder:"Search Subscription",value:r,onChange:function(e){return s(e.target.value)}})]})})},Ie=function(){var e=_e().selected;return(0,x.jsxs)("div",{className:"card-header border-0 pt-6",children:[(0,x.jsx)(qe,{}),(0,x.jsx)("div",{className:"card-toolbar",children:e.length>0?(0,x.jsx)(Pe,{}):(0,x.jsx)(Fe,{})})]})},Ee=function(e){var t=e.column;return(0,x.jsx)(x.Fragment,{children:t.Header&&"string"===typeof t.Header?(0,x.jsx)("th",(0,o.Z)((0,o.Z)({},t.getHeaderProps()),{},{children:t.render("Header")})):t.render("Header")})},Te=function(e){var t=e.row;return(0,x.jsx)("tr",(0,o.Z)((0,o.Z)({},t.getRowProps()),{},{children:t.cells.map((function(e){return(0,x.jsx)("td",(0,o.Z)((0,o.Z)({},e.getCellProps()),{},{className:(0,H.Z)({"text-end min-w-100px":"actions"===e.column.id}),children:e.render("Cell")}))}))}))},Ue=(0,i.createContext)({sponsors:[],programs:[]}),Le=function(e){var t=e.children,n=(0,i.useState)(),r=(0,a.Z)(n,2),s=r[0],c=r[1],o=(0,i.useState)(),l=(0,a.Z)(o,2),d=l[0],m=l[1];(0,i.useEffect)((function(){p()}),[]);var p=function(){var e=(0,I.Z)((0,q.Z)().mark((function e(){return(0,q.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().get("".concat("https://quiz.datacubeindia.com/common/sponsors")).then((function(e){return e.data})).then((function(e){c(e)})).catch((function(e){console.log(e)}));case 2:return e.next=4,u().get("".concat("https://quiz.datacubeindia.com/common/programs")).then((function(e){return e.data})).then((function(e){m(e)})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,x.jsx)(Ue.Provider,{value:{sponsors:s,programs:d},children:t})},Ae=function(){return(0,i.useContext)(Ue)},He=function(e){var t,n=e.user,r=_e().setItemIdForUpdate,s=Ae().programs;return(0,x.jsx)("div",{className:"d-flex align-items-center",children:(0,x.jsx)("div",{className:"d-flex flex-column",children:(0,x.jsx)("a",{onClick:function(){r(n.id)},style:{cursor:"pointer"},className:"text-gray-800 text-hover-primary mb-1",children:null===s||void 0===s||null===(t=s.find((function(e){return e.id==n.sponsor_program_id})))||void 0===t?void 0:t.name})})})},Me=function(e){var t=e.level;return(0,x.jsx)("div",{className:"fw-bolder",children:t})},De=function(e){var t=e.id,n=e.status,r=(0,i.useState)(n),s=(0,a.Z)(r,2),c=s[0],o=s[1];return(0,x.jsxs)(x.Fragment,{children:[" ",(0,x.jsx)("label",{className:"form-check form-check-custom form-check-solid form-switch mb-5",children:(0,x.jsx)("input",{className:"form-check-input me-3","data-switch":"true","data-on-color":"#D8322D",type:"checkbox",name:"status","data-off-color":"warning",checked:c,onChange:function(){var e=(0,I.Z)((0,q.Z)().mark((function e(n){return(0,q.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(n.currentTarget.checked),e.next=3,fe({status:n.currentTarget.checked?1:0},t);case 3:B().fire({title:"Success!",text:"Status updated successfully!",icon:"success",confirmButtonText:"Okay"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})})]})},Oe=function(e){var t=e.id,n=_e().setItemIdForUpdate,r=Ne().query,s=(0,l.useQueryClient)();(0,i.useEffect)((function(){C.Mn.reinitialization()}),[]);var a=(0,l.useMutation)((function(){return e=t,u().delete("".concat(xe,"/").concat(e)).then((function(){}));var e}),{onSuccess:function(){s.invalidateQueries(["".concat(c.vb.USERS_LIST,"-").concat(r)])}});return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("a",{href:"#",className:"btn btn-light btn-active-light-primary btn-sm","data-kt-menu-trigger":"click","data-kt-menu-placement":"bottom-end",children:(0,x.jsx)("i",{className:"bi bi-three-dots-vertical fs-5"})}),(0,x.jsxs)("div",{className:"menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bold fs-7 w-125px py-4","data-kt-menu":"true",children:[(0,x.jsx)("div",{className:"menu-item px-3",children:(0,x.jsx)("a",{className:"menu-link px-3",onClick:function(){n(t)},children:"Edit"})}),(0,x.jsx)("div",{className:"menu-item px-3",children:(0,x.jsx)("a",{className:"menu-link px-3","data-kt-users-table-filter":"delete_row",onClick:(0,I.Z)((0,q.Z)().mark((function e(){return(0,q.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.mutateAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Delete"})})]})]})},Re=function(e){var t=e.id,n=_e(),r=n.selected,s=n.onSelect,a=(0,i.useMemo)((function(){return r.includes(t)}),[t,r]);return(0,x.jsx)("div",{className:"form-check form-check-sm form-check-custom form-check-solid",children:(0,x.jsx)("input",{className:"form-check-input",type:"checkbox","data-kt-check":a,"data-kt-check-target":"#kt_table_users .form-check-input",checked:a,onChange:function(){return s(t)}})})},Be=function(e){var t=e.className,n=e.title,r=e.tableProps,s=r.column.id,a=je(),l=a.state,d=a.updateState,u=(0,i.useMemo)((function(){return l.sort&&l.sort===s}),[l,s]),m=(0,i.useMemo)((function(){return l.order}),[l]);return(0,x.jsx)("th",(0,o.Z)((0,o.Z)({},r.column.getHeaderProps()),{},{className:(0,H.Z)(t,u&&void 0!==m&&"table-sort-".concat(m)),style:{cursor:"pointer"},onClick:function(){if("actions"!==s&&"selection"!==s)if(u){if(u&&void 0!==m){if("asc"===m)return void d((0,o.Z)({sort:s,order:"desc"},c.Xw));d((0,o.Z)({sort:void 0,order:void 0},c.Xw))}}else d((0,o.Z)({sort:s,order:"asc"},c.Xw))},children:n}))},Qe=function(e){var t=e.tableProps,n=_e(),r=n.isAllSelected,s=n.onSelectAll;return(0,x.jsx)("th",(0,o.Z)((0,o.Z)({},t.column.getHeaderProps()),{},{className:"w-10px pe-2",children:(0,x.jsx)("div",{className:"form-check form-check-sm form-check-custom form-check-solid me-3",children:(0,x.jsx)("input",{className:"form-check-input",type:"checkbox","data-kt-check":r,"data-kt-check-target":"#kt_table_users .form-check-input",checked:r,onChange:s})})}))},ze=function(e){var t,n=e.subject_id,r=Ae().sponsors;return(0,x.jsx)("div",{className:"d-flex align-items-center",children:(0,x.jsx)("div",{className:"d-flex flex-column",children:null===r||void 0===r||null===(t=r.find((function(e){return e.id==n})))||void 0===t?void 0:t.name})})},Xe=function(e){var t=e.question_type;return(0,x.jsx)("div",{className:"fw-bolder",children:t})},We=function(e){var t=e.marks;return(0,x.jsx)("div",{className:"fw-bolder",children:t})},Ve=[{Header:function(e){return(0,x.jsx)(Qe,{tableProps:e})},id:"selection",Cell:function(e){var t=Object.assign({},e);return(0,x.jsx)(Re,{id:t.data[t.row.index].id})}},{Header:function(e){return(0,x.jsx)(Be,{tableProps:e,title:"Program Name",className:"min-w-125px"})},id:"name",Cell:function(e){var t=Object.assign({},e);return(0,x.jsx)(He,{user:t.data[t.row.index]})}},{Header:function(e){return(0,x.jsx)(Be,{tableProps:e,title:"Sponsor",className:"min-w-125px"})},id:"sponsor",Cell:function(e){var t=Object.assign({},e);return(0,x.jsx)(ze,{subject_id:t.data[t.row.index].sponsor_id})}},{Header:function(e){return(0,x.jsx)(Be,{tableProps:e,title:"Type",className:"min-w-125px"})},id:"type",Cell:function(e){var t=Object.assign({},e);return(0,x.jsx)(Xe,{question_type:t.data[t.row.index].type})}},{Header:function(e){return(0,x.jsx)(Be,{tableProps:e,title:"amount",className:"min-w-125px"})},id:"amount",Cell:function(e){var t=Object.assign({},e);return(0,x.jsx)(Me,{level:t.data[t.row.index].amount})}},{Header:function(e){return(0,x.jsx)(Be,{tableProps:e,title:"discount",className:"min-w-125px"})},id:"discount",Cell:function(e){var t=Object.assign({},e);return(0,x.jsx)(We,{marks:t.data[t.row.index].discount})}},{Header:function(e){return(0,x.jsx)(Be,{tableProps:e,title:"net amount",className:"min-w-125px"})},id:"net_amount",Cell:function(e){var t=Object.assign({},e);return(0,x.jsx)(We,{marks:t.data[t.row.index].net_amount})}},{Header:function(e){return(0,x.jsx)(Be,{tableProps:e,title:"Action",className:"min-w-125px"})},id:"active",Cell:function(e){var t=Object.assign({},e);return(0,x.jsx)(De,{status:t.data[t.row.index].status,id:t.data[t.row.index].id})}},{Header:function(e){return(0,x.jsx)(Be,{tableProps:e,title:"Actions",className:"text-end min-w-100px"})},id:"actions",Cell:function(e){var t=Object.assign({},e);return(0,x.jsx)(Oe,{id:t.data[t.row.index].id})}}],Je=function(){return(0,x.jsx)("div",{style:(0,o.Z)((0,o.Z)({},{borderRadius:"0.475rem",boxShadow:"0 0 50px 0 rgb(82 63 105 / 15%)",backgroundColor:"#fff",color:"#7e8299",fontWeight:"500",margin:"0",width:"auto",padding:"1rem 2rem",top:"calc(50% - 2rem)",left:"calc(50% - 4rem)"}),{},{position:"absolute",textAlign:"center"}),children:"Processing..."})},Ge=function(){var e,t=function(){var e=(0,o.Z)({links:[]},c.Xw),t=Ne().response;return t&&t.payload&&t.payload.pagination?t.payload.pagination:e}(),n=we(),r=je().updateState;return(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-sm-12 col-md-5 d-flex align-items-center justify-content-center justify-content-md-start"}),(0,x.jsx)("div",{className:"col-sm-12 col-md-7 d-flex align-items-center justify-content-center justify-content-md-end",children:(0,x.jsx)("div",{id:"kt_table_users_paginate",children:(0,x.jsx)("ul",{className:"pagination",children:null===(e=t.links)||void 0===e?void 0:e.map((function(e){return(0,x.jsx)("li",{className:(0,H.Z)("page-item",{active:t.page===e.page,disabled:n,previous:"&laquo; Previous"===e.label,next:"Next &raquo;"===e.label}),children:(0,x.jsx)("a",{className:"page-link",onClick:function(){var s;(s=e.page)&&!n&&t.page!==s&&r({page:s,items_per_page:t.items_per_page||10})},dangerouslySetInnerHTML:{__html:e.label},style:{cursor:"pointer"}})},e.label)}))})})})]})},Ke=function(){(0,r.UO)().id;var e=ke(),t=we(),n=(0,i.useMemo)((function(){return e}),[e]),s=(0,i.useMemo)((function(){return Ve}),[]),a=(0,L.useTable)({columns:s,data:n}),l=a.getTableProps,d=a.getTableBodyProps,u=a.headers,m=a.rows,p=a.prepareRow;return(0,x.jsxs)(c.mN,{className:"py-4",children:[(0,x.jsx)("div",{className:"table-responsive",children:(0,x.jsxs)("table",(0,o.Z)((0,o.Z)({id:"kt_table_users",className:"table align-middle table-row-dashed fs-6 gy-5 dataTable no-footer"},l()),{},{children:[(0,x.jsx)("thead",{children:(0,x.jsx)("tr",{className:"text-start text-muted fw-bolder fs-7 text-uppercase gs-0",children:u.map((function(e){return(0,x.jsx)(Ee,{column:e},e.id)}))})}),(0,x.jsx)("tbody",(0,o.Z)((0,o.Z)({className:"text-gray-600 fw-bold"},d()),{},{children:m.length>0?m.map((function(e,t){return p(e),(0,x.jsx)(Te,{row:e},"row-".concat(t,"-").concat(e.id))})):(0,x.jsx)("tr",{children:(0,x.jsx)("td",{colSpan:7,children:(0,x.jsx)("div",{className:"d-flex text-center w-100 align-content-center justify-content-center",children:"No matching records found"})})})}))]}))}),(0,x.jsx)(Ge,{}),t&&(0,x.jsx)(Je,{})]})},Ye=function(){var e=_e().setItemIdForUpdate;return(0,x.jsxs)("div",{className:"modal-header",children:[(0,x.jsx)("h2",{className:"fw-bolder",children:"Add Sponsorship Subscription"}),(0,x.jsx)("div",{className:"btn btn-icon btn-sm btn-active-icon-primary","data-kt-users-modal-action":"close",onClick:function(){return e(void 0)},style:{cursor:"pointer"},children:(0,x.jsx)(c.D8,{path:"/media/icons/duotune/arrows/arr061.svg",className:"svg-icon-1"})})]})},$e=[re.Ry().shape({type:re.Z_().required("Type is required"),sponsor_program_id:re.Rx().required("Sponsor program is required"),sponsor_id:re.Rx().required("sponsors is required"),amount:re.Rx().required("amount is required"),discount:re.Rx().required("discount is required"),net_amount:re.Rx().required("Net amount is required")})],et={id:void 0,sponsor_program_id:void 0,sponsor_id:void 0,type:"",amount:void 0,discount:void 0,net_amount:void 0},tt=function(e){var t=e.role,n=e.isUserLoading,r=_e().setItemIdForUpdate,s=Ne().refetch,c=Ae(),l=c.sponsors,d=c.programs,m=(0,i.useState)($e[0]),p=(0,a.Z)(m,2),f=p[0],h=(p[1],(0,i.useState)((0,o.Z)((0,o.Z)({},t),{},{id:t.id||et.id,sponsor_program_id:t.sponsor_program_id||et.sponsor_program_id,sponsor_id:t.sponsor_id||et.sponsor_id,type:t.type||et.type,amount:t.amount||et.amount,discount:t.discount||et.discount,net_amount:t.net_amount||et.net_amount}))),v=(0,a.Z)(h,2),j=v[0],b=(v[1],function(){var e=(0,I.Z)((0,q.Z)().mark((function e(t,n){return(0,q.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a=t,u().post(xe,a).then((function(e){return e.data})).then((function(e){return e.data}));case 3:n.resetForm(),!0&&s(),r(void 0),B().fire({title:"Success!",text:"Sponsorship Subscription Updated!",icon:"success",confirmButtonText:"Okay"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:return e.prev=11,e.finish(11);case 13:case"end":return e.stop()}var a}),e,null,[[0,8,11,13]])})));return function(t,n){return e.apply(this,arguments)}}());return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"stepper stepper-links d-flex flex-column",id:"kt_create_account_stepper",children:(0,x.jsx)(ne.J9,{validationSchema:f,initialValues:j,onSubmit:b,validateOnChange:!1,children:function(e){e.setFieldValue,e.values,e.touched,e.setFieldError,e.errors;return(0,x.jsxs)(ne.l0,{className:"mx-auto mw-700px w-100 pt-5 pb-10",id:"kt_create_account_form",children:[(0,x.jsxs)("div",{className:"d-flex flex-wrap gap-5 mb-10",children:[(0,x.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,x.jsx)("label",{className:"form-label required",children:"Select Sponsorship Program"}),(0,x.jsxs)(ne.gN,{name:"sponsor_program_id",as:"select",className:"form-select mb-2",placeholder:"Enter Program Name",children:[(0,x.jsx)("option",{}),d.map((function(e,t){return(0,x.jsx)("option",{value:e.id,children:null===e||void 0===e?void 0:e.name},t)}))]}),(0,x.jsx)("div",{className:"text-danger mt-2",children:(0,x.jsx)(ne.Bc,{name:"sponsor_program_id"})})]}),(0,x.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,x.jsx)("label",{className:"d-flex align-items-center form-label",children:(0,x.jsx)("span",{className:"required",children:"Select Sponsors"})}),(0,x.jsxs)(ne.gN,{as:"select",name:"sponsor_id",className:"form-select mb-2",placeholder:"Select Quiz",children:[(0,x.jsx)("option",{}),l.map((function(e,t){return(0,x.jsx)("option",{value:e.id,children:null===e||void 0===e?void 0:e.name},t)}))]}),(0,x.jsx)("div",{className:"text-danger mt-2",children:(0,x.jsx)(ne.Bc,{name:"sponsor_id"})})]})]}),(0,x.jsxs)("div",{className:"d-flex flex-wrap gap-5 mb-10",children:[(0,x.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,x.jsx)("label",{className:"form-label required",children:"Select Type"}),(0,x.jsxs)(ne.gN,{name:"type",as:"select",className:"form-select mb-2",placeholder:"Enter no. of sponsors",children:[(0,x.jsx)("option",{}),(0,x.jsx)("option",{children:"Sponsor"}),(0,x.jsx)("option",{children:"Cosponsor"})]}),(0,x.jsx)("div",{className:"text-danger mt-2",children:(0,x.jsx)(ne.Bc,{name:"type"})})]}),(0,x.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,x.jsx)("label",{className:"d-flex align-items-center form-label",children:(0,x.jsx)("span",{className:"required",children:"Amount"})}),(0,x.jsx)(ne.gN,{name:"amount",type:"number",className:"form-control mb-2",placeholder:"Enter Amount"}),(0,x.jsx)("div",{className:"text-danger mt-2",children:(0,x.jsx)(ne.Bc,{name:"amount"})})]})]}),(0,x.jsxs)("div",{className:"d-flex flex-wrap gap-5 mb-10",children:[(0,x.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,x.jsx)("label",{className:"form-label required",children:"Discount"}),(0,x.jsx)(ne.gN,{name:"discount",type:"number",className:"form-control mb-2",placeholder:"Enter Discount"}),(0,x.jsx)("div",{className:"text-danger mt-2",children:(0,x.jsx)(ne.Bc,{name:"discount"})})]}),(0,x.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,x.jsx)("label",{className:"d-flex align-items-center form-label",children:(0,x.jsx)("span",{className:"required",children:"Net Amount"})}),(0,x.jsx)(ne.gN,{name:"net_amount",type:"number",className:"form-control mb-2",placeholder:"Enter Net amount"}),(0,x.jsx)("div",{className:"text-danger mt-2",children:(0,x.jsx)(ne.Bc,{name:"net_amount"})})]})]}),(0,x.jsxs)("div",{className:"d-flex flex-stack pt-15",children:[(0,x.jsx)("div",{className:"mr-2"}),(0,x.jsx)("div",{children:(0,x.jsx)("button",{type:"submit",className:"btn btn-lg btn-primary me-3",children:(0,x.jsx)("span",{className:"indicator-label",children:"Submit"})})})]})]})}})}),n&&(0,x.jsx)(Je,{})]})},nt=function(){var e=_e(),t=e.itemIdForUpdate,n=e.setItemIdForUpdate,r=(0,c.UE)(t),s=(0,l.useQuery)("".concat(c.vb.USERS_LIST,"-user-").concat(t),(function(){return e=t,u().get("".concat(xe,"/").concat(e)).then((function(e){return e.data})).then((function(e){return e.data}));var e}),{cacheTime:0,enabled:r,onError:function(e){n(void 0),console.error(e)}}),a=s.isLoading,i=s.data,o=s.error;return t?a||o||!i?null:(0,x.jsx)(tt,{isUserLoading:a,role:i}):(0,x.jsx)(tt,{isUserLoading:a,role:{id:void 0}})},rt=function(){return(0,i.useEffect)((function(){return document.body.classList.add("modal-open"),function(){document.body.classList.remove("modal-open")}}),[]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"modal fade show d-block",id:"kt_modal_add_user",role:"dialog",tabIndex:-1,"aria-modal":"true",children:(0,x.jsx)("div",{className:"modal-dialog modal-dialog-centered mw-900px",children:(0,x.jsxs)("div",{className:"modal-content",children:[(0,x.jsx)(Ye,{}),(0,x.jsx)("div",{className:"modal-body scroll-y mx-5 mx-xl-15",children:(0,x.jsx)(nt,{})})]})})}),(0,x.jsx)("div",{className:"modal-backdrop fade show"})]})},st=function(){var e=_e().itemIdForUpdate;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(c.O7,{children:[(0,x.jsx)(Ie,{}),(0,x.jsx)(Ke,{})]}),void 0!==e&&(0,x.jsx)(rt,{})]})},at=function(){return(0,x.jsx)(ve,{children:(0,x.jsx)(ge,{children:(0,x.jsx)(Se,{children:(0,x.jsx)(Le,{children:(0,x.jsx)(st,{})})})})})},it="".concat("https://quiz.datacubeindia.com/common","/sponsor"),ct=function(e,t){return u().put("".concat(it,"/").concat(t),e).then((function(e){return e.data})).then((function(e){return e.data}))},ot=(0,i.createContext)(c.vv),lt=function(e){var t=e.children,n=(0,i.useState)(c.vv.state),r=(0,a.Z)(n,2),s=r[0],l=r[1];return(0,x.jsx)(ot.Provider,{value:{state:s,updateState:function(e){var t=(0,o.Z)((0,o.Z)({},s),e);l(t)}},children:t})},dt=function(){return(0,i.useContext)(ot)},ut=(0,c.gl)(c.B2),mt=function(e){var t=e.children,n=dt().state,r=(0,i.useState)((0,c.gJ)(n)),s=(0,a.Z)(r,2),o=s[0],d=s[1],m=(0,i.useMemo)((function(){return(0,c.gJ)(n)}),[n]);(0,i.useEffect)((function(){o!==m&&d(m)}),[m]);var p=(0,l.useQuery)("".concat(c.vb.USERS_LIST,"-").concat(o),(function(){return function(e){return u().get("".concat(it,"?").concat(e)).then((function(e){return e.data}))}(o)}),{cacheTime:0,keepPreviousData:!0,refetchOnWindowFocus:!1}),f=p.isFetching,h=p.refetch,v=p.data;return(0,x.jsx)(ut.Provider,{value:{isLoading:f,refetch:h,response:v,query:o},children:t})},pt=function(){return(0,i.useContext)(ut)},xt=function(){var e=pt().response;return e&&(null===e||void 0===e?void 0:e.data)||[]},ft=function(){return pt().isLoading},ht=(0,i.createContext)(c.px),vt=function(e){var t=e.children,n=(0,i.useState)(c.px.selected),r=(0,a.Z)(n,2),s=r[0],o=r[1],l=(0,i.useState)(c.px.itemIdForUpdate),d=(0,a.Z)(l,2),u=d[0],m=d[1],p=pt().isLoading,f=xt(),h=(0,i.useMemo)((function(){return(0,c.Qx)(p,f)}),[p,f]),v=(0,i.useMemo)((function(){return(0,c.HX)(f,s)}),[f,s]);return(0,x.jsx)(ht.Provider,{value:{selected:s,itemIdForUpdate:u,setItemIdForUpdate:m,disabled:h,isAllSelected:v,onSelect:function(e){(0,c.G8)(e,s,o)},onSelectAll:function(){(0,c.ir)(v,o,f)},clearSelected:function(){o([])}},children:t})},jt=function(){return(0,i.useContext)(ht)},bt=function(e){var t=e.csvData,n=e.fileName;return(0,x.jsxs)("button",{type:"button",className:"btn btn-light-primary me-3",children:[(0,x.jsx)(c.D8,{path:"/media/icons/duotune/arrows/arr078.svg",className:"svg-icon-2"}),(0,x.jsx)(_.CSVLink,{data:t,filename:n,children:"Export"})]})},gt=function(){var e=xt(),t=jt().setItemIdForUpdate;return(0,x.jsxs)("div",{className:"d-flex justify-content-end","data-kt-user-table-toolbar":"base",children:[(0,x.jsx)(bt,{csvData:e,fileName:"sponsors"}),(0,x.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){t(null)},children:[(0,x.jsx)(c.D8,{path:"/media/icons/duotune/arrows/arr075.svg",className:"svg-icon-2"}),"Add Sponsor"]})]})},Nt=function(){var e=jt(),t=e.selected,n=e.clearSelected,r=(0,l.useQueryClient)(),s=pt().query,a=(0,l.useMutation)((function(){return function(e){var t=e.map((function(e){return u().delete("".concat(it,"/").concat(e))}));return u().all(t).then((function(){}))}(t)}),{onSuccess:function(){r.invalidateQueries(["".concat(c.vb.USERS_LIST,"-").concat(s)]),n()}});return(0,x.jsxs)("div",{className:"d-flex justify-content-end align-items-center",children:[(0,x.jsxs)("div",{className:"fw-bolder me-5",children:[(0,x.jsx)("span",{className:"me-2",children:t.length})," Selected"]}),(0,x.jsx)("button",{type:"button",className:"btn btn-danger",onClick:(0,I.Z)((0,q.Z)().mark((function e(){return(0,q.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.mutateAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Delete Selected"})]})},kt=function(){var e=dt().updateState,t=(0,i.useState)(""),n=(0,a.Z)(t,2),r=n[0],s=n[1],l=(0,c.Nr)(r,150);return(0,i.useEffect)((function(){void 0!==l&&void 0!==r&&e((0,o.Z)({search:l},c.Xw))}),[l]),(0,x.jsx)("div",{className:"card-title",children:(0,x.jsxs)("div",{className:"d-flex align-items-center position-relative my-1",children:[(0,x.jsx)(c.D8,{path:"/media/icons/duotune/general/gen021.svg",className:"svg-icon-1 position-absolute ms-6"}),(0,x.jsx)("input",{type:"text","data-kt-user-table-filter":"search",className:"form-control form-control-solid w-250px ps-14",placeholder:"Search Sponsor",value:r,onChange:function(e){return s(e.target.value)}})]})})},wt=function(){var e=jt().selected;return(0,x.jsxs)("div",{className:"card-header border-0 pt-6",children:[(0,x.jsx)(kt,{}),(0,x.jsx)("div",{className:"card-toolbar",children:e.length>0?(0,x.jsx)(Nt,{}):(0,x.jsx)(gt,{})})]})},yt=function(e){var t=e.column;return(0,x.jsx)(x.Fragment,{children:t.Header&&"string"===typeof t.Header?(0,x.jsx)("th",(0,o.Z)((0,o.Z)({},t.getHeaderProps()),{},{children:t.render("Header")})):t.render("Header")})},St=function(e){var t=e.row;return(0,x.jsx)("tr",(0,o.Z)((0,o.Z)({},t.getRowProps()),{},{children:t.cells.map((function(e){return(0,x.jsx)("td",(0,o.Z)((0,o.Z)({},e.getCellProps()),{},{className:(0,H.Z)({"text-end min-w-100px":"actions"===e.column.id}),children:e.render("Cell")}))}))}))},_t=function(e){var t=e.status,n=e.id,r=(0,i.useState)(t),s=(0,a.Z)(r,2),c=s[0],o=s[1];return console.log(c,"stat"),(0,x.jsxs)(x.Fragment,{children:[" ",(0,x.jsx)("label",{className:"form-check form-check-custom form-check-solid form-switch mb-5",children:(0,x.jsx)("input",{className:"form-check-input",type:"checkbox",name:"status",checked:c,onChange:function(){var e=(0,I.Z)((0,q.Z)().mark((function e(t){return(0,q.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(t.currentTarget.checked),e.next=3,ct({status:t.currentTarget.checked?1:0},n);case 3:B().fire({title:"Success!",text:"Status updated successfully!",icon:"success",confirmButtonText:"Okay"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})})]})},Zt=function(e){var t=e.id,n=jt().setItemIdForUpdate,r=pt().query,s=(0,l.useQueryClient)();(0,i.useEffect)((function(){C.Mn.reinitialization()}),[]);var a=(0,l.useMutation)((function(){return e=t,u().delete("".concat(it,"/").concat(e)).then((function(){}));var e}),{onSuccess:function(){s.invalidateQueries(["".concat(c.vb.USERS_LIST,"-").concat(r)])}});return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("a",{href:"#",className:"btn btn-light btn-active-light-primary btn-sm","data-kt-menu-trigger":"click","data-kt-menu-placement":"bottom-end",children:(0,x.jsx)("i",{className:"bi bi-three-dots-vertical fs-5"})}),(0,x.jsxs)("div",{className:"menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bold fs-7 w-125px py-4","data-kt-menu":"true",children:[(0,x.jsx)("div",{className:"menu-item",children:(0,x.jsx)("a",{className:"menu-link px-3",onClick:function(){n(t)},children:"Edit"})}),(0,x.jsx)("div",{className:"menu-item",children:(0,x.jsx)("a",{className:"menu-link px-3","data-kt-users-table-filter":"delete_row",onClick:(0,I.Z)((0,q.Z)().mark((function e(){return(0,q.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.mutateAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Delete"})})]})]})},Ct=function(e){var t=e.id,n=jt(),r=n.selected,s=n.onSelect,a=(0,i.useMemo)((function(){return r.includes(t)}),[t,r]);return(0,x.jsx)("div",{className:"form-check form-check-sm form-check-custom form-check-solid",children:(0,x.jsx)("input",{className:"form-check-input",type:"checkbox","data-kt-check":a,"data-kt-check-target":"#kt_table_users .form-check-input",checked:a,onChange:function(){return s(t)}})})},Ft=function(e){var t=e.className,n=e.title,r=e.tableProps,s=r.column.id,a=dt(),l=a.state,d=a.updateState,u=(0,i.useMemo)((function(){return l.sort&&l.sort===s}),[l,s]),m=(0,i.useMemo)((function(){return l.order}),[l]);return(0,x.jsx)("th",(0,o.Z)((0,o.Z)({},r.column.getHeaderProps()),{},{className:(0,H.Z)(t,u&&void 0!==m&&"table-sort-".concat(m)),style:{cursor:"pointer"},onClick:function(){if("actions"!==s&&"selection"!==s)if(u){if(u&&void 0!==m){if("asc"===m)return void d((0,o.Z)({sort:s,order:"desc"},c.Xw));d((0,o.Z)({sort:void 0,order:void 0},c.Xw))}}else d((0,o.Z)({sort:s,order:"asc"},c.Xw))},children:n}))},Pt=function(e){var t=e.tableProps,n=jt(),r=n.isAllSelected,s=n.onSelectAll;return(0,x.jsx)("th",(0,o.Z)((0,o.Z)({},t.column.getHeaderProps()),{},{className:"w-10px pe-2",children:(0,x.jsx)("div",{className:"form-check form-check-sm form-check-custom form-check-solid me-3",children:(0,x.jsx)("input",{className:"form-check-input",type:"checkbox","data-kt-check":r,"data-kt-check-target":"#kt_table_users .form-check-input",checked:r,onChange:s})})}))},qt=[{Header:function(e){return(0,x.jsx)(Pt,{tableProps:e})},id:"selection",Cell:function(e){var t=Object.assign({},e);return(0,x.jsx)(Ct,{id:t.data[t.row.index].id})}},{Header:function(e){return(0,x.jsx)(Ft,{tableProps:e,title:"Sponsor's Name",className:"min-w-125px"})},accessor:"name"},{Header:function(e){return(0,x.jsx)(Ft,{tableProps:e,title:"Mobile",className:"min-w-125px"})},accessor:"mobile_number"},{Header:function(e){return(0,x.jsx)(Ft,{tableProps:e,title:"Email",className:"min-w-125px"})},accessor:"email"},{Header:function(e){return(0,x.jsx)(Ft,{tableProps:e,title:"Link",className:"min-w-125px"})},accessor:"link"},{Header:function(e){return(0,x.jsx)(Ft,{tableProps:e,title:"Active",className:"min-w-125px"})},id:"active",Cell:function(e){var t=Object.assign({},e);return(0,x.jsx)(_t,{status:t.data[t.row.index].status,id:t.data[t.row.index].id})}},{Header:function(e){return(0,x.jsx)(Ft,{tableProps:e,title:"Actions",className:"text-end min-w-100px"})},id:"actions",Cell:function(e){var t=Object.assign({},e);return(0,x.jsx)(Zt,{id:t.data[t.row.index].id})}}],It=function(){return(0,x.jsx)("div",{style:(0,o.Z)((0,o.Z)({},{borderRadius:"0.475rem",boxShadow:"0 0 50px 0 rgb(82 63 105 / 15%)",backgroundColor:"#fff",color:"#7e8299",fontWeight:"500",margin:"0",width:"auto",padding:"1rem 2rem",top:"calc(50% - 2rem)",left:"calc(50% - 4rem)"}),{},{position:"absolute",textAlign:"center"}),children:"Processing..."})},Et=function(){var e,t=function(){var e=(0,o.Z)({links:[]},c.Xw),t=pt().response;return t&&t.payload&&t.payload.pagination?t.payload.pagination:e}(),n=ft(),r=dt().updateState;return(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-sm-12 col-md-5 d-flex align-items-center justify-content-center justify-content-md-start"}),(0,x.jsx)("div",{className:"col-sm-12 col-md-7 d-flex align-items-center justify-content-center justify-content-md-end",children:(0,x.jsx)("div",{id:"kt_table_users_paginate",children:(0,x.jsx)("ul",{className:"pagination",children:null===(e=t.links)||void 0===e?void 0:e.map((function(e){return(0,x.jsx)("li",{className:(0,H.Z)("page-item",{active:t.page===e.page,disabled:n,previous:"&laquo; Previous"===e.label,next:"Next &raquo;"===e.label}),children:(0,x.jsx)("a",{className:"page-link",onClick:function(){var s;(s=e.page)&&!n&&t.page!==s&&r({page:s,items_per_page:t.items_per_page||10})},dangerouslySetInnerHTML:{__html:e.label},style:{cursor:"pointer"}})},e.label)}))})})})]})},Tt=function(){var e=xt(),t=ft(),n=(0,i.useMemo)((function(){return e}),[e]),r=(0,i.useMemo)((function(){return qt}),[]),s=(0,L.useTable)({columns:r,data:n}),a=s.getTableProps,l=s.getTableBodyProps,d=s.headers,u=s.rows,m=s.prepareRow;return(0,x.jsxs)(c.mN,{className:"py-4",children:[(0,x.jsx)("div",{className:"table-responsive",children:(0,x.jsxs)("table",(0,o.Z)((0,o.Z)({id:"kt_table_users",className:"table align-middle table-row-dashed fs-6 gy-5 dataTable no-footer"},a()),{},{children:[(0,x.jsx)("thead",{children:(0,x.jsx)("tr",{className:"text-start text-muted fw-bolder fs-7 text-uppercase gs-0",children:d.map((function(e){return(0,x.jsx)(yt,{column:e},e.id)}))})}),(0,x.jsx)("tbody",(0,o.Z)((0,o.Z)({className:"text-gray-600 fw-bold"},l()),{},{children:u.length>0?u.map((function(e,t){return m(e),(0,x.jsx)(St,{row:e},"row-".concat(t,"-").concat(e.id))})):(0,x.jsx)("tr",{children:(0,x.jsx)("td",{colSpan:7,children:(0,x.jsx)("div",{className:"d-flex text-center w-100 align-content-center justify-content-center",children:"No matching records found"})})})}))]}))}),(0,x.jsx)(Et,{}),t&&(0,x.jsx)(It,{})]})},Ut=function(){var e=jt().setItemIdForUpdate;return(0,x.jsxs)("div",{className:"modal-header",children:[(0,x.jsx)("h2",{className:"fw-bolder",children:"Add Sponsor"}),(0,x.jsx)("div",{className:"btn btn-icon btn-sm btn-active-icon-primary","data-kt-users-modal-action":"close",onClick:function(){return e(void 0)},style:{cursor:"pointer"},children:(0,x.jsx)(c.D8,{path:"/media/icons/duotune/arrows/arr061.svg",className:"svg-icon-1"})})]})},Lt=[re.Ry().shape({name:re.Z_().required("Name is required"),mobile_number:re.Z_().required("Mobile number is required"),email:re.Z_().email("wrong email format").required("Email is required")})],At={id:void 0,name:"",mobile_number:"",email:"",logo:"",link:"",description:""},Ht=function(e){var t=e.role,n=e.isUserLoading,r=jt().setItemIdForUpdate,s=pt().refetch,l=(0,i.useState)(Lt[0]),d=(0,a.Z)(l,2),m=d[0],p=(d[1],(0,i.useState)((0,o.Z)((0,o.Z)({},t),{},{id:t.id||At.id,name:t.name||At.name,mobile_number:t.mobile_number||At.mobile_number,email:t.email||At.email,logo:t.logo||At.logo,link:t.link||At.link,description:t.description||At.description}))),f=(0,a.Z)(p,2),h=f[0],v=f[1],j=(0,i.useRef)(null),b=function(){var e=(0,I.Z)((0,q.Z)().mark((function e(t,n){return(0,q.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.logo=h.logo,t.description=h.description,e.next=5,a=t,u().post(it,a).then((function(e){return e.data})).then((function(e){return e.data}));case 5:n.resetForm(),!0&&s(),r(void 0),B().fire({title:"Success!",text:"Sponsor Updated!",icon:"success",confirmButtonText:"Okay"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:return e.prev=13,e.finish(13);case 15:case"end":return e.stop()}var a}),e,null,[[0,10,13,15]])})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=(0,I.Z)((0,q.Z)().mark((function e(t){var n,r;return(0,q.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.currentTarget.files[0],(r=new FormData).append("image",n),e.next=5,u().post("".concat(oe.T,"/upload"),r).then((function(e){v((0,o.Z)((0,o.Z)({},h),{},{logo:e.data}))})).catch((function(e){console.log(e,"err")}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(e){var t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","image/*"),t.click(),t.onchange=(0,I.Z)((0,q.Z)().mark((function e(){var n,r;return(0,q.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===t||void 0===t?void 0:t.files[0],(r=new FormData).append("image",n),e.next=5,u().post("".concat(oe.T,"/upload"),r).then((function(e){var t=j.current.getEditor().getSelection();j.current.getEditor().insertEmbed(null===t||void 0===t?void 0:t.index,"image",e.data)})).catch((function(e){console.log(e,"err")}));case 5:case"end":return e.stop()}}),e)})))},k=(0,i.useMemo)((function(){return{toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]],handlers:{image:N}}}}),[]),w=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image"];return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"stepper stepper-links d-flex flex-column",id:"kt_create_account_stepper",children:(0,x.jsx)(ne.J9,{validationSchema:m,initialValues:h,onSubmit:b,validateOnChange:!1,children:function(){return(0,x.jsxs)(ne.l0,{className:"mx-auto mw-700px w-100 pt-5 pb-10",id:"kt_create_account_form",children:[(0,x.jsxs)("div",{className:"fv-row mb-7",children:[(0,x.jsx)("label",{className:"d-block form-label",children:"Sponsor's Logo"}),(0,x.jsxs)("div",{className:"image-input image-input-outline","data-kt-image-input":"true",children:[(0,x.jsx)("div",{className:"",children:(0,x.jsx)("img",{src:null==(null===h||void 0===h?void 0:h.logo)||""==(null===h||void 0===h?void 0:h.logo)?(0,c.BY)("/media/svg/avatars/blank.svg"):null===h||void 0===h?void 0:h.logo,alt:"avatar",className:"image-input-wrapper w-125px h-125px"})}),(0,x.jsxs)("label",{className:"btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow","data-kt-image-input-action":"change","data-bs-toggle":"tooltip",title:"Change avatar",children:[(0,x.jsx)("i",{className:"bi bi-pencil-fill fs-7"}),(0,x.jsx)("input",{type:"file",name:"profile_image",accept:".png, .jpg, .jpeg",onChange:g}),(0,x.jsx)("input",{type:"hidden",name:"avatar_remove"})]}),null!==h.logo&&(0,x.jsx)("button",{className:"btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow","data-kt-image-input-action":"remove","data-bs-toggle":"tooltip",title:"Remove avatar",type:"button",onClick:function(){return v((0,o.Z)((0,o.Z)({},h),{},{logo:""}))},children:(0,x.jsx)("i",{className:"bi bi-x fs-2"})})]}),(0,x.jsx)("div",{className:"form-text",children:"Allowed file types: png, jpg, jpeg."})]}),(0,x.jsxs)("div",{className:"d-flex flex-wrap gap-5 mb-10",children:[(0,x.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,x.jsx)("label",{className:"form-label required",children:"Full Name"}),(0,x.jsx)(ne.gN,{name:"name",className:"form-control mb-2",placeholder:"Enter Full Name"}),(0,x.jsx)("div",{className:"text-danger mt-2",children:(0,x.jsx)(ne.Bc,{name:"name"})})]}),(0,x.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,x.jsx)("label",{className:"d-flex align-items-center form-label",children:(0,x.jsx)("span",{className:"required",children:"Email"})}),(0,x.jsx)(ne.gN,{name:"email",className:"form-control mb-2",placeholder:"Enter Email"}),(0,x.jsx)("div",{className:"text-danger mt-2",children:(0,x.jsx)(ne.Bc,{name:"email"})})]})]}),(0,x.jsxs)("div",{className:"d-flex flex-wrap gap-5 mb-10",children:[(0,x.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,x.jsx)("label",{className:"form-label",children:"Website Link"}),(0,x.jsx)(ne.gN,{name:"link",className:"form-control mb-2",placeholder:"Enter Website Link"}),(0,x.jsx)("div",{className:"text-danger mt-2",children:(0,x.jsx)(ne.Bc,{name:"link"})})]}),(0,x.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,x.jsx)("label",{className:"d-flex align-items-center form-label",children:(0,x.jsx)("span",{className:"required",children:"Mobile Number"})}),(0,x.jsx)(ne.gN,{name:"mobile_number",type:"number",className:"form-control mb-2",placeholder:"Enter Mobile Number"}),(0,x.jsx)("div",{className:"text-danger mt-2",children:(0,x.jsx)(ne.Bc,{name:"mobile_number"})})]})]}),(0,x.jsxs)("div",{className:"fv-row w-100 mb-10",children:[(0,x.jsx)("label",{className:"form-label",children:"Description"}),(0,x.jsx)(ce(),{onChange:function(e,t,n,r){v((0,o.Z)((0,o.Z)({},h),{},{description:e}))},id:"description",value:h.description,formats:w,modules:k,ref:j})]}),(0,x.jsxs)("div",{className:"d-flex flex-stack pt-15",children:[(0,x.jsx)("div",{className:"mr-2"}),(0,x.jsx)("div",{children:(0,x.jsx)("button",{type:"submit",className:"btn btn-lg btn-primary me-3",children:(0,x.jsx)("span",{className:"indicator-label",children:"Submit"})})})]})]})}})}),n&&(0,x.jsx)(It,{})]})},Mt=function(){var e=jt(),t=e.itemIdForUpdate,n=e.setItemIdForUpdate,r=(0,c.UE)(t),s=(0,l.useQuery)("".concat(c.vb.USERS_LIST,"-user-").concat(t),(function(){return e=t,u().get("".concat(it,"/").concat(e)).then((function(e){return e.data})).then((function(e){return e.data}));var e}),{cacheTime:0,enabled:r,onError:function(e){n(void 0),console.error(e)}}),a=s.isLoading,i=s.data,o=s.error;return t?a||o||!i?null:(0,x.jsx)(Ht,{isUserLoading:a,role:i}):(0,x.jsx)(Ht,{isUserLoading:a,role:{id:void 0}})},Dt=function(){return(0,i.useEffect)((function(){return document.body.classList.add("modal-open"),function(){document.body.classList.remove("modal-open")}}),[]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"modal fade show d-block",id:"kt_modal_add_user",role:"dialog",tabIndex:-1,"aria-modal":"true",children:(0,x.jsx)("div",{className:"modal-dialog modal-dialog-centered mw-900px",children:(0,x.jsxs)("div",{className:"modal-content",children:[(0,x.jsx)(Ut,{}),(0,x.jsx)("div",{className:"modal-body scroll-y mx-5 mx-xl-15",children:(0,x.jsx)(Mt,{})})]})})}),(0,x.jsx)("div",{className:"modal-backdrop fade show"})]})},Ot=function(){var e=jt().itemIdForUpdate;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(c.O7,{children:[(0,x.jsx)(wt,{}),(0,x.jsx)(Tt,{})]}),void 0!==e&&(0,x.jsx)(Dt,{})]})},Rt=function(){return(0,x.jsx)(lt,{children:(0,x.jsx)(mt,{children:(0,x.jsx)(vt,{children:(0,x.jsx)(Ot,{})})})})},Bt=[{title:"Sponsors",path:"/sponsor/sponsors",isSeparator:!1,isActive:!1},{title:"",path:"",isSeparator:!0,isActive:!1}],Qt=function(){return(0,x.jsx)(r.Z5,{children:(0,x.jsxs)(r.AW,{element:(0,x.jsx)(r.j3,{}),children:[(0,x.jsx)(r.AW,{path:"sponsors",element:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(s.V1,{breadcrumbs:Bt,children:"Sponsors list"}),(0,x.jsx)(Rt,{})]})}),(0,x.jsx)(r.AW,{path:"programs",element:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(s.V1,{breadcrumbs:Bt,children:"Programs list"}),(0,x.jsx)(pe,{})]})}),(0,x.jsx)(r.AW,{path:"subscriptions",element:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(s.V1,{breadcrumbs:Bt,children:"Subscriptions list"}),(0,x.jsx)(at,{})]})}),(0,x.jsx)(r.AW,{index:!0,element:(0,x.jsx)(r.Fg,{to:"/sponsor/sponsors"})})]})})}}}]);
//# sourceMappingURL=499.af30299c.chunk.js.map