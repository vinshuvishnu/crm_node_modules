"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[636],{7636:function(e,t,n){n.r(t),n.d(t,{default:function(){return te}});var r=n(4880),a=n(885),c=n(2791),s=n(2930),i=n(1413),o=n(1933),u=n(4569),l=n.n(u),d="".concat("https://quiz.datacubeindia.com/user","/feedback"),f=function(e,t){return l().put("".concat(d,"/").concat(t),e).then((function(e){return e.data})).then((function(e){return e.data}))},m=n(184),x=(0,c.createContext)(s.vv),h=function(e){var t=e.children,n=(0,c.useState)(s.vv.state),r=(0,a.Z)(n,2),o=r[0],u=r[1];return(0,m.jsx)(x.Provider,{value:{state:o,updateState:function(e){var t=(0,i.Z)((0,i.Z)({},o),e);u(t)}},children:t})},p=function(){return(0,c.useContext)(x)},v=(0,s.gl)(s.B2),j=function(e){var t=e.children,n=p().state,r=(0,c.useState)((0,s.gJ)(n)),i=(0,a.Z)(r,2),u=i[0],f=i[1],x=(0,c.useMemo)((function(){return(0,s.gJ)(n)}),[n]);(0,c.useEffect)((function(){u!==x&&f(x)}),[x]);var h=(0,o.useQuery)("".concat(s.vb.USERS_LIST,"-").concat(u),(function(){return function(e){return l().get("".concat(d,"?").concat(e)).then((function(e){return e.data}))}(u)}),{cacheTime:0,keepPreviousData:!0,refetchOnWindowFocus:!1}),j=h.isFetching,b=h.refetch,g=h.data;return(0,m.jsx)(v.Provider,{value:{isLoading:j,refetch:b,response:g,query:u},children:t})},b=function(){return(0,c.useContext)(v)},g=function(){var e=b().response;return e&&(null===e||void 0===e?void 0:e.data)||[]},k=function(){return b().isLoading},N=(0,c.createContext)(s.px),w=function(e){var t=e.children,n=(0,c.useState)(s.px.selected),r=(0,a.Z)(n,2),i=r[0],o=r[1],u=(0,c.useState)(s.px.itemIdForUpdate),l=(0,a.Z)(u,2),d=l[0],f=l[1],x=b().isLoading,h=g(),p=(0,c.useMemo)((function(){return(0,s.Qx)(x,h)}),[x,h]),v=(0,c.useMemo)((function(){return(0,s.HX)(h,i)}),[h,i]);return(0,m.jsx)(N.Provider,{value:{selected:i,itemIdForUpdate:d,setItemIdForUpdate:f,disabled:p,isAllSelected:v,onSelect:function(e){(0,s.G8)(e,i,o)},onSelectAll:function(){(0,s.ir)(v,o,h)},clearSelected:function(){o([])}},children:t})},Z=function(){return(0,c.useContext)(N)},y=n(8472),S=function(e){var t=e.csvData,n=e.fileName;return(0,m.jsxs)("button",{type:"button",className:"btn btn-light-primary me-3",children:[(0,m.jsx)(s.D8,{path:"/media/icons/duotune/arrows/arr078.svg",className:"svg-icon-2"}),(0,m.jsx)(y.CSVLink,{data:t,filename:n,children:"Export"})]})},C=function(){var e=g();Z().setItemIdForUpdate;return(0,m.jsx)("div",{className:"d-flex justify-content-end","data-kt-user-table-toolbar":"base",children:(0,m.jsx)(S,{csvData:e,fileName:"feedbacks"})})},P=n(4165),_=n(5861),F=function(){var e=Z(),t=e.selected,n=e.clearSelected,r=(0,o.useQueryClient)(),a=b().query,c=(0,o.useMutation)((function(){return function(e){var t=e.map((function(e){return l().delete("".concat(d,"/").concat(e))}));return l().all(t).then((function(){}))}(t)}),{onSuccess:function(){r.invalidateQueries(["".concat(s.vb.USERS_LIST,"-").concat(a)]),n()}});return(0,m.jsxs)("div",{className:"d-flex justify-content-end align-items-center",children:[(0,m.jsxs)("div",{className:"fw-bolder me-5",children:[(0,m.jsx)("span",{className:"me-2",children:t.length})," Selected"]}),(0,m.jsx)("button",{type:"button",className:"btn btn-danger",onClick:(0,_.Z)((0,P.Z)().mark((function e(){return(0,P.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.mutateAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Delete Selected"})]})},H=function(){var e=p().updateState,t=(0,c.useState)(""),n=(0,a.Z)(t,2),r=n[0],o=n[1],u=(0,s.Nr)(r,150);return(0,c.useEffect)((function(){void 0!==u&&void 0!==r&&e((0,i.Z)({search:u},s.Xw))}),[u]),(0,m.jsx)("div",{className:"card-title",children:(0,m.jsxs)("div",{className:"d-flex align-items-center position-relative my-1",children:[(0,m.jsx)(s.D8,{path:"/media/icons/duotune/general/gen021.svg",className:"svg-icon-1 position-absolute ms-6"}),(0,m.jsx)("input",{type:"text","data-kt-user-table-filter":"search",className:"form-control form-control-solid w-250px ps-14",placeholder:"Search feedback",value:r,onChange:function(e){return o(e.target.value)}})]})})},I=function(){var e=Z().selected;return(0,m.jsxs)("div",{className:"card-header border-0 pt-6",children:[(0,m.jsx)(H,{}),(0,m.jsx)("div",{className:"card-toolbar",children:e.length>0?(0,m.jsx)(F,{}):(0,m.jsx)(C,{})})]})},M=n(1358),A=function(e){var t=e.column;return(0,m.jsx)(m.Fragment,{children:t.Header&&"string"===typeof t.Header?(0,m.jsx)("th",(0,i.Z)((0,i.Z)({},t.getHeaderProps()),{},{children:t.render("Header")})):t.render("Header")})},T=n(8182),U=function(e){var t=e.row;return(0,m.jsx)("tr",(0,i.Z)((0,i.Z)({},t.getRowProps()),{},{children:t.cells.map((function(e){return(0,m.jsx)("td",(0,i.Z)((0,i.Z)({},e.getCellProps()),{},{className:(0,T.Z)({"text-end min-w-100px":"actions"===e.column.id}),children:e.render("Cell")}))}))}))},E=n(1830),L=n.n(E),q=function(e){var t=e.status,n=e.id,r=(0,c.useState)(t),s=(0,a.Z)(r,2),i=s[0],o=s[1];return console.log(i,"stat"),(0,m.jsxs)(m.Fragment,{children:[" ",(0,m.jsx)("label",{className:"form-check form-check-custom form-check-solid form-switch mb-5",children:(0,m.jsx)("input",{className:"form-check-input",type:"checkbox",name:"status",checked:i,onChange:function(){var e=(0,_.Z)((0,P.Z)().mark((function e(t){return(0,P.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(t.currentTarget.checked),e.next=3,f({status:t.currentTarget.checked?1:0},n);case 3:L().fire({title:"Success!",text:"Status updated successfully!",icon:"success",confirmButtonText:"Okay"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})})]})},O=n(6492),D=function(e){var t=e.id,n=(Z().setItemIdForUpdate,b().query),r=(0,o.useQueryClient)();(0,c.useEffect)((function(){O.Mn.reinitialization()}),[]);var a=(0,o.useMutation)((function(){return e=t,l().delete("".concat(d,"/").concat(e)).then((function(){}));var e}),{onSuccess:function(){r.invalidateQueries(["".concat(s.vb.USERS_LIST,"-").concat(n)])}});return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("a",{className:"btn btn-light btn-active-light-primary btn-sm","data-kt-users-table-filter":"delete_row",onClick:(0,_.Z)((0,P.Z)().mark((function e(){return(0,P.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.mutateAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:(0,m.jsx)("i",{className:"fa fa-trash fs-5"})})})},Q=function(e){var t=e.id,n=Z(),r=n.selected,a=n.onSelect,s=(0,c.useMemo)((function(){return r.includes(t)}),[t,r]);return(0,m.jsx)("div",{className:"form-check form-check-sm form-check-custom form-check-solid",children:(0,m.jsx)("input",{className:"form-check-input",type:"checkbox","data-kt-check":s,"data-kt-check-target":"#kt_table_users .form-check-input",checked:s,onChange:function(){return a(t)}})})},R=function(e){var t=e.className,n=e.title,r=e.tableProps,a=r.column.id,o=p(),u=o.state,l=o.updateState,d=(0,c.useMemo)((function(){return u.sort&&u.sort===a}),[u,a]),f=(0,c.useMemo)((function(){return u.order}),[u]);return(0,m.jsx)("th",(0,i.Z)((0,i.Z)({},r.column.getHeaderProps()),{},{className:(0,T.Z)(t,d&&void 0!==f&&"table-sort-".concat(f)),style:{cursor:"pointer"},onClick:function(){if("actions"!==a&&"selection"!==a)if(d){if(d&&void 0!==f){if("asc"===f)return void l((0,i.Z)({sort:a,order:"desc"},s.Xw));l((0,i.Z)({sort:void 0,order:void 0},s.Xw))}}else l((0,i.Z)({sort:a,order:"asc"},s.Xw))},children:n}))},X=function(e){var t=e.tableProps,n=Z(),r=n.isAllSelected,a=n.onSelectAll;return(0,m.jsx)("th",(0,i.Z)((0,i.Z)({},t.column.getHeaderProps()),{},{className:"w-10px pe-2",children:(0,m.jsx)("div",{className:"form-check form-check-sm form-check-custom form-check-solid me-3",children:(0,m.jsx)("input",{className:"form-check-input",type:"checkbox","data-kt-check":r,"data-kt-check-target":"#kt_table_users .form-check-input",checked:r,onChange:a})})}))},z=(0,c.createContext)({users:[]}),B=function(e){var t=e.children,n=(0,c.useState)(),r=(0,a.Z)(n,2),s=r[0],i=r[1];(0,c.useEffect)((function(){o()}),[]);var o=function(){var e=(0,_.Z)((0,P.Z)().mark((function e(){return(0,P.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().get("".concat("https://quiz.datacubeindia.com/user/user/getAll")).then((function(e){return e.data})).then((function(e){i(e)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,m.jsx)(z.Provider,{value:{users:s},children:t})},J=function(e){var t=e.user,n=Z().setItemIdForUpdate,r=(0,c.useContext)(z).users,a=null===r||void 0===r?void 0:r.find((function(e){return e.id==t.user_id}));return(0,m.jsx)("div",{className:"d-flex align-items-center",children:(0,m.jsx)("div",{className:"d-flex flex-column",children:(0,m.jsxs)("a",{onClick:function(){n(t.id)},style:{cursor:"pointer"},className:"text-gray-800 text-hover-primary mb-1",children:[null===a||void 0===a?void 0:a.firstname," ",null===a||void 0===a?void 0:a.lastname]})})})},V=[{Header:function(e){return(0,m.jsx)(X,{tableProps:e})},id:"selection",Cell:function(e){var t=Object.assign({},e);return(0,m.jsx)(Q,{id:t.data[t.row.index].id})}},{Header:function(e){return(0,m.jsx)(R,{tableProps:e,title:"Name",className:"min-w-125px"})},id:"name",Cell:function(e){var t=Object.assign({},e);return(0,m.jsx)(J,{user:t.data[t.row.index]})}},{Header:function(e){return(0,m.jsx)(R,{tableProps:e,title:"Email Id",className:"min-w-125px"})},accessor:"email"},{Header:function(e){return(0,m.jsx)(R,{tableProps:e,title:"Mobile Number",className:"min-w-125px"})},accessor:"mobile_number"},{Header:function(e){return(0,m.jsx)(R,{tableProps:e,title:"Feedback",className:"min-w-125px"})},accessor:"message"},{Header:function(e){return(0,m.jsx)(R,{tableProps:e,title:"Active",className:"min-w-125px"})},id:"active",Cell:function(e){var t=Object.assign({},e);return(0,m.jsx)(q,{status:t.data[t.row.index].status,id:t.data[t.row.index].id})}},{Header:function(e){return(0,m.jsx)(R,{tableProps:e,title:"Actions",className:"text-end min-w-100px"})},id:"actions",Cell:function(e){var t=Object.assign({},e);return(0,m.jsx)(D,{id:t.data[t.row.index].id})}}],W=function(){return(0,m.jsx)("div",{style:(0,i.Z)((0,i.Z)({},{borderRadius:"0.475rem",boxShadow:"0 0 50px 0 rgb(82 63 105 / 15%)",backgroundColor:"#fff",color:"#7e8299",fontWeight:"500",margin:"0",width:"auto",padding:"1rem 2rem",top:"calc(50% - 2rem)",left:"calc(50% - 4rem)"}),{},{position:"absolute",textAlign:"center"}),children:"Processing..."})},G=function(){var e,t=function(){var e=(0,i.Z)({links:[]},s.Xw),t=b().response;return t&&t.payload&&t.payload.pagination?t.payload.pagination:e}(),n=k(),r=p().updateState;return(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col-sm-12 col-md-5 d-flex align-items-center justify-content-center justify-content-md-start"}),(0,m.jsx)("div",{className:"col-sm-12 col-md-7 d-flex align-items-center justify-content-center justify-content-md-end",children:(0,m.jsx)("div",{id:"kt_table_users_paginate",children:(0,m.jsx)("ul",{className:"pagination",children:null===(e=t.links)||void 0===e?void 0:e.map((function(e){return(0,m.jsx)("li",{className:(0,T.Z)("page-item",{active:t.page===e.page,disabled:n,previous:"&laquo; Previous"===e.label,next:"Next &raquo;"===e.label}),children:(0,m.jsx)("a",{className:"page-link",onClick:function(){var a;(a=e.page)&&!n&&t.page!==a&&r({page:a,items_per_page:t.items_per_page||10})},dangerouslySetInnerHTML:{__html:e.label},style:{cursor:"pointer"}})},e.label)}))})})})]})},K=function(){var e=g(),t=k(),n=(0,c.useMemo)((function(){return e}),[e]),r=(0,c.useMemo)((function(){return V}),[]),a=(0,M.useTable)({columns:r,data:n}),o=a.getTableProps,u=a.getTableBodyProps,l=a.headers,d=a.rows,f=a.prepareRow;return(0,m.jsxs)(s.mN,{className:"py-4",children:[(0,m.jsx)("div",{className:"table-responsive",children:(0,m.jsxs)("table",(0,i.Z)((0,i.Z)({id:"kt_table_users",className:"table align-middle table-row-dashed fs-6 gy-5 dataTable no-footer"},o()),{},{children:[(0,m.jsx)("thead",{children:(0,m.jsx)("tr",{className:"text-start text-muted fw-bolder fs-7 text-uppercase gs-0",children:l.map((function(e){return(0,m.jsx)(A,{column:e},e.id)}))})}),(0,m.jsx)("tbody",(0,i.Z)((0,i.Z)({className:"text-gray-600 fw-bold"},u()),{},{children:d.length>0?d.map((function(e,t){return f(e),(0,m.jsx)(U,{row:e},"row-".concat(t,"-").concat(e.id))})):(0,m.jsx)("tr",{children:(0,m.jsx)("td",{colSpan:7,children:(0,m.jsx)("div",{className:"d-flex text-center w-100 align-content-center justify-content-center",children:"No matching records found"})})})}))]}))}),(0,m.jsx)(G,{}),t&&(0,m.jsx)(W,{})]})},Y=function(){Z().itemIdForUpdate;return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(s.O7,{children:[(0,m.jsx)(I,{}),(0,m.jsx)(K,{})]})})},$=function(){return(0,m.jsx)(h,{children:(0,m.jsx)(j,{children:(0,m.jsx)(w,{children:(0,m.jsx)(B,{children:(0,m.jsx)(Y,{})})})})})},ee=[{title:"Feedback",path:"/feedback",isSeparator:!1,isActive:!1},{title:"",path:"",isSeparator:!0,isActive:!1}],te=function(){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(r.V1,{breadcrumbs:ee,children:"Feedbacks list"}),(0,m.jsx)($,{})]})}}}]);
//# sourceMappingURL=636.5dc0edf0.chunk.js.map