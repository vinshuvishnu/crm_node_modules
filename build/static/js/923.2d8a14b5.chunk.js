"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[923],{4923:function(e,t,n){n.r(t),n.d(t,{default:function(){return _e}});var s=n(4880),r=n(885),a=n(2791),i=n(2930),o=n(1413),l=n(1933),c=n(4569),u=n.n(c),d="https://quiz.datacubeindia.com/question",m="".concat(d,"/question"),f=function(e){return u().post(m,e).then((function(e){return e.data})).then((function(e){return e.data}))},x=function(e){return u().post("".concat(m,"/update"),e).then((function(e){return e.data})).then((function(e){return e.data}))},h=function(e,t){return u().put("".concat(d,"/questionBank/").concat(t),e).then((function(e){return e.data})).then((function(e){return e.data}))},v=n(184),p=(0,a.createContext)(i.vv),j=function(e){var t=e.children,n=(0,a.useState)(i.vv.state),s=(0,r.Z)(n,2),l=s[0],c=s[1];return(0,v.jsx)(p.Provider,{value:{state:l,updateState:function(e){var t=(0,o.Z)((0,o.Z)({},l),e);c(t)}},children:t})},b=function(){return(0,a.useContext)(p)},g=(0,i.gl)(i.B2),N=function(e){var t=e.children,n=b().state,s=(0,a.useState)((0,i.gJ)(n)),o=(0,r.Z)(s,2),c=o[0],d=o[1],f=(0,a.useMemo)((function(){return(0,i.gJ)(n)}),[n]);(0,a.useEffect)((function(){c!==f&&d(f)}),[f]);var x=(0,l.useQuery)("".concat(i.vb.USERS_LIST,"-").concat(c),(function(){return function(e){return u().get("".concat(m,"?").concat(e)).then((function(e){return e.data}))}(c)}),{cacheTime:0,keepPreviousData:!0,refetchOnWindowFocus:!1}),h=x.isFetching,p=x.refetch,j=x.data;return(0,v.jsx)(g.Provider,{value:{isLoading:h,refetch:p,response:j,query:c},children:t})},k=function(){return(0,a.useContext)(g)},w=function(){var e=k().response;return e&&(null===e||void 0===e?void 0:e.data)||[]},y=function(){return k().isLoading},_=(0,a.createContext)(i.px),q=function(e){var t=e.children,n=(0,a.useState)(i.px.selected),s=(0,r.Z)(n,2),o=s[0],l=s[1],c=(0,a.useState)(i.px.itemIdForUpdate),u=(0,r.Z)(c,2),d=u[0],m=u[1],f=k().isLoading,x=w(),h=(0,a.useMemo)((function(){return(0,i.Qx)(f,x)}),[f,x]),p=(0,a.useMemo)((function(){return(0,i.HX)(x,o)}),[x,o]);return(0,v.jsx)(_.Provider,{value:{selected:o,itemIdForUpdate:d,setItemIdForUpdate:m,disabled:h,isAllSelected:p,onSelect:function(e){(0,i.G8)(e,o,l)},onSelectAll:function(){(0,i.ir)(p,l,x)},clearSelected:function(){l([])}},children:t})},Z=function(){return(0,a.useContext)(_)},S=n(8472),C=function(e){var t=e.csvData,n=e.fileName;return(0,v.jsxs)("button",{type:"button",className:"btn btn-light-primary me-3",children:[(0,v.jsx)(i.D8,{path:"/media/icons/duotune/arrows/arr078.svg",className:"svg-icon-2"}),(0,v.jsx)(S.CSVLink,{data:t,filename:n,children:"Export"})]})},I=n(6492),F=function(){var e=b().updateState,t=k().isLoading,n=(0,a.useState)(),s=(0,r.Z)(n,2),l=s[0],c=s[1],u=(0,a.useState)(),d=(0,r.Z)(u,2),m=d[0],f=d[1];(0,a.useEffect)((function(){I.Mn.reinitialization()}),[]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("button",{disabled:t,type:"button",className:"btn btn-light-primary me-3","data-kt-menu-trigger":"click","data-kt-menu-placement":"bottom-end",children:[(0,v.jsx)(i.D8,{path:"/media/icons/duotune/general/gen031.svg",className:"svg-icon-2"}),"Filter"]}),(0,v.jsxs)("div",{className:"menu menu-sub menu-sub-dropdown w-300px w-md-325px","data-kt-menu":"true",children:[(0,v.jsx)("div",{className:"px-7 py-5",children:(0,v.jsx)("div",{className:"fs-5 text-dark fw-bolder",children:"Filter Options"})}),(0,v.jsx)("div",{className:"separator border-gray-200"}),(0,v.jsxs)("div",{className:"px-7 py-5","data-kt-user-table-filter":"form",children:[(0,v.jsxs)("div",{className:"mb-10",children:[(0,v.jsx)("label",{className:"form-label fs-6 fw-bold",children:"Role:"}),(0,v.jsxs)("select",{className:"form-select form-select-solid fw-bolder","data-kt-select2":"true","data-placeholder":"Select option","data-allow-clear":"true","data-kt-user-table-filter":"role","data-hide-search":"true",onChange:function(e){return c(e.target.value)},value:l,children:[(0,v.jsx)("option",{value:""}),(0,v.jsx)("option",{value:"Administrator",children:"Administrator"}),(0,v.jsx)("option",{value:"Analyst",children:"Analyst"}),(0,v.jsx)("option",{value:"Developer",children:"Developer"}),(0,v.jsx)("option",{value:"Support",children:"Support"}),(0,v.jsx)("option",{value:"Trial",children:"Trial"})]})]}),(0,v.jsxs)("div",{className:"mb-10",children:[(0,v.jsx)("label",{className:"form-label fs-6 fw-bold",children:"Last login:"}),(0,v.jsxs)("select",{className:"form-select form-select-solid fw-bolder","data-kt-select2":"true","data-placeholder":"Select option","data-allow-clear":"true","data-kt-user-table-filter":"two-step","data-hide-search":"true",onChange:function(e){return f(e.target.value)},value:m,children:[(0,v.jsx)("option",{value:""}),(0,v.jsx)("option",{value:"Yesterday",children:"Yesterday"}),(0,v.jsx)("option",{value:"20 mins ago",children:"20 mins ago"}),(0,v.jsx)("option",{value:"5 hours ago",children:"5 hours ago"}),(0,v.jsx)("option",{value:"2 days ago",children:"2 days ago"})]})]}),(0,v.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,v.jsx)("button",{type:"button",disabled:t,onClick:function(){e((0,o.Z)({filter:{role:l,last_login:m}},i.Xw))},className:"btn btn-light btn-active-light-primary fw-bold me-2 px-6","data-kt-menu-dismiss":"true","data-kt-user-table-filter":"reset",children:"Reset"}),(0,v.jsx)("button",{disabled:t,type:"button",onClick:function(){e((0,o.Z)({filter:void 0},i.Xw))},className:"btn btn-primary fw-bold px-6","data-kt-menu-dismiss":"true","data-kt-user-table-filter":"filter",children:"Apply"})]})]})]})]})},E=function(){var e=w(),t=Z().setItemIdForUpdate;return(0,v.jsxs)("div",{className:"d-flex justify-content-end","data-kt-user-table-toolbar":"base",children:[(0,v.jsx)(F,{}),(0,v.jsx)(C,{csvData:e,fileName:"questions"}),(0,v.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){t(null)},children:[(0,v.jsx)(i.D8,{path:"/media/icons/duotune/arrows/arr075.svg",className:"svg-icon-2"}),"Add Question"]})]})},L=n(4165),P=n(5861),A=function(){var e=Z(),t=e.selected,n=e.clearSelected,s=(0,l.useQueryClient)(),r=k().query,a=(0,l.useMutation)((function(){return function(e){var t=e.map((function(e){return u().delete("".concat(m,"/").concat(e))}));return u().all(t).then((function(){}))}(t)}),{onSuccess:function(){s.invalidateQueries(["".concat(i.vb.USERS_LIST,"-").concat(r)]),n()}});return(0,v.jsxs)("div",{className:"d-flex justify-content-end align-items-center",children:[(0,v.jsxs)("div",{className:"fw-bolder me-5",children:[(0,v.jsx)("span",{className:"me-2",children:t.length})," Selected"]}),(0,v.jsx)("button",{type:"button",className:"btn btn-danger",onClick:(0,P.Z)((0,L.Z)().mark((function e(){return(0,L.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.mutateAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Delete Selected"})]})},H=function(){var e=b().updateState,t=(0,a.useState)(""),n=(0,r.Z)(t,2),s=n[0],l=n[1],c=(0,i.Nr)(s,150);return(0,a.useEffect)((function(){void 0!==c&&void 0!==s&&e((0,o.Z)({search:c},i.Xw))}),[c]),(0,v.jsx)("div",{className:"card-title",children:(0,v.jsxs)("div",{className:"d-flex align-items-center position-relative my-1",children:[(0,v.jsx)(i.D8,{path:"/media/icons/duotune/general/gen021.svg",className:"svg-icon-1 position-absolute ms-6"}),(0,v.jsx)("input",{type:"text","data-kt-user-table-filter":"search",className:"form-control form-control-solid w-250px ps-14",placeholder:"Search Question",value:s,onChange:function(e){return l(e.target.value)}})]})})},M=function(){var e=Z().selected;return(0,v.jsxs)("div",{className:"card-header border-0 pt-6",children:[(0,v.jsx)(H,{}),(0,v.jsx)("div",{className:"card-toolbar",children:e.length>0?(0,v.jsx)(A,{}):(0,v.jsx)(E,{})})]})},Q=n(1358),R=function(e){var t=e.column;return(0,v.jsx)(v.Fragment,{children:t.Header&&"string"===typeof t.Header?(0,v.jsx)("th",(0,o.Z)((0,o.Z)({},t.getHeaderProps()),{},{children:t.render("Header")})):t.render("Header")})},T=n(8182),D=function(e){var t=e.row;return(0,v.jsx)("tr",(0,o.Z)((0,o.Z)({},t.getRowProps()),{},{children:t.cells.map((function(e){return(0,v.jsx)("td",(0,o.Z)((0,o.Z)({},e.getCellProps()),{},{className:(0,T.Z)({"text-end min-w-100px":"actions"===e.column.id}),children:e.render("Cell")}))}))}))},U=function(e){var t,n,s=e.user;console.log(s,"user");var r=Z().setItemIdForUpdate,a=function(){r(s.id)};function i(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""}return(0,v.jsx)("div",{className:"d-flex align-items-center",children:(0,v.jsx)("div",{className:"d-flex flex-column",children:(null===s||void 0===s||null===(t=s.questions)||void 0===t?void 0:t.length)>0&&(null===s||void 0===s||null===(n=s.questions)||void 0===n?void 0:n.map((function(e,t){return(0,v.jsx)("a",{onClick:a,style:{cursor:"pointer"},className:"text-gray-800 text-hover-primary mb-1",children:i(e.question)},t)})))})})},O=function(e){var t=e.createdAt;return(0,v.jsx)("div",{className:"badge badge-light fw-bolder",children:t})},B=n(1830),V=n.n(B),X=function(e){var t=e.status,n=e.id,s=(0,a.useState)(t),i=(0,r.Z)(s,2),o=i[0],l=i[1];return(0,v.jsxs)(v.Fragment,{children:[" ",(0,v.jsx)("label",{className:"form-check form-check-custom form-check-solid form-switch mb-5",children:(0,v.jsx)("input",{className:"form-check-input",type:"checkbox",name:"status",checked:o,onChange:function(){var e=(0,P.Z)((0,L.Z)().mark((function e(t){return(0,L.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(t.currentTarget.checked),e.next=3,h({status:t.currentTarget.checked?1:0},n);case 3:V().fire({title:"Success!",text:"Status updated successfully!",icon:"success",confirmButtonText:"Okay"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})})]})},z=function(e){var t=e.id,n=Z().setItemIdForUpdate,s=k().query,r=(0,l.useQueryClient)();(0,a.useEffect)((function(){I.Mn.reinitialization()}),[]);var o=(0,l.useMutation)((function(){return e=t,u().delete("".concat(m,"/").concat(e)).then((function(){}));var e}),{onSuccess:function(){r.invalidateQueries(["".concat(i.vb.USERS_LIST,"-").concat(s)])}});return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("a",{href:"#",className:"btn btn-light btn-active-light-primary btn-sm","data-kt-menu-trigger":"click","data-kt-menu-placement":"bottom-end",children:(0,v.jsx)("i",{className:"bi bi-three-dots-vertical fs-5"})}),(0,v.jsxs)("div",{className:"menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bold fs-7 w-125px py-4","data-kt-menu":"true",children:[(0,v.jsx)("div",{className:"menu-item px-3",children:(0,v.jsx)("a",{className:"menu-link px-3",onClick:function(){n(t)},children:"Edit"})}),(0,v.jsx)("div",{className:"menu-item px-3",children:(0,v.jsx)("a",{className:"menu-link px-3","data-kt-users-table-filter":"delete_row",onClick:(0,P.Z)((0,L.Z)().mark((function e(){return(0,L.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.mutateAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Delete"})})]})]})},G=function(e){var t=e.id,n=Z(),s=n.selected,r=n.onSelect,i=(0,a.useMemo)((function(){return s.includes(t)}),[t,s]);return(0,v.jsx)("div",{className:"form-check form-check-sm form-check-custom form-check-solid",children:(0,v.jsx)("input",{className:"form-check-input",type:"checkbox","data-kt-check":i,"data-kt-check-target":"#kt_table_users .form-check-input",checked:i,onChange:function(){return r(t)}})})},J=function(e){var t=e.className,n=e.title,s=e.tableProps,r=s.column.id,l=b(),c=l.state,u=l.updateState,d=(0,a.useMemo)((function(){return c.sort&&c.sort===r}),[c,r]),m=(0,a.useMemo)((function(){return c.order}),[c]);return(0,v.jsx)("th",(0,o.Z)((0,o.Z)({},s.column.getHeaderProps()),{},{className:(0,T.Z)(t,d&&void 0!==m&&"table-sort-".concat(m)),style:{cursor:"pointer"},onClick:function(){if("actions"!==r&&"selection"!==r)if(d){if(d&&void 0!==m){if("asc"===m)return void u((0,o.Z)({sort:r,order:"desc"},i.Xw));u((0,o.Z)({sort:void 0,order:void 0},i.Xw))}}else u((0,o.Z)({sort:r,order:"asc"},i.Xw))},children:n}))},Y=function(e){var t=e.tableProps,n=Z(),s=n.isAllSelected,r=n.onSelectAll;return(0,v.jsx)("th",(0,o.Z)((0,o.Z)({},t.column.getHeaderProps()),{},{className:"w-10px pe-2",children:(0,v.jsx)("div",{className:"form-check form-check-sm form-check-custom form-check-solid me-3",children:(0,v.jsx)("input",{className:"form-check-input",type:"checkbox","data-kt-check":s,"data-kt-check-target":"#kt_table_users .form-check-input",checked:s,onChange:r})})}))},W=(0,a.createContext)({allCourses:[],allSubjects:[]}),K=function(e){var t=e.children,n=(0,a.useState)(),s=(0,r.Z)(n,2),i=s[0],o=s[1],l=(0,a.useState)(),c=(0,r.Z)(l,2),d=c[0],m=c[1];(0,a.useEffect)((function(){f()}),[]);var f=function(){var e=(0,P.Z)((0,L.Z)().mark((function e(){return(0,L.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().get("".concat("https://quiz.datacubeindia.com/common/course")).then((function(e){return e.data})).then((function(e){o(e)})).catch((function(e){console.log(e)}));case 2:return e.next=4,u().get("".concat("https://quiz.datacubeindia.com/common/subject")).then((function(e){return e.data})).then((function(e){m(e)})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,v.jsx)(W.Provider,{value:{allCourses:i,allSubjects:d},children:t})},$=function(){return(0,a.useContext)(W)},ee=function(e){var t,n,s=e.courses,r=$().allCourses,a=null===r||void 0===r?void 0:r.filter((function(e){return null===s||void 0===s?void 0:s.some((function(t){return t.course_id===e.id}))}));return a=null===(t=a)||void 0===t?void 0:t.flatMap((function(e){return[e.course_name]})),(0,v.jsx)("div",{className:"d-flex align-items-center",children:(0,v.jsx)("div",{className:"d-flex flex-column",children:null===(n=a)||void 0===n?void 0:n.join(", ")})})},te=function(e){var t=e.subject_id,n=$().allSubjects,s=null===n||void 0===n?void 0:n.find((function(e){return e.id==t}));return(0,v.jsx)("div",{className:"d-flex align-items-center",children:(0,v.jsx)("div",{className:"d-flex flex-column",children:null===s||void 0===s?void 0:s.subject_name})})},ne=function(e){var t=e.questions;return(0,v.jsxs)(v.Fragment,{children:[" ",null!==t&&void 0!==t&&t.every((function(e){var t;return 1==(null===e||void 0===e||null===(t=e.verified)||void 0===t?void 0:t.is_verified)}))?(0,v.jsx)("div",{className:"badge badge-light-success fw-bolder",children:"Yes"}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"badge badge-light-danger fw-bolder",children:"No"}),(0,v.jsx)("i",{className:"fas fa-exclamation-circle ms-1 fs-7","data-bs-toggle":"tooltip",title:"All questions must be verified!"})]})]})},se=[{Header:function(e){return(0,v.jsx)(Y,{tableProps:e})},id:"selection",Cell:function(e){var t=Object.assign({},e);return(0,v.jsx)(G,{id:t.data[t.row.index].id})}},{Header:function(e){return(0,v.jsx)(J,{tableProps:e,title:"Q.ID",className:"min-w-125px"})},accessor:"id"},{Header:function(e){return(0,v.jsx)(J,{tableProps:e,title:"Question",className:"min-w-125px"})},id:"question",Cell:function(e){var t=Object.assign({},e);return(0,v.jsx)(U,{user:t.data[t.row.index]})}},{Header:function(e){return(0,v.jsx)(J,{tableProps:e,title:"Courses",className:"min-w-125px"})},id:"courses",Cell:function(e){var t=Object.assign({},e);return(0,v.jsx)(ee,{courses:t.data[t.row.index].courses})}},{Header:function(e){return(0,v.jsx)(J,{tableProps:e,title:"Subject",className:"min-w-125px"})},id:"subject",Cell:function(e){var t=Object.assign({},e);return(0,v.jsx)(te,{subject_id:t.data[t.row.index].subject_id})}},{Header:function(e){return(0,v.jsx)(J,{tableProps:e,title:"Added Date",className:"min-w-125px"})},id:"createdAt",Cell:function(e){var t=Object.assign({},e);return(0,v.jsx)(O,{createdAt:t.data[t.row.index].createdAt})}},{Header:function(e){return(0,v.jsx)(J,{tableProps:e,title:"Active",className:"min-w-125px"})},id:"active",Cell:function(e){var t=Object.assign({},e);return(0,v.jsx)(X,{status:t.data[t.row.index].status,id:t.data[t.row.index].id})}},{Header:function(e){return(0,v.jsx)(J,{tableProps:e,title:"Verified",className:"min-w-125px"})},id:"verified",Cell:function(e){var t=Object.assign({},e);return(0,v.jsx)(ne,{questions:t.data[t.row.index].questions})}},{Header:function(e){return(0,v.jsx)(J,{tableProps:e,title:"Actions",className:"text-end min-w-100px"})},id:"actions",Cell:function(e){var t=Object.assign({},e);return(0,v.jsx)(z,{id:t.data[t.row.index].id})}}],re=function(){return(0,v.jsx)("div",{style:(0,o.Z)((0,o.Z)({},{borderRadius:"0.475rem",boxShadow:"0 0 50px 0 rgb(82 63 105 / 15%)",backgroundColor:"#fff",color:"#7e8299",fontWeight:"500",margin:"0",width:"auto",padding:"1rem 2rem",top:"calc(50% - 2rem)",left:"calc(50% - 4rem)"}),{},{position:"absolute",textAlign:"center"}),children:"Processing..."})},ae=function(){var e,t=function(){var e=(0,o.Z)({links:[]},i.Xw),t=k().response;return t&&t.payload&&t.payload.pagination?t.payload.pagination:e}(),n=y(),s=b().updateState;return(0,v.jsxs)("div",{className:"row",children:[(0,v.jsx)("div",{className:"col-sm-12 col-md-5 d-flex align-items-center justify-content-center justify-content-md-start"}),(0,v.jsx)("div",{className:"col-sm-12 col-md-7 d-flex align-items-center justify-content-center justify-content-md-end",children:(0,v.jsx)("div",{id:"kt_table_users_paginate",children:(0,v.jsx)("ul",{className:"pagination",children:null===(e=t.links)||void 0===e?void 0:e.map((function(e){return(0,v.jsx)("li",{className:(0,T.Z)("page-item",{active:t.page===e.page,disabled:n,previous:"&laquo; Previous"===e.label,next:"Next &raquo;"===e.label}),children:(0,v.jsx)("a",{className:"page-link",onClick:function(){var r;(r=e.page)&&!n&&t.page!==r&&s({page:r,items_per_page:t.items_per_page||10})},dangerouslySetInnerHTML:{__html:e.label},style:{cursor:"pointer"}})},e.label)}))})})})]})},ie=function(){var e=w(),t=y(),n=(0,a.useMemo)((function(){return e}),[e]),s=(0,a.useMemo)((function(){return se}),[]),r=(0,Q.useTable)({columns:s,data:n}),l=r.getTableProps,c=r.getTableBodyProps,u=r.headers,d=r.rows,m=r.prepareRow;return(0,v.jsxs)(i.mN,{className:"py-4",children:[(0,v.jsx)("div",{className:"table-responsive",children:(0,v.jsxs)("table",(0,o.Z)((0,o.Z)({id:"kt_table_users",className:"table align-middle table-row-dashed fs-6 gy-5 dataTable no-footer"},l()),{},{children:[(0,v.jsx)("thead",{children:(0,v.jsx)("tr",{className:"text-start text-muted fw-bolder fs-7 text-uppercase gs-0",children:u.map((function(e){return(0,v.jsx)(R,{column:e},e.id)}))})}),(0,v.jsx)("tbody",(0,o.Z)((0,o.Z)({className:"text-gray-600 fw-bold"},c()),{},{children:d.length>0?d.map((function(e,t){return m(e),(0,v.jsx)(D,{row:e},"row-".concat(t,"-").concat(e.id))})):(0,v.jsx)("tr",{children:(0,v.jsx)("td",{colSpan:7,children:(0,v.jsx)("div",{className:"d-flex text-center w-100 align-content-center justify-content-center",children:"No matching records found"})})})}))]}))}),(0,v.jsx)(ae,{}),t&&(0,v.jsx)(re,{})]})},oe=function(){var e=Z().setItemIdForUpdate;return(0,v.jsxs)("div",{className:"modal-header",children:[(0,v.jsx)("h2",{className:"fw-bolder",children:"Add Question"}),(0,v.jsx)("div",{className:"btn btn-icon btn-sm btn-active-icon-primary","data-kt-users-modal-action":"close",onClick:function(){return e(void 0)},style:{cursor:"pointer"},children:(0,v.jsx)(i.D8,{path:"/media/icons/duotune/arrows/arr061.svg",className:"svg-icon-1"})})]})},le=n(5173),ce=n(6863),ue=[ce.Ry().shape({question_type:ce.Z_().required("question_type is required").label("question_type"),level:ce.Z_().required("level is required").label("level"),courses:ce.IX().min(1),subject_id:ce.Rx().required("subject_id is required").label("subject_id"),marks:ce.Ry().shape({marks:ce.Rx().required("Marks is required"),negitive_mark:ce.Rx().required("Negitive Mark is required")})}),ce.Ry().shape({questions:ce.IX().of(ce.Ry().shape({question:ce.Z_().required("Question is required"),solution:ce.Ry().shape({solution:ce.Z_().required("Solution is required")}),hint:ce.Ry().shape({hint:ce.Z_().required("Hint is required")})}))})],de={subject_id:void 0,question_type:"",level:"",courses:[],marks:{marks:null,negitive_mark:null},questions:[{question_bank_id:null,question:"",language:"HINDI",hint:{hint:""},options:[{option:"",right_option:0}],solution:{solution:""},verified:{is_verified:null,verified_by:""}},{question_bank_id:null,question:"",language:"ENGLISH",hint:{hint:""},options:[{option:"",right_option:0}],solution:{solution:""},verified:{is_verified:null,verified_by:""}}]},me=n(4136),fe=function(e){var t=e.setFieldValue,n=e.values,s=(e.touched,e.setFieldError,e.errors);console.log(s,"errors");var i=$(),o=i.allCourses,l=i.allSubjects,c=(0,a.useState)(o),u=(0,r.Z)(c,2),d=u[0],m=(u[1],(0,a.useState)(n.id?l:[])),f=(0,r.Z)(m,2),x=f[0],h=f[1],p=(0,a.useState)(null),j=(0,r.Z)(p,2),b=j[0],g=j[1];(0,a.useEffect)((function(){if(n.id&&d.length>0){var e=d.filter((function(e){return null===n||void 0===n?void 0:n.courses.some((function(t){return t.course_id===e.id}))}));g(e);var s=n.courses.flatMap((function(e){return[e.course_id]}));N(s),t("courses",e)}}),[d]);var N=function(){var e=(0,P.Z)((0,L.Z)().mark((function e(t){var n;return(0,L.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null===l||void 0===l?void 0:l.filter((function(e){return t.some((function(t){return t==e.course_id}))})),h(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,v.jsxs)("div",{className:"w-100",children:[(0,v.jsxs)("div",{className:"d-flex flex-wrap gap-5 mb-10",children:[(0,v.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,v.jsx)("label",{className:"d-flex align-items-center form-label",children:(0,v.jsx)("span",{className:"required",children:"Question Type"})}),(0,v.jsxs)(le.gN,{as:"select",name:"question_type",className:"form-select mb-2","data-control":"select2","data-hide-search":"true",placeholder:"Select an option",children:[(0,v.jsx)("option",{}),(0,v.jsx)("option",{children:"Single"}),(0,v.jsx)("option",{children:"MCQ"})]}),(0,v.jsx)("div",{className:"text-danger",children:(0,v.jsx)(le.Bc,{name:"question_type"})})]}),(0,v.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,v.jsx)("label",{className:"d-flex align-items-center form-label",children:(0,v.jsx)("span",{className:"required",children:"Question Level"})}),(0,v.jsxs)(le.gN,{as:"select",name:"level",className:"form-select mb-2","data-control":"select2","data-hide-search":"true",placeholder:"Select an option",children:[(0,v.jsx)("option",{}),(0,v.jsx)("option",{children:"Easy"}),(0,v.jsx)("option",{children:"Moderate"}),(0,v.jsx)("option",{children:"Difficult"})]}),(0,v.jsx)("div",{className:"text-danger",children:(0,v.jsx)(le.Bc,{name:"level"})})]})]}),(0,v.jsxs)("div",{className:"d-flex flex-wrap gap-5 mb-10",children:[(0,v.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,v.jsx)("label",{className:"d-flex align-items-center form-label",children:(0,v.jsx)("span",{className:"required",children:"Courses"})}),(0,v.jsx)(me.ZP,{isMulti:!0,name:"courses",options:d,className:"basic-multi-select",classNamePrefix:"select",value:b,onChange:function(e,n){var s=e.flatMap((function(e,t){return[e.id]}));N(s),t("courses",e),g(e)},getOptionLabel:function(e){return e.course_name},getOptionValue:function(e){return e.id}}),(0,v.jsx)("div",{className:"text-danger mt-2",children:s.courses})]}),(0,v.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,v.jsx)("label",{className:"d-flex align-items-center form-label",children:(0,v.jsx)("span",{className:"required",children:"Subject"})}),(0,v.jsxs)(le.gN,{as:"select",name:"subject_id",className:"form-select mb-2","data-control":"select2","data-hide-search":"true",placeholder:"Select an option",children:[(0,v.jsx)("option",{}),x.map((function(e,t){return(0,v.jsx)("option",{value:e.id,children:e.subject_name},t)}))]}),(0,v.jsx)("div",{className:"text-danger",children:(0,v.jsx)(le.Bc,{name:"subject_id"})})]})]}),(0,v.jsxs)("div",{className:"d-flex flex-wrap gap-5 mb-10",children:[(0,v.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,v.jsx)("label",{className:"fs-6 fw-bold form-label required",children:"Marks"}),(0,v.jsx)(le.gN,{name:"marks.marks",type:"number",className:"form-control mb-2",placeholder:"Enter Question Marks"}),(0,v.jsx)("div",{className:"text-danger mt-2",children:(0,v.jsx)(le.Bc,{name:"marks.marks"})})]}),(0,v.jsxs)("div",{className:"fv-row w-100 flex-md-root",children:[(0,v.jsx)("label",{className:"d-flex align-items-center form-label",children:(0,v.jsx)("span",{className:"required",children:"Negitive Marks"})}),(0,v.jsx)(le.gN,{name:"marks.negitive_mark",type:"number",className:"form-control mb-2",placeholder:"Enter negitive mark"}),(0,v.jsx)("div",{className:"text-danger mt-2",children:(0,v.jsx)(le.Bc,{name:"marks.negitive_mark"})})]})]})]})},xe=n(2982),he=n(6770),ve=n.n(he),pe=n(8922),je=function(e){var t,n,s,i,l,c=e.values,d=e.setFieldValue,m=e.selectedLang,f=e.setSelectedLang,x=e.errors;e.roleForEdit;console.log(c,"values");var h=(0,a.useState)(null),p=(0,r.Z)(h,2),j=p[0],b=p[1],g=(0,a.useState)(null),N=(0,r.Z)(g,2),k=N[0],w=N[1],y=(0,a.useState)(null),_=(0,r.Z)(y,2),q=_[0],Z=_[1],S=(0,a.useState)(null),C=(0,r.Z)(S,2),I=C[0],F=C[1],E=(0,a.useState)(null),A=(0,r.Z)(E,2),H=(A[0],A[1],(0,a.useRef)(null));(0,a.useRef)(null),(0,a.useRef)(null);(0,a.useEffect)((function(){f(0)}),[]),(0,a.useEffect)((function(){var e,t,n,s;null!=m&&(b((null===(e=c.questions[m])||void 0===e?void 0:e.options)||[{option:"",right_option:0}]),Z((null===(t=c.questions[m])||void 0===t?void 0:t.question)||""),F((null===(n=c.questions[m])||void 0===n?void 0:n.solution)||{solution:""}),w((null===(s=c.questions[m])||void 0===s?void 0:s.hint)||{hint:""}),d("questions[".concat(m,"].verified"),{is_verified:null,verified_by:""}),d("questions[".concat(m,"].question_bank_id"),c.id),d("questions[".concat(m,"].language"),0==m?"HINDI":"ENGLISH"))}),[m]),(0,a.useEffect)((function(){var e;null!=q&&q!=(null===c||void 0===c||null===(e=c.questions[m])||void 0===e?void 0:e.question)&&d("questions[".concat(m,"].question"),q)}),[q]),(0,a.useEffect)((function(){var e,t;null!=I&&I.solution!=(null===(e=c.questions[m])||void 0===e||null===(t=e.solution)||void 0===t?void 0:t.solution)&&d("questions[".concat(m,"].solution"),I)}),[I]),(0,a.useEffect)((function(){var e,t;null!=k&&k.hint!=(null===(e=c.questions[m])||void 0===e||null===(t=e.hint)||void 0===t?void 0:t.hint)&&d("questions[".concat(m,"].hint"),k)}),[k]),(0,a.useEffect)((function(){var e;(null===j||void 0===j?void 0:j.length)>0&&j!=(null===(e=c.questions[m])||void 0===e?void 0:e.options)&&d("questions[".concat(m,"].options"),j)}),[j]),(0,a.useEffect)((function(){console.log(j,"options")}),[j]);var M=function(e){var t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","image/*"),t.click(),t.onchange=(0,P.Z)((0,L.Z)().mark((function e(){var n,s;return(0,L.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===t||void 0===t?void 0:t.files[0],(s=new FormData).append("image",n),e.next=5,u().post("".concat(pe.T,"/upload"),s).then((function(e){var t=H.current.getEditor().getSelection();H.current.getEditor().insertEmbed(null===t||void 0===t?void 0:t.index,"image",e.data)})).catch((function(e){console.log(e,"err")}));case 5:case"end":return e.stop()}}),e)})))},Q=(0,a.useMemo)((function(){return{toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]],handlers:{image:M}}}}),[]),R=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image"];return(0,v.jsxs)("div",{className:"w-100",children:[(0,v.jsxs)("div",{className:"fv-row mb-10",children:[(0,v.jsx)("label",{className:"form-label",children:"Select Language"}),(0,v.jsxs)(le.gN,{as:"select",name:"questions[".concat(m,"].language"),className:"form-select mb-2","data-control":"select2","data-hide-search":"true","data-placeholder":"Select an option",onChange:function(e){f(e.target.value)},value:m,children:[(0,v.jsx)("option",{value:0,children:"HINDI"}),(0,v.jsx)("option",{value:1,children:"ENGLISH"})]}),(0,v.jsx)("div",{className:"text-danger mt-2",children:(0,v.jsx)(le.Bc,{name:"question.language"})})]}),null!=m&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"fv-row w-100 mb-10",children:[(0,v.jsx)("label",{className:"form-label required",children:"Question"}),(0,v.jsx)(ve(),{onChange:function(e,t,n,s){Z(e)},id:"question",value:q,formats:R,modules:Q,ref:H}),(null===x||void 0===x?void 0:x.questions)&&(0,v.jsx)("div",{className:"text-danger mt-2",children:null===x||void 0===x||null===(t=x.questions[m])||void 0===t?void 0:t.question})]}),(0,v.jsxs)("div",{className:"fv-row w-100 mb-10",children:[(0,v.jsx)("label",{className:"form-label required",children:"Solution"}),(0,v.jsx)(ve(),{value:null===I||void 0===I?void 0:I.solution,onChange:function(e,t,n,s){F((0,o.Z)((0,o.Z)({},I),{},{solution:e}))},id:"solution",formats:R,modules:Q,ref:H}),(null===x||void 0===x?void 0:x.questions)&&(0,v.jsx)("div",{className:"text-danger mt-2",children:null===x||void 0===x||null===(n=x.questions[m])||void 0===n||null===(s=n.solution)||void 0===s?void 0:s.solution})]}),(0,v.jsxs)("div",{className:"fv-row w-100 mb-10",children:[(0,v.jsx)("label",{className:"form-label required",children:"Question Hint"}),(0,v.jsx)("textarea",{rows:3,className:"form-control mb-2",onChange:function(e){w((0,o.Z)((0,o.Z)({},k),{},{hint:e.target.value}))},value:null===k||void 0===k?void 0:k.hint}),(null===x||void 0===x?void 0:x.questions)&&(0,v.jsx)("div",{className:"text-danger mt-2",children:null===x||void 0===x||null===(i=x.questions[m])||void 0===i||null===(l=i.hint)||void 0===l?void 0:l.hint})]}),(0,v.jsx)("div",{className:"fv-row w-100 mb-10",children:(0,v.jsxs)("div",{id:"kt_ecommerce_add_category_conditions",children:[(0,v.jsxs)("div",{"data-repeater-item":"",className:"form-group d-flex flex-wrap gap-5 mb-5",children:[(0,v.jsx)("div",{className:"w-100 mw-100 w-550px",children:(0,v.jsx)("label",{className:"form-label required",children:"Options"})}),(0,v.jsx)("label",{className:"form-label w-50px",children:"Right Option"}),(0,v.jsx)("label",{className:"form-label w-40px",children:"Remove"})]}),null===j||void 0===j?void 0:j.map((function(e,t){return(0,v.jsx)("div",{className:"form-group",children:(0,v.jsx)("div",{"data-repeater-list":"kt_ecommerce_add_category_conditions",className:"d-flex flex-column gap-3",children:(0,v.jsxs)("div",{"data-repeater-item":"",className:"form-group d-flex flex-wrap mb-5 gap-10",children:[(0,v.jsx)("div",{className:"w-100 mw-100 w-550px",children:(0,v.jsx)(ve(),{value:e.option,onChange:function(e,n,s,r){if("user"==s){var a=(0,xe.Z)(j);a[t]=(0,o.Z)((0,o.Z)({},a[t]),{},{option:e}),b(a)}},id:"option_".concat(t),formats:R,modules:Q,ref:H})}),"MCQ"==c.question_type?(0,v.jsx)(le.gN,{className:"form-check-input",type:"checkbox",checked:1==e.right_option,name:"right_option",onChange:function(e){var n=(0,xe.Z)(j);n[t]=(0,o.Z)((0,o.Z)({},n[t]),{},{right_option:e.currentTarget.checked?1:0}),b(n)}}):(0,v.jsx)("input",{name:"right_option",type:"radio",value:t,onChange:function(){var e=(0,P.Z)((0,L.Z)().mark((function e(n){var s;return(0,L.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,xe.Z)(j),e.next=3,s.map((function(e){e.right_option=0}));case 3:s[t]=(0,o.Z)((0,o.Z)({},s[t]),{},{right_option:1}),b(s);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),checked:1==e.right_option,id:"right_option_".concat(t),className:(0,T.Z)("form-check-input mb-3 mb-lg-0"),autoComplete:"off"}),(0,v.jsx)("button",{type:"button",onClick:function(){var e=(0,xe.Z)(j);e.splice(t,1),b(e)},"data-repeater-delete":"",className:"btn btn-sm btn-icon btn-light-danger",children:(0,v.jsx)("span",{className:"svg-icon svg-icon-2",children:(0,v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,v.jsx)("rect",{opacity:"0.5",x:"7.05025",y:"15.5356",width:"12",height:"2",rx:"1",transform:"rotate(-45 7.05025 15.5356)",fill:"currentColor"}),(0,v.jsx)("rect",{x:"8.46447",y:"7.05029",width:"12",height:"2",rx:"1",transform:"rotate(45 8.46447 7.05029)",fill:"currentColor"})]})})})]})})},t)})),(0,v.jsx)("div",{className:"form-group mt-5",children:(0,v.jsxs)("button",{type:"button",onClick:function(){return b([].concat((0,xe.Z)(j),[{option:"",right_option:0}]))},"data-repeater-create":"",className:"btn btn-sm btn-light-primary",children:[(0,v.jsx)("span",{className:"svg-icon svg-icon-2",children:(0,v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,v.jsx)("rect",{opacity:"0.5",x:"11",y:"18",width:"12",height:"2",rx:"1",transform:"rotate(-90 11 18)",fill:"currentColor"}),(0,v.jsx)("rect",{x:"6",y:"11",width:"12",height:"2",rx:"1",fill:"currentColor"})]})}),"Add another option"]})})]})})," "]})]})},be=function(e){var t=e.role,n=e.isUserLoading,s=(0,a.useRef)(null),l=(0,a.useRef)(null),c=Z().setItemIdForUpdate,u=k().refetch,d=(0,a.useState)(!1),m=(0,r.Z)(d,2),h=m[0],p=m[1],j=(0,a.useState)(ue[0]),b=(0,r.Z)(j,2),g=b[0],N=b[1],w=(0,a.useState)((0,o.Z)((0,o.Z)({},t),{},{subject_id:t.subject_id||de.subject_id,question_type:t.question_type||de.question_type,level:t.level||de.level,questions:t.questions||de.questions,courses:t.courses||de.courses,marks:t.marks||de.marks})),y=(0,r.Z)(w,2),_=y[0],q=(y[1],(0,a.useState)(null)),S=(0,r.Z)(q,2),C=S[0],F=S[1];(0,a.useEffect)((function(){s.current&&E()}),[s]);var E=function(){l.current=I.vO.createInsance(s.current)},A=function(){l.current&&(p(l.current.currentStepIndex===l.current.totatStepsNumber-1),l.current.goPrev(),N(ue[l.current.currentStepIndex-1]))},H=function(){var e=(0,P.Z)((0,L.Z)().mark((function e(t,n){var s;return(0,L.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.current){e.next=2;break}return e.abrupt("return");case 2:if(p(l.current.currentStepIndex===l.current.totatStepsNumber-1),N(ue[l.current.currentStepIndex]),l.current.currentStepIndex===l.current.totatStepsNumber){e.next=13;break}return e.next=7,x(t);case 7:s=e.sent,n.setFieldValue("id",null===s||void 0===s?void 0:s.id),n.setFieldValue("marks",null===s||void 0===s?void 0:s.marks),l.current.goNext(),e.next=26;break;case 13:return e.prev=13,e.next=16,f(t.questions[C]);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(13),console.error(e.t0);case 21:return e.prev=21,n.resetForm(),!0&&u(),c(void 0),V().fire({title:"Success!",text:"Question ".concat(t.id?"Updated":"Created","!"),icon:"success",confirmButtonText:"Okay"}),e.finish(21);case 26:case"end":return e.stop()}}),e,null,[[13,18,21,26]])})));return function(t,n){return e.apply(this,arguments)}}();return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{ref:s,className:"stepper stepper-links d-flex flex-column",id:"kt_create_account_stepper",children:[(0,v.jsxs)("div",{className:"stepper-nav mb-5",children:[(0,v.jsx)("div",{className:"stepper-item current","data-kt-stepper-element":"nav",children:(0,v.jsx)("h3",{className:"stepper-title",children:"Question Type"})}),(0,v.jsx)("div",{className:"stepper-item","data-kt-stepper-element":"nav",children:(0,v.jsx)("h3",{className:"stepper-title",children:"Question"})})]}),(0,v.jsx)(le.J9,{validationSchema:g,initialValues:_,onSubmit:H,validateOnChange:!1,children:function(e){var t=e.setFieldValue,n=e.values,s=e.touched,r=e.setFieldError,a=e.errors;return(0,v.jsxs)(le.l0,{className:"mx-auto mw-700px w-100 pt-5 pb-10",id:"kt_create_account_form",children:[(0,v.jsx)("div",{className:"current","data-kt-stepper-element":"content",children:(0,v.jsx)(fe,{setFieldValue:t,values:n,touched:s,setFieldError:r,errors:a})}),(0,v.jsx)("div",{"data-kt-stepper-element":"content",children:(0,v.jsx)(je,{setFieldValue:t,values:n,selectedLang:C,setSelectedLang:F,roleForEdit:_,errors:a})}),(0,v.jsxs)("div",{className:"d-flex flex-stack pt-15",children:[(0,v.jsx)("div",{className:"mr-2",children:(0,v.jsxs)("button",{onClick:A,type:"button",className:"btn btn-lg btn-light-primary me-3","data-kt-stepper-action":"previous",children:[(0,v.jsx)(i.D8,{path:"/media/icons/duotune/arrows/arr063.svg",className:"svg-icon-4 me-1"}),"Back"]})}),(0,v.jsx)("div",{children:(0,v.jsx)("button",{type:"submit",className:"btn btn-lg btn-primary me-3",children:(0,v.jsxs)("span",{className:"indicator-label",children:[!h&&"Continue",h&&"Submit",(0,v.jsx)(i.D8,{path:"/media/icons/duotune/arrows/arr064.svg",className:"svg-icon-3 ms-2 me-0"})]})})})]})]})}})]}),n&&(0,v.jsx)(re,{})]})},ge=function(){var e=Z(),t=e.itemIdForUpdate,n=e.setItemIdForUpdate,s=(0,i.UE)(t),r=(0,l.useQuery)("".concat(i.vb.USERS_LIST,"-user-").concat(t),(function(){return e=t,u().get("".concat(m,"/").concat(e)).then((function(e){return e.data})).then((function(e){return e.data}));var e}),{cacheTime:0,enabled:s,onError:function(e){n(void 0),console.error(e)}}),a=r.isLoading,o=r.data,c=r.error;return t?a||c||!o?null:(0,v.jsx)(be,{isUserLoading:a,role:o}):(0,v.jsx)(be,{isUserLoading:a,role:{id:void 0}})},Ne=function(){return(0,a.useEffect)((function(){return document.body.classList.add("modal-open"),function(){document.body.classList.remove("modal-open")}}),[]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"modal fade show d-block",id:"kt_modal_add_user",role:"dialog",tabIndex:-1,"aria-modal":"true",children:(0,v.jsx)("div",{className:"modal-dialog modal-dialog-centered mw-900px",children:(0,v.jsxs)("div",{className:"modal-content",children:[(0,v.jsx)(oe,{}),(0,v.jsx)("div",{className:"modal-body scroll-y mx-5 mx-xl-15",children:(0,v.jsx)(ge,{})})]})})}),(0,v.jsx)("div",{className:"modal-backdrop fade show"})]})},ke=function(){var e=Z().itemIdForUpdate;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(i.O7,{children:[(0,v.jsx)(M,{}),(0,v.jsx)(ie,{})]}),void 0!==e&&(0,v.jsx)(Ne,{})]})},we=function(){return(0,v.jsx)(j,{children:(0,v.jsx)(N,{children:(0,v.jsx)(q,{children:(0,v.jsx)(K,{children:(0,v.jsx)(ke,{})})})})})},ye=[{title:"Question Bank",path:"/questions",isSeparator:!1,isActive:!1},{title:"",path:"",isSeparator:!0,isActive:!1}],_e=function(){return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(s.V1,{breadcrumbs:ye,children:"Questions list"}),(0,v.jsx)(we,{})]})}},8922:function(e,t,n){n.d(t,{T:function(){return s}});var s="https://quiz.datacubeindia.com/common/option"}}]);
//# sourceMappingURL=923.2d8a14b5.chunk.js.map