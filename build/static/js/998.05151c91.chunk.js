"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[998],{7998:function(e,t,n){n.r(t),n.d(t,{default:function(){return ue}});var s=n(4880),a=n(885),r=n(2791),i=n(2930),c=n(1413),o=n(1933),l=n(4569),d=n.n(l),u="https://quiz.datacubeindia.com/common",m="".concat(u,"/role"),f=function(e){return d().post(m,e).then((function(e){return e.data})).then((function(e){return e.data}))},h=function(e){return console.log(e,"role"),d().put("".concat(m,"/").concat(e.id),e).then((function(e){return e.data})).then((function(e){return e.data}))},x=n(184),p=(0,r.createContext)(i.vv),v=function(e){var t=e.children,n=(0,r.useState)(i.vv.state),s=(0,a.Z)(n,2),o=s[0],l=s[1];return(0,x.jsx)(p.Provider,{value:{state:o,updateState:function(e){var t=(0,c.Z)((0,c.Z)({},o),e);l(t)}},children:t})},b=function(){return(0,r.useContext)(p)},j=(0,i.gl)(i.B2),g=function(e){var t=e.children,n=b().state,s=(0,r.useState)((0,i.gJ)(n)),c=(0,a.Z)(s,2),l=c[0],u=c[1],f=(0,r.useMemo)((function(){return(0,i.gJ)(n)}),[n]);(0,r.useEffect)((function(){l!==f&&u(f)}),[f]);var h=(0,o.useQuery)("".concat(i.vb.USERS_LIST,"-").concat(l),(function(){return function(e){return d().get("".concat(m,"?").concat(e)).then((function(e){return e.data}))}(l)}),{cacheTime:0,keepPreviousData:!0,refetchOnWindowFocus:!1}),p=h.isFetching,v=h.refetch,g=h.data;return(0,x.jsx)(j.Provider,{value:{isLoading:p,refetch:v,response:g,query:l},children:t})},k=function(){return(0,r.useContext)(j)},N=function(){var e=k().response;return e&&(null===e||void 0===e?void 0:e.data)||[]},y=function(){return k().isLoading},w=(0,r.createContext)(i.px),_=function(e){var t=e.children,n=(0,r.useState)(i.px.selected),s=(0,a.Z)(n,2),c=s[0],o=s[1],l=(0,r.useState)(i.px.itemIdForUpdate),d=(0,a.Z)(l,2),u=d[0],m=d[1],f=k().isLoading,h=N(),p=(0,r.useMemo)((function(){return(0,i.Qx)(f,h)}),[f,h]),v=(0,r.useMemo)((function(){return(0,i.HX)(h,c)}),[h,c]);return(0,x.jsx)(w.Provider,{value:{selected:c,itemIdForUpdate:u,setItemIdForUpdate:m,disabled:p,isAllSelected:v,onSelect:function(e){(0,i.G8)(e,c,o)},onSelectAll:function(){(0,i.ir)(v,o,h)},clearSelected:function(){o([])}},children:t})},Z=function(){return(0,r.useContext)(w)},S=n(6492),C=function(){var e=b().updateState,t=k().isLoading,n=(0,r.useState)(),s=(0,a.Z)(n,2),o=s[0],l=s[1],d=(0,r.useState)(),u=(0,a.Z)(d,2),m=u[0],f=u[1];(0,r.useEffect)((function(){S.Mn.reinitialization()}),[]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("button",{disabled:t,type:"button",className:"btn btn-light-primary me-3","data-kt-menu-trigger":"click","data-kt-menu-placement":"bottom-end",children:[(0,x.jsx)(i.D8,{path:"/media/icons/duotune/general/gen031.svg",className:"svg-icon-2"}),"Filter"]}),(0,x.jsxs)("div",{className:"menu menu-sub menu-sub-dropdown w-300px w-md-325px","data-kt-menu":"true",children:[(0,x.jsx)("div",{className:"px-7 py-5",children:(0,x.jsx)("div",{className:"fs-5 text-dark fw-bolder",children:"Filter Options"})}),(0,x.jsx)("div",{className:"separator border-gray-200"}),(0,x.jsxs)("div",{className:"px-7 py-5","data-kt-user-table-filter":"form",children:[(0,x.jsxs)("div",{className:"mb-10",children:[(0,x.jsx)("label",{className:"form-label fs-6 fw-bold",children:"Role:"}),(0,x.jsxs)("select",{className:"form-select form-select-solid fw-bolder","data-kt-select2":"true","data-placeholder":"Select option","data-allow-clear":"true","data-kt-user-table-filter":"role","data-hide-search":"true",onChange:function(e){return l(e.target.value)},value:o,children:[(0,x.jsx)("option",{value:""}),(0,x.jsx)("option",{value:"Administrator",children:"Administrator"}),(0,x.jsx)("option",{value:"Analyst",children:"Analyst"}),(0,x.jsx)("option",{value:"Developer",children:"Developer"}),(0,x.jsx)("option",{value:"Support",children:"Support"}),(0,x.jsx)("option",{value:"Trial",children:"Trial"})]})]}),(0,x.jsxs)("div",{className:"mb-10",children:[(0,x.jsx)("label",{className:"form-label fs-6 fw-bold",children:"Last login:"}),(0,x.jsxs)("select",{className:"form-select form-select-solid fw-bolder","data-kt-select2":"true","data-placeholder":"Select option","data-allow-clear":"true","data-kt-user-table-filter":"two-step","data-hide-search":"true",onChange:function(e){return f(e.target.value)},value:m,children:[(0,x.jsx)("option",{value:""}),(0,x.jsx)("option",{value:"Yesterday",children:"Yesterday"}),(0,x.jsx)("option",{value:"20 mins ago",children:"20 mins ago"}),(0,x.jsx)("option",{value:"5 hours ago",children:"5 hours ago"}),(0,x.jsx)("option",{value:"2 days ago",children:"2 days ago"})]})]}),(0,x.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,x.jsx)("button",{type:"button",disabled:t,onClick:function(){e((0,c.Z)({filter:{role:o,last_login:m}},i.Xw))},className:"btn btn-light btn-active-light-primary fw-bold me-2 px-6","data-kt-menu-dismiss":"true","data-kt-user-table-filter":"reset",children:"Reset"}),(0,x.jsx)("button",{disabled:t,type:"button",onClick:function(){e((0,c.Z)({filter:void 0},i.Xw))},className:"btn btn-primary fw-bold px-6","data-kt-menu-dismiss":"true","data-kt-user-table-filter":"filter",children:"Apply"})]})]})]})]})},F=n(8472),P=function(e){var t=e.csvData,n=e.fileName;return(0,x.jsxs)("button",{type:"button",className:"btn btn-light-primary me-3",children:[(0,x.jsx)(i.D8,{path:"/media/icons/duotune/arrows/arr078.svg",className:"svg-icon-2"}),(0,x.jsx)(F.CSVLink,{data:t,filename:n,children:"Export"})]})},I=function(){var e=Z().setItemIdForUpdate,t=N();return(0,x.jsxs)("div",{className:"d-flex justify-content-end","data-kt-user-table-toolbar":"base",children:[(0,x.jsx)(C,{}),(0,x.jsx)(P,{csvData:t,fileName:"roles"}),(0,x.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){e(null)},children:[(0,x.jsx)(i.D8,{path:"/media/icons/duotune/arrows/arr075.svg",className:"svg-icon-2"}),"Add Role"]})]})},A=n(4165),U=n(5861),T=function(){var e=Z(),t=e.selected,n=e.clearSelected,s=(0,o.useQueryClient)(),a=k().query,r=(0,o.useMutation)((function(){return function(e){var t=e.map((function(e){return d().delete("".concat(m,"/").concat(e))}));return d().all(t).then((function(){}))}(t)}),{onSuccess:function(){s.invalidateQueries(["".concat(i.vb.USERS_LIST,"-").concat(a)]),n()}});return(0,x.jsxs)("div",{className:"d-flex justify-content-end align-items-center",children:[(0,x.jsxs)("div",{className:"fw-bolder me-5",children:[(0,x.jsx)("span",{className:"me-2",children:t.length})," Selected"]}),(0,x.jsx)("button",{type:"button",className:"btn btn-danger",onClick:(0,U.Z)((0,A.Z)().mark((function e(){return(0,A.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.mutateAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Delete Selected"})]})},R=function(){var e=b().updateState,t=(0,r.useState)(""),n=(0,a.Z)(t,2),s=n[0],o=n[1],l=(0,i.Nr)(s,150);return console.log(l,"debounceSearchTerm"),(0,r.useEffect)((function(){void 0!==l&&void 0!==s&&e((0,c.Z)({search:l},i.Xw))}),[l]),(0,x.jsx)("div",{className:"card-title",children:(0,x.jsxs)("div",{className:"d-flex align-items-center position-relative my-1",children:[(0,x.jsx)(i.D8,{path:"/media/icons/duotune/general/gen021.svg",className:"svg-icon-1 position-absolute ms-6"}),(0,x.jsx)("input",{type:"text","data-kt-user-table-filter":"search",className:"form-control form-control-solid w-250px ps-14",placeholder:"Search Role",value:s,onChange:function(e){return o(e.target.value)}})]})})},L=function(){var e=Z().selected;return(0,x.jsxs)("div",{className:"card-header border-0 pt-6",children:[(0,x.jsx)(R,{}),(0,x.jsx)("div",{className:"card-toolbar",children:e.length>0?(0,x.jsx)(T,{}):(0,x.jsx)(I,{})})]})},E=n(1358),M=function(e){var t=e.column;return(0,x.jsx)(x.Fragment,{children:t.Header&&"string"===typeof t.Header?(0,x.jsx)("th",(0,c.Z)((0,c.Z)({},t.getHeaderProps()),{},{children:t.render("Header")})):t.render("Header")})},D=n(8182),H=function(e){var t=e.row;return(0,x.jsx)("tr",(0,c.Z)((0,c.Z)({},t.getRowProps()),{},{children:t.cells.map((function(e){return(0,x.jsx)("td",(0,c.Z)((0,c.Z)({},e.getCellProps()),{},{className:(0,D.Z)({"text-end min-w-100px":"actions"===e.column.id}),children:e.render("Cell")}))}))}))},B=function(e){var t=e.user,n=Z().setItemIdForUpdate;return(0,x.jsx)("div",{className:"d-flex align-items-center",children:(0,x.jsx)("div",{className:"d-flex flex-column",children:(0,x.jsx)("a",{onClick:function(){n(t.id)},style:{cursor:"pointer"},className:"text-gray-800 text-hover-primary mb-1",children:t.name})})})},O=function(e){var t=e.assigned_to;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"card-body d-flex flex-column justify-content-end pe-0",children:(0,x.jsxs)("div",{className:"symbol-group symbol-hover flex-nowrap",children:[null===t||void 0===t?void 0:t.slice(0,5).map((function(e,t){return(0,x.jsx)("div",{className:"symbol symbol-35px symbol-circle","data-bs-toggle":"tooltip",title:"".concat(e.first_name," ").concat(e.last_name),children:null==(null===e||void 0===e?void 0:e.profile_image)?(0,x.jsx)("span",{className:"symbol-label text-inverse-warning fw-bolder",style:{backgroundColor:"#".concat(Math.floor(16777215*Math.random()).toString(16))},children:null===e||void 0===e?void 0:e.first_name.charAt(0)}):(0,x.jsx)("img",{alt:"Pic",src:e.profile_image})},t)})),(null===t||void 0===t?void 0:t.length)>5&&(0,x.jsx)("a",{href:"#",className:"symbol symbol-35px symbol-circle","data-bs-toggle":"modal","data-bs-target":"#kt_modal_view_users",children:(0,x.jsxs)("span",{className:"symbol-label bg-light text-gray-400 fs-8 fw-bolder",children:["+",(null===t||void 0===t?void 0:t.length)-5]})})]})}),(0,x.jsx)("div",{className:"modal fade",id:"kt_modal_view_users",tabIndex:-1,"aria-hidden":"true",children:(0,x.jsx)("div",{className:"modal-dialog mw-650px",children:(0,x.jsxs)("div",{className:"modal-content",children:[(0,x.jsx)("div",{className:"modal-header pb-0 border-0 justify-content-end",children:(0,x.jsx)("div",{className:"btn btn-sm btn-icon btn-active-color-primary","data-bs-dismiss":"modal",children:(0,x.jsx)("span",{className:"svg-icon svg-icon-1",children:(0,x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,x.jsx)("rect",{opacity:"0.5",x:"6",y:"17.3137",width:"16",height:"2",rx:"1",transform:"rotate(-45 6 17.3137)",fill:"currentColor"}),(0,x.jsx)("rect",{x:"7.41422",y:"6",width:"16",height:"2",rx:"1",transform:"rotate(45 7.41422 6)",fill:"currentColor"})]})})})}),(0,x.jsxs)("div",{className:"modal-body scroll-y mx-5 mx-xl-18 pt-0 pb-15",children:[(0,x.jsxs)("div",{className:"text-center mb-13",children:[(0,x.jsx)("h1",{className:"mb-3",children:"Browse Staffs"}),(0,x.jsx)("div",{className:"text-muted fw-bold fs-5",children:"This role is assigned to following Staffs."})]}),(0,x.jsx)("div",{className:"mb-15",children:(0,x.jsx)("div",{className:"mh-375px scroll-y me-n7 pe-7",children:null===t||void 0===t?void 0:t.map((function(e,t){return console.log(e,"data"),(0,x.jsxs)("div",{className:"d-flex flex-stack py-5 border-bottom border-gray-300 border-bottom-dashed",children:[(0,x.jsxs)("div",{className:"d-flex align-items-center",children:[(0,x.jsx)("div",{className:"symbol symbol-35px symbol-circle"}),(0,x.jsx)("div",{className:"ms-6",children:(0,x.jsx)("a",{href:"#",className:"d-flex align-items-center fs-5 fw-bolder text-dark text-hover-primary",children:(0,x.jsx)("span",{className:"badge badge-light fs-8 fw-bold ms-2",children:1==(null===e||void 0===e?void 0:e.admin)?"Admin":""})})})]}),(0,x.jsx)("div",{className:"d-flex",children:(0,x.jsx)("div",{className:"text-end",children:(0,x.jsx)("div",{className:"fs-5 fw-bolder text-dark",children:"$23,000"})})})]},t)}))})})]})]})})})]})},q=n(1830),X=n.n(q),Q=function(e){var t=e.id,n=Z().setItemIdForUpdate,s=k().query,a=(0,o.useQueryClient)();(0,r.useEffect)((function(){S.Mn.reinitialization()}),[]);var c=(0,o.useMutation)((function(){return e=t,d().delete("".concat(m,"/").concat(e)).then((function(){}));var e}),{onSuccess:function(){X().fire({title:"Success!",text:"Role Deleted!",icon:"success",confirmButtonText:"Okay"}),a.invalidateQueries(["".concat(i.vb.USERS_LIST,"-").concat(s)])}});return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("a",{href:"#",className:"btn btn-light btn-active-light-primary btn-sm","data-kt-menu-trigger":"click","data-kt-menu-placement":"bottom-end",children:(0,x.jsx)("i",{className:"bi bi-three-dots-vertical fs-5"})}),(0,x.jsxs)("div",{className:"menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bold fs-7 w-125px py-4","data-kt-menu":"true",children:[(0,x.jsx)("div",{className:"menu-item px-3",children:(0,x.jsx)("a",{className:"menu-link px-3",onClick:function(){n(t)},children:"Edit"})}),(0,x.jsx)("div",{className:"menu-item px-3",children:(0,x.jsx)("a",{className:"menu-link px-3","data-kt-users-table-filter":"delete_row",onClick:(0,U.Z)((0,A.Z)().mark((function e(){return(0,A.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:X().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){var e=(0,U.Z)((0,A.Z)().mark((function e(t){return(0,A.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isConfirmed){e.next=3;break}return e.next=3,c.mutateAsync();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)}))),children:"Delete"})})]})]})},V=function(e){var t=e.id,n=Z(),s=n.selected,a=n.onSelect,i=(0,r.useMemo)((function(){return s.includes(t)}),[t,s]);return(0,x.jsx)("div",{className:"form-check form-check-sm form-check-custom form-check-solid",children:(0,x.jsx)("input",{className:"form-check-input",type:"checkbox","data-kt-check":i,"data-kt-check-target":"#kt_table_users .form-check-input",checked:i,onChange:function(){return a(t)}})})},Y=function(e){var t=e.className,n=e.title,s=e.tableProps,a=s.column.id,o=b(),l=o.state,d=o.updateState,u=(0,r.useMemo)((function(){return l.sort&&l.sort===a}),[l,a]),m=(0,r.useMemo)((function(){return l.order}),[l]);return(0,x.jsx)("th",(0,c.Z)((0,c.Z)({},s.column.getHeaderProps()),{},{className:(0,D.Z)(t,u&&void 0!==m&&"table-sort-".concat(m)),style:{cursor:"pointer"},onClick:function(){if("actions"!==a&&"selection"!==a)if(u){if(u&&void 0!==m){if("asc"===m)return void d((0,c.Z)({sort:a,order:"desc"},i.Xw));d((0,c.Z)({sort:void 0,order:void 0},i.Xw))}}else d((0,c.Z)({sort:a,order:"asc"},i.Xw))},children:n}))},z=function(e){var t=e.tableProps,n=Z(),s=n.isAllSelected,a=n.onSelectAll;return(0,x.jsx)("th",(0,c.Z)((0,c.Z)({},t.column.getHeaderProps()),{},{className:"w-10px pe-2",children:(0,x.jsx)("div",{className:"form-check form-check-sm form-check-custom form-check-solid me-3",children:(0,x.jsx)("input",{className:"form-check-input",type:"checkbox","data-kt-check":s,"data-kt-check-target":"#kt_table_users .form-check-input",checked:s,onChange:a})})}))},J=[{Header:function(e){return(0,x.jsx)(z,{tableProps:e})},id:"selection",Cell:function(e){var t=Object.assign({},e);return(0,x.jsx)(V,{id:t.data[t.row.index].id})}},{Header:function(e){return(0,x.jsx)(Y,{tableProps:e,title:"Name",className:"min-w-125px"})},id:"name",Cell:function(e){var t=Object.assign({},e);return(0,x.jsx)(B,{user:t.data[t.row.index]})}},{Header:function(e){return(0,x.jsx)(Y,{tableProps:e,title:"Assigned To",className:"min-w-125px"})},id:"assigned_to",Cell:function(e){var t=Object.assign({},e);return(0,x.jsx)(O,{assigned_to:t.data[t.row.index].assigned_to})}},{Header:function(e){return(0,x.jsx)(Y,{tableProps:e,title:"Actions",className:"text-end min-w-100px"})},id:"actions",Cell:function(e){var t=Object.assign({},e);return(0,x.jsx)(Q,{id:t.data[t.row.index].id})}}],W=function(){return(0,x.jsx)("div",{style:(0,c.Z)((0,c.Z)({},{borderRadius:"0.475rem",boxShadow:"0 0 50px 0 rgb(82 63 105 / 15%)",backgroundColor:"#fff",color:"#7e8299",fontWeight:"500",margin:"0",width:"auto",padding:"1rem 2rem",top:"calc(50% - 2rem)",left:"calc(50% - 4rem)"}),{},{position:"absolute",textAlign:"center"}),children:"Processing..."})},G=function(){var e,t=function(){var e=(0,c.Z)({links:[]},i.Xw),t=k().response;return t&&t.payload&&t.payload.pagination?t.payload.pagination:e}(),n=y(),s=b().updateState;return(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-sm-12 col-md-5 d-flex align-items-center justify-content-center justify-content-md-start"}),(0,x.jsx)("div",{className:"col-sm-12 col-md-7 d-flex align-items-center justify-content-center justify-content-md-end",children:(0,x.jsx)("div",{id:"kt_table_users_paginate",children:(0,x.jsx)("ul",{className:"pagination",children:null===(e=t.links)||void 0===e?void 0:e.map((function(e){return(0,x.jsx)("li",{className:(0,D.Z)("page-item",{active:t.page===e.page,disabled:n,previous:"&laquo; Previous"===e.label,next:"Next &raquo;"===e.label}),children:(0,x.jsx)("a",{className:"page-link",onClick:function(){var a;(a=e.page)&&!n&&t.page!==a&&s({page:a,items_per_page:t.items_per_page||10})},dangerouslySetInnerHTML:{__html:e.label},style:{cursor:"pointer"}})},e.label)}))})})})]})},$=function(){var e=N(),t=y(),n=(0,r.useMemo)((function(){return e}),[e]),s=(0,r.useMemo)((function(){return J}),[]),a=(0,E.useTable)({columns:s,data:n}),o=a.getTableProps,l=a.getTableBodyProps,d=a.headers,u=a.rows,m=a.prepareRow;return(0,x.jsxs)(i.mN,{className:"py-4",children:[(0,x.jsx)("div",{className:"table-responsive",children:(0,x.jsxs)("table",(0,c.Z)((0,c.Z)({id:"kt_table_users",className:"table align-middle table-row-dashed fs-6 gy-5 dataTable no-footer"},o()),{},{children:[(0,x.jsx)("thead",{children:(0,x.jsx)("tr",{className:"text-start text-muted fw-bolder fs-7 text-uppercase gs-0",children:d.map((function(e){return(0,x.jsx)(M,{column:e},e.id)}))})}),(0,x.jsx)("tbody",(0,c.Z)((0,c.Z)({className:"text-gray-600 fw-bold"},l()),{},{children:u.length>0?u.map((function(e,t){return m(e),(0,x.jsx)(H,{row:e},"row-".concat(t,"-").concat(e.id))})):(0,x.jsx)("tr",{children:(0,x.jsx)("td",{colSpan:7,children:(0,x.jsx)("div",{className:"d-flex text-center w-100 align-content-center justify-content-center",children:"No matching records found"})})})}))]}))}),(0,x.jsx)(G,{}),t&&(0,x.jsx)(W,{})]})},K=function(){var e=Z().setItemIdForUpdate;return(0,x.jsxs)("div",{className:"modal-header",children:[(0,x.jsx)("h2",{className:"fw-bolder",children:"Add a Role"}),(0,x.jsx)("div",{className:"btn btn-icon btn-sm btn-active-icon-primary","data-kt-users-modal-action":"close",onClick:function(){return e(void 0)},style:{cursor:"pointer"},children:(0,x.jsx)(i.D8,{path:"/media/icons/duotune/arrows/arr061.svg",className:"svg-icon-1"})})]})},ee=n(4942),te=n(6863),ne=n(5173),se={name:"",role_permission:[]},ae=te.Ry().shape({name:te.Z_().min(3,"Minimum 3 symbols").max(50,"Maximum 50 symbols").required("Name is required")}),re=function(e){var t=e.role,n=e.isUserLoading;console.log(t,"role");var s=Z().setItemIdForUpdate,o=k().refetch,l=(0,r.useState)([]),m=(0,a.Z)(l,2),p=m[0],v=m[1],b=(0,r.useState)((0,c.Z)((0,c.Z)({},t),{},{name:t.name||se.name,role_permission:t.role_permission||se.role_permission})),j=(0,a.Z)(b,2),g=j[0],N=j[1];(0,r.useEffect)((function(){d().get("".concat(u,"/role/permissions")).then((function(e){return e.data})).then((function(e){var t;t=e.data,v(t)})).catch((function(e){console.log(e,"err")}))}),[]);var y=function(e){e&&o(),s(void 0)},w=(0,ne.TA)({initialValues:g,validationSchema:ae,onSubmit:function(){var e=(0,U.Z)((0,A.Z)().mark((function e(t,n){var s;return(0,A.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((s=n.setSubmitting)(!0),e.prev=2,!(0,i.UE)(t.id)){e.next=8;break}return e.next=6,h(t);case 6:e.next=10;break;case 8:return e.next=10,f(t);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0);case 15:return e.prev=15,s(!0),y(!0),X().fire({title:"Success!",text:"Role ".concat(t.id?"Updated":"Created","!"),icon:"success",confirmButtonText:"Okay"}),e.finish(15);case 20:case"end":return e.stop()}}),e,null,[[2,12,15,20]])})));return function(t,n){return e.apply(this,arguments)}}()}),_=function(e,t){var n=e.target,s=n.checked,a=n.name,r=g.role_permission,i=null===r||void 0===r?void 0:r.findIndex((function(e){return e.permission_id==t}));-1!==i?r[i]=(0,c.Z)((0,c.Z)({},r[i]),{},(0,ee.Z)({},a,s)):null===r||void 0===r||r.push({permission_id:t,can_view:!("can_view"!=a||!s),can_view_own:!("can_view_own"!=a||!s),can_create:!("can_create"!=a||!s),can_edit:!("can_edit"!=a||!s),can_delete:!("can_delete"!=a||!s)}),N((0,c.Z)((0,c.Z)({},g),{},{role_permission:r}))};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("form",{id:"kt_modal_add_user_form",className:"form",onSubmit:w.handleSubmit,noValidate:!0,children:[(0,x.jsxs)("div",{className:"d-flex flex-column scroll-y me-n7 pe-7",id:"kt_modal_add_role_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_role_header","data-kt-scroll-wrappers":"#kt_modal_add_role_scroll","data-kt-scroll-offset":"300px",children:[(0,x.jsxs)("div",{className:"fv-row mb-7",children:[(0,x.jsx)("label",{className:"required fw-bold fs-6 mb-2",children:"Role Name"}),(0,x.jsx)("input",(0,c.Z)((0,c.Z)({placeholder:"Enter a role name"},w.getFieldProps("name")),{},{type:"text",name:"name",className:(0,D.Z)("form-control form-control-solid mb-3 mb-lg-0",{"is-invalid":w.touched.name&&w.errors.name},{"is-valid":w.touched.name&&!w.errors.name}),autoComplete:"off",disabled:w.isSubmitting||n})),w.touched.name&&w.errors.name&&(0,x.jsx)("div",{className:"fv-plugins-message-container",children:(0,x.jsx)("div",{className:"fv-help-block",children:(0,x.jsx)("span",{role:"alert",children:w.errors.name})})})]}),(0,x.jsxs)("div",{className:"fv-row",children:[(0,x.jsx)("label",{className:"fw-bold fs-6 mb-2",children:"Role Permissions"}),(0,x.jsx)("div",{className:"table-responsive",children:(0,x.jsx)("table",{className:"table align-middle table-row-dashed fs-6 gy-5",children:(0,x.jsx)("tbody",{className:"text-gray-600 fw-bold",children:p.map((function(e,t){var n,s,a,r,i,o,l,d,u,m,f,h,p,v;return(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{className:"text-gray-800",children:e.name}),(0,x.jsx)("td",{style:{paddingLeft:40},children:(0,x.jsxs)("div",{className:"d-flex",children:[(0,x.jsxs)("label",{className:"form-check form-check-sm form-check-custom form-check-solid me-5 me-lg-15",children:[(0,x.jsx)("input",(0,c.Z)((0,c.Z)({},w.getFieldProps("role_permission.can_view")),{},{className:"form-check-input",type:"checkbox",checked:null===(n=g.role_permission)||void 0===n||null===(s=n.find((function(t){return t.permission_id==e.id})))||void 0===s?void 0:s.can_view,disabled:1==(null===(a=g.role_permission)||void 0===a||null===(r=a.find((function(t){return t.permission_id==e.id})))||void 0===r?void 0:r.can_view_own),name:"can_view",onChange:function(t){return _(t,e.id)}})),(0,x.jsx)("span",{className:"form-check-label",children:"View"})]}),(0,x.jsxs)("label",{className:"form-check form-check-sm form-check-custom form-check-solid me-5 me-lg-15",children:[(0,x.jsx)("input",(0,c.Z)((0,c.Z)({},w.getFieldProps("role_permission.can_view_own")),{},{className:"form-check-input",type:"checkbox",checked:null===(i=g.role_permission)||void 0===i||null===(o=i.find((function(t){return t.permission_id==e.id})))||void 0===o?void 0:o.can_view_own,name:"can_view_own",disabled:1==(null===(l=g.role_permission)||void 0===l||null===(d=l.find((function(t){return t.permission_id==e.id})))||void 0===d?void 0:d.can_view),onChange:function(t){return _(t,e.id)}})),(0,x.jsx)("span",{className:"form-check-label",children:"View(Own)"})]}),(0,x.jsxs)("label",{className:"form-check form-check-sm form-check-custom form-check-solid me-5 me-lg-15",children:[(0,x.jsx)("input",(0,c.Z)((0,c.Z)({},w.getFieldProps("role_permission.can_create")),{},{className:"form-check-input",type:"checkbox",checked:null===(u=g.role_permission)||void 0===u||null===(m=u.find((function(t){return t.permission_id==e.id})))||void 0===m?void 0:m.can_create,name:"can_create",onChange:function(t){return _(t,e.id)}})),(0,x.jsx)("span",{className:"form-check-label",children:"Create"})]}),(0,x.jsxs)("label",{className:"form-check form-check-sm form-check-custom form-check-solid me-5 me-lg-15",children:[(0,x.jsx)("input",(0,c.Z)((0,c.Z)({},w.getFieldProps("role_permission.can_edit")),{},{className:"form-check-input",type:"checkbox",checked:null===(f=g.role_permission)||void 0===f||null===(h=f.find((function(t){return t.permission_id==e.id})))||void 0===h?void 0:h.can_edit,name:"can_edit",onChange:function(t){return _(t,e.id)}})),(0,x.jsx)("span",{className:"form-check-label",children:"Edit"})]}),(0,x.jsxs)("label",{className:"form-check form-check-sm form-check-custom form-check-solid me-5 me-lg-15",children:[(0,x.jsx)("input",(0,c.Z)((0,c.Z)({},w.getFieldProps("role_permission.can_delete")),{},{className:"form-check-input",type:"checkbox",checked:null===(p=g.role_permission)||void 0===p||null===(v=p.find((function(t){return t.permission_id==e.id})))||void 0===v?void 0:v.can_delete,name:"can_delete",onChange:function(t){return _(t,e.id)}})),(0,x.jsx)("span",{className:"form-check-label",children:"Delete"})]})]})})]},t)}))})})})]})]}),(0,x.jsxs)("div",{className:"text-center pt-15",children:[(0,x.jsx)("button",{type:"reset",onClick:function(){return y()},className:"btn btn-light me-3","data-kt-users-modal-action":"cancel",disabled:w.isSubmitting||n,children:"Discard"}),(0,x.jsxs)("button",{type:"submit",className:"btn btn-primary","data-kt-users-modal-action":"submit",disabled:n||w.isSubmitting||!w.isValid||!w.touched,children:[(0,x.jsx)("span",{className:"indicator-label",children:"Submit"}),(w.isSubmitting||n)&&(0,x.jsxs)("span",{className:"indicator-progress",children:["Please wait..."," ",(0,x.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]})]})]})]}),(w.isSubmitting||n)&&(0,x.jsx)(W,{})]})},ie=function(){var e=Z(),t=e.itemIdForUpdate,n=e.setItemIdForUpdate,s=(0,i.UE)(t),a=(0,o.useQuery)("".concat(i.vb.USERS_LIST,"-permissions-").concat(t),(function(){return e=t,d().get("".concat(m,"/").concat(e)).then((function(e){return e.data})).then((function(e){return e.data}));var e}),{cacheTime:0,enabled:s,onError:function(e){n(void 0),console.error(e)}}),r=a.isLoading,c=a.data,l=a.error;return t?r||l||!c?null:(0,x.jsx)(re,{isUserLoading:r,role:c}):(0,x.jsx)(re,{isUserLoading:r,role:{id:void 0}})},ce=function(){return(0,r.useEffect)((function(){return document.body.classList.add("modal-open"),function(){document.body.classList.remove("modal-open")}}),[]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"modal fade show d-block",id:"kt_modal_add_user",role:"dialog",tabIndex:-1,"aria-modal":"true",children:(0,x.jsx)("div",{className:"modal-dialog modal-dialog-centered mw-900px",children:(0,x.jsxs)("div",{className:"modal-content",children:[(0,x.jsx)(K,{}),(0,x.jsx)("div",{className:"modal-body scroll-y mx-5 mx-xl-15 my-7",children:(0,x.jsx)(ie,{})})]})})}),(0,x.jsx)("div",{className:"modal-backdrop fade show"})]})},oe=function(){var e=Z().itemIdForUpdate;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(i.O7,{children:[(0,x.jsx)(L,{}),(0,x.jsx)($,{})]}),void 0!==e&&(0,x.jsx)(ce,{})]})},le=function(){return(0,x.jsx)(v,{children:(0,x.jsx)(g,{children:(0,x.jsx)(_,{children:(0,x.jsx)(oe,{})})})})},de=[{title:"Role management",path:"/roles",isSeparator:!1,isActive:!1},{title:"",path:"",isSeparator:!0,isActive:!1}],ue=function(){return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(s.V1,{breadcrumbs:de,children:"Roles list"}),(0,x.jsx)(le,{})]})}}}]);
//# sourceMappingURL=998.05151c91.chunk.js.map